<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Neel Gupta, Melanie Walsh">
<meta name="dcterms.date" content="2025-12-01">

<title>Top 500 “Greatest” Novels (1021-2015) in Seattle Public Library Checkout Data – Responsible Datasets in Context</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/responsible-logo-white.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-listing/list.min.js"></script>
<script src="../../site_libs/quarto-listing/quarto-listing.js"></script>
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-16adcba7e9b7c9f370a68c8a1be5df3a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script>

  window.document.addEventListener("DOMContentLoaded", function (_event) {
    const listingTargetEl = window.document.querySelector('#listing-exercise-posts-python .list');
    if (!listingTargetEl) {
      // No listing discovered, do not attach.
      return; 
    }

    const options = {
      valueNames: ['listing-date','listing-title','listing-categories',{ data: ['index'] },{ data: ['categories'] },{ data: ['listing-date-sort'] },{ data: ['listing-title-sort'] }],
      
      searchColumns: ["listing-date","listing-title","listing-author"],
    };

    window['quarto-listings'] = window['quarto-listings'] || {};
    window['quarto-listings']['listing-exercise-posts-python'] = new List('listing-exercise-posts-python', options);

    if (window['quarto-listing-loaded']) {
      window['quarto-listing-loaded']();
    }
  });

  window.addEventListener('hashchange',() => {
    if (window['quarto-listing-loaded']) {
      window['quarto-listing-loaded']();
    }
  })
  </script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-MZHBEJTWJ4"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-MZHBEJTWJ4', { 'anonymize_ip': true});
</script>
<script type="application/json" class="js-hypothesis-config">
{
  "theme": "clean",
  "openSidebar": false,
  "showHighlights": "whenSidebarOpen"
}
</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>
<script>
            document.addEventListener("DOMContentLoaded", function() {
              // Select the original footnotes container
              var originalFootnotes = document.querySelector(".footnotes");

              // Select the custom footnotes placeholder
              var customFootnotes = document.getElementById("custom-footnotes");

              // If both elements exist, move the footnotes
              if (originalFootnotes && customFootnotes) {
                customFootnotes.innerHTML = originalFootnotes.innerHTML;

                // Optionally, remove the original footnotes
                originalFootnotes.remove();
              }
            });
          </script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  // Function to convert string to title case
  function toTitleCase(str) {
    return str.replace(/\w\S*/g, function(txt){
      return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
    });
  }

  // Function to generate TOC
  function generateTOC(tabId, tocContainerId) {
    const tabContent = document.querySelector(tabId);
    const tocContainer = document.querySelector(tocContainerId);
    tocContainer.innerHTML = ''; // Clear previous TOC content

    console.log(`Generating TOC for: ${tabId}`);

    // Add "Table of Contents" heading
    const tocHeading = document.createElement("h6");
    tocHeading.textContent = "Table of Contents";
    tocContainer.appendChild(tocHeading);

    // Select only h2 headers, including nested tabsets
    const headers = tabContent.querySelectorAll("h2");
    console.log(`Found ${headers.length} h2 headers`);

    const tocList = document.createElement("ul");
    headers.forEach((header) => {
      console.log(`Header: ${header.textContent}`);
      if (!header.id) {
        header.id = header.textContent.toLowerCase().replace(/\s+/g, '-').replace(/[^\w\-]+/g, '');
      }
      const tocItem = document.createElement("li");
      tocItem.className = `toc-${header.tagName.toLowerCase()}`; // Add class for styling
      const tocLink = document.createElement("a");
      tocLink.href = `#${header.id}`;
      tocLink.textContent = toTitleCase(header.textContent); // Convert to title case
      tocItem.appendChild(tocLink);
      tocList.appendChild(tocItem);
    });

    tocContainer.appendChild(tocList);
  }

  // Gets the highest number of the layer of the tabsets
  function getMaxTabsetNumber() {
    const tabPanes = document.querySelectorAll('.tab-pane[id^="tabset-"]');
    let maxTabsetNumber = 1;
    tabPanes.forEach(tabPane => {
      const match = tabPane.id.match(/^tabset-(\d+)/);
      if (match) {
        const number = parseInt(match[1], 10);
        if (number > maxTabsetNumber) {
          maxTabsetNumber = number;
        }
      }
    });
    return maxTabsetNumber;
  }
  

  // Function to update TOC when tab changes
  function updateActiveTabTOC() {
    const maxTabsetNumber = getMaxTabsetNumber();
    const activeTab = document.querySelector(`.tab-pane[id^="tabset-${maxTabsetNumber}"].active`);
    const tocContainer = document.querySelector('#quarto-margin-sidebar-toc');
    if (activeTab) {
      generateTOC(`#${activeTab.id}`, '#quarto-margin-sidebar-toc');
    }
  }

  // Create and insert TOC container if it doesn't exist
  function createTOCContainer() {
    const sidebar = document.querySelector('#quarto-margin-sidebar');
    if (sidebar) {
      const existingTOC = document.querySelector('#quarto-margin-sidebar-toc');
      if (!existingTOC) {
        const tocContainer = document.createElement('div');
        tocContainer.id = 'quarto-margin-sidebar-toc';
        tocContainer.style.position = 'relative';
        tocContainer.style.padding = '10px';
        // tocContainer.style.border = '1px solid #ddd';
        sidebar.appendChild(tocContainer);
      }
    }
  }

  // Initialize TOC container and run the TOC generation
  createTOCContainer();
  updateActiveTabTOC();

  // Listen for tab changes to regenerate the TOC
  document.addEventListener('shown.bs.tab', function(event) {
    setTimeout(updateActiveTabTOC, 100);  // Delay to wait for the tab to become active
  });
});

</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<script type="module" src="../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
<meta name="twitter:title" content="Top 500 “Greatest” Novels (1021-2015) in Seattle Public Library Checkout Data – Responsible Datasets in Context">
<meta name="twitter:image" content="https://upload.wikimedia.org/wikipedia/commons/5/51/Seattle_Public_Library_logo.svg">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/responsible-logo-white.png" alt="" class="navbar-logo light-content">
    <img src="../../images/responsible-logo-white.png" alt="" class="navbar-logo dark-content">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Responsible Datasets in Context</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../datasets.html"> 
<span class="menu-text">Datasets</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../mission.html"> 
<span class="menu-text">Mission</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../team.html"> 
<span class="menu-text">Team</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-about" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">About</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-about">    
        <li>
    <a class="dropdown-item" href="../../sponsors.html">
 <span class="dropdown-text">Sponsors</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../get-in-touch.html">
 <span class="dropdown-text">Get In Touch</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/melaniewalsh/responsible-datasets-in-context"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Top 500 “Greatest” Novels (1021-2015) in Seattle Public Library Checkout Data</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
                                <div class="quarto-categories">
                <div class="quarto-category">libraries</div>
                <div class="quarto-category">literature</div>
                <div class="quarto-category">readers</div>
                <div class="quarto-category">circulation</div>
                <div class="quarto-category">metadata</div>
                <div class="quarto-category">draft</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Neel Gupta, Melanie Walsh </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 1, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<div class="tabset-margin-container"></div><div class="panel-tabset nav-pills">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">Data Essay</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">Explore the Data</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false" href="">Exercises</a></li></ul>
<div class="tab-content nav-pills">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>This dataset contains library circulation information for books in the The Top 500 “Greatest” Novels list, the the set of novels most widely held in libraries according to <a href="https://www.oclc.org/en/about.html?cmpid=md_ab">OCLC</a>. The <a href="https://data.seattle.gov/Community-and-Culture/Checkouts-by-Title/tmmm-ytt6/about_data">Seattle Public Library (SPL) Checkout Data</a> is one of the only publically available sources on circulation and popularity of literary texts <span class="citation" data-cites="Gupta_Christensen_Walsh_2025">(<a href="#ref-Gupta_Christensen_Walsh_2025" role="doc-biblioref">Gupta, Christensen, and Walsh 2025</a>)</span>, due to the unavailability of proprietary book sales data <span class="citation" data-cites="Walsh2024">(<a href="#ref-Walsh2024" role="doc-biblioref">Walsh 2022</a>)</span>. The dataset presented here is a combination of both the <a href="https://www.responsible-datasets-in-context.com/posts/top-500-novels/top-500-novels.html">top 500 “Greatest” novels dataset published on this site</a>, and <a href="https://zenodo.org/records/15792698">a mirrored version of the SPL Checkout Data</a> recording checkouts from 2005 up till Feb 2025.</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Brief Survey
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you use our materials in your class or another setting, we would love to <a href="https://forms.gle/yJpQscUH9k9Rn4Qy9">hear about it</a>!</p>
</div>
</div>
</section>
<section id="dataset" class="level2">
<h2 class="anchored" data-anchor-id="dataset">Dataset</h2>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb1" data-startfrom="72" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 71;"><span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a><span class="co">// Using the Post45 Data Viewer</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/d/8bb63a6cde9addff</span></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {viewof dataSummaryView<span class="op">,</span> Tabulator<span class="op">,</span> viewof selectedColumns<span class="op">,</span> viewof dataSet<span class="op">,</span> tableContainer<span class="op">,</span> fetchData<span class="op">,</span> generateTabulatorTableFromCSV<span class="op">,</span> progress<span class="op">,</span> progressbar} <span class="im">from</span> <span class="st">"8bb63a6cde9addff"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell hidden">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb2" data-startfrom="80" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 79;"><span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a><span class="co">// Using the Post45 Data Viewer</span></span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/d/8bb63a6cde9addff</span></span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a><span class="fu">generateTabulatorTableFromCSV</span>(</span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>  <span class="st">"#table-container4"</span><span class="op">,</span></span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://responsible-datasets-in-context.s3.us-west-2.amazonaws.com/top_500_spl_df.csv"</span><span class="op">,</span></span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>    <span class="dt">displayedColumns</span><span class="op">:</span> [</span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Top 500 info and checkouts</span></span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>      <span class="st">"top_500_title"</span><span class="op">,</span></span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>      <span class="st">"author"</span><span class="op">,</span></span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>      <span class="st">"checkoutyear"</span><span class="op">,</span></span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>      <span class="st">"checkoutmonth"</span><span class="op">,</span></span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>      <span class="st">'top_500_rank'</span><span class="op">,</span></span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>      <span class="st">'pub_year'</span><span class="op">,</span></span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>      <span class="st">'genre'</span><span class="op">,</span></span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Specific SPL Record</span></span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a>      <span class="st">"title"</span><span class="op">,</span></span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a>      <span class="st">"creator"</span><span class="op">,</span></span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a>      <span class="st">"checkouts"</span><span class="op">,</span></span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Long description</span></span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb2-103"><a href="#cb2-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-104"><a href="#cb2-104" aria-hidden="true" tabindex="-1"></a>    <span class="dt">columnPopups</span><span class="op">:</span> [</span>
<span id="cb2-105"><a href="#cb2-105" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Title of the matched Top 500 Novel"</span><span class="op">,</span></span>
<span id="cb2-106"><a href="#cb2-106" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Corresponding Author from the Top 500 Dataset"</span><span class="op">,</span></span>
<span id="cb2-107"><a href="#cb2-107" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Year of Checkout"</span><span class="op">,</span></span>
<span id="cb2-108"><a href="#cb2-108" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Month of Checkout"</span><span class="op">,</span></span>
<span id="cb2-109"><a href="#cb2-109" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Rank in the top 500 novel dataframe"</span><span class="op">,</span></span>
<span id="cb2-110"><a href="#cb2-110" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Year of Publication"</span><span class="op">,</span></span>
<span id="cb2-111"><a href="#cb2-111" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Assigned Genre label From the Top 500 dataset"</span><span class="op">,</span></span>
<span id="cb2-112"><a href="#cb2-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-113"><a href="#cb2-113" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Title in the SPL data"</span><span class="op">,</span></span>
<span id="cb2-114"><a href="#cb2-114" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Creator in the SPL data"</span><span class="op">,</span></span>
<span id="cb2-115"><a href="#cb2-115" aria-hidden="true" tabindex="-1"></a>      <span class="st">"# of Checkouts of the SPL entry in the given month and year"</span><span class="op">,</span></span>
<span id="cb2-116"><a href="#cb2-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-117"><a href="#cb2-117" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb2-118"><a href="#cb2-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-119"><a href="#cb2-119" aria-hidden="true" tabindex="-1"></a>    <span class="co">// columnWidths: {</span></span>
<span id="cb2-120"><a href="#cb2-120" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   governor: "220px",</span></span>
<span id="cb2-121"><a href="#cb2-121" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   party: "140px",</span></span>
<span id="cb2-122"><a href="#cb2-122" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   years_in_office: "220px",</span></span>
<span id="cb2-123"><a href="#cb2-123" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   school: "220px",</span></span>
<span id="cb2-124"><a href="#cb2-124" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   bio_text: "40%"</span></span>
<span id="cb2-125"><a href="#cb2-125" aria-hidden="true" tabindex="-1"></a>    <span class="co">// },</span></span>
<span id="cb2-126"><a href="#cb2-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-127"><a href="#cb2-127" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Treat these as numeric so you get proper sort/filter ranges</span></span>
<span id="cb2-128"><a href="#cb2-128" aria-hidden="true" tabindex="-1"></a>    <span class="dt">numericColumns</span><span class="op">:</span> [<span class="st">"checkouts"</span><span class="op">,</span> <span class="st">"top_500_rank"</span><span class="op">,</span> <span class="st">'pub_year'</span>]<span class="op">,</span></span>
<span id="cb2-129"><a href="#cb2-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-130"><a href="#cb2-130" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Good facets for filtering</span></span>
<span id="cb2-131"><a href="#cb2-131" aria-hidden="true" tabindex="-1"></a>    <span class="dt">categoryColumns</span><span class="op">:</span> [</span>
<span id="cb2-132"><a href="#cb2-132" aria-hidden="true" tabindex="-1"></a>      <span class="st">"top_500_title"</span><span class="op">,</span></span>
<span id="cb2-133"><a href="#cb2-133" aria-hidden="true" tabindex="-1"></a>      <span class="st">"author"</span><span class="op">,</span></span>
<span id="cb2-134"><a href="#cb2-134" aria-hidden="true" tabindex="-1"></a>      <span class="st">'genre'</span></span>
<span id="cb2-135"><a href="#cb2-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-136"><a href="#cb2-136" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb2-137"><a href="#cb2-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-138"><a href="#cb2-138" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Default sort: by state, then governor</span></span>
<span id="cb2-139"><a href="#cb2-139" aria-hidden="true" tabindex="-1"></a>    <span class="dt">sortColumns</span><span class="op">:</span> [<span class="st">"state_territory"</span><span class="op">,</span> <span class="st">"governor"</span>]<span class="op">,</span></span>
<span id="cb2-140"><a href="#cb2-140" aria-hidden="true" tabindex="-1"></a>    <span class="dt">sortOrders</span><span class="op">:</span> [<span class="st">"asc"</span><span class="op">,</span> <span class="st">"asc"</span>]<span class="op">,</span></span>
<span id="cb2-141"><a href="#cb2-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-142"><a href="#cb2-142" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Buttons (kept the same IDs you used)</span></span>
<span id="cb2-143"><a href="#cb2-143" aria-hidden="true" tabindex="-1"></a>    <span class="dt">buttonContainerId</span><span class="op">:</span> <span class="st">"#button-container1"</span><span class="op">,</span></span>
<span id="cb2-144"><a href="#cb2-144" aria-hidden="true" tabindex="-1"></a>    <span class="dt">rawButtonId</span><span class="op">:</span> <span class="st">"#download-raw1"</span><span class="op">,</span></span>
<span id="cb2-145"><a href="#cb2-145" aria-hidden="true" tabindex="-1"></a>    <span class="dt">urlCopyButtonId</span><span class="op">:</span> <span class="st">"#copy-url1"</span><span class="op">,</span></span>
<span id="cb2-146"><a href="#cb2-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-147"><a href="#cb2-147" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Optional: if your helper supports label maps for 1/0 columns, this is handy.</span></span>
<span id="cb2-148"><a href="#cb2-148" aria-hidden="true" tabindex="-1"></a>    <span class="co">// booleanLabelColumns: {</span></span>
<span id="cb2-149"><a href="#cb2-149" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   college_attendance: { "1": "Yes", "0": "No" },</span></span>
<span id="cb2-150"><a href="#cb2-150" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   ivy_attendance: { "1": "Yes", "0": "No" },</span></span>
<span id="cb2-151"><a href="#cb2-151" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   lawyer: { "1": "Yes", "0": "No" },</span></span>
<span id="cb2-152"><a href="#cb2-152" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   military_service: { "1": "Yes", "0": "No" },</span></span>
<span id="cb2-153"><a href="#cb2-153" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   born_in_state_territory: { "1": "Yes", "0": "No" },</span></span>
<span id="cb2-154"><a href="#cb2-154" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   intl_born: { "1": "Yes", "0": "No" }</span></span>
<span id="cb2-155"><a href="#cb2-155" aria-hidden="true" tabindex="-1"></a>    <span class="co">// }</span></span>
<span id="cb2-156"><a href="#cb2-156" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-157"><a href="#cb2-157" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display hidden">
<div id="ojs-cell-2" data-nodetype="expression">

</div>
</div>
</div>
<div id="table-container4" style="height: 500px">

</div>
<p>Download Full Data</p>
<div id="button-container">
<button id="download-raw1">
<p><i class="fas fa-download"></i> Download Full Data</p>
</button>
<button id="copy-url1">
<p><i class="fas fa-copy"></i> Copy Full Data URL</p>
</button>
</div>
<p>Download Table Data (including filtered options)</p>
<div id="button-container1">
<button id="download-csv">
<p><i class="fas fa-download"></i> Download CSV</p>
</button>
<button id="download-json">
<p><i class="fas fa-download"></i> Download JSON</p>
</button>
<button id="download-xlsx">
<p><i class="fas fa-download"></i> Download Excel</p>
</button>
</div>
<div id="progress-container" style="width: 100%; display: block;">
<progress id="progress-bar" style="width: 100%;" max="100" value="0">
</progress>
<div id="progress-text" style="text-align: center; margin-top: 5px;">

</div>
</div>
<p><link href="https://unpkg.com/tabulator-tables@6.3.0/dist/css/tabulator.min.css" rel="stylesheet"></p>
<script src="https://unpkg.com/tabulator-tables@6.3.0/dist/js/tabulator.min.js"></script>
<!-- Excel script -->
<script type="text/javascript" src="https://oss.sheetjs.com/sheetjs/xlsx.full.min.js"></script>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Creative Commons License
</div>
</div>
<div class="callout-body-container callout-body">
<p xmlns:cc="http://creativecommons.org/ns#">
</p><p>This work is licensed under <a href="https://creativecommons.org/licenses/by/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">CC BY 4.0<img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" style="height:22px!important;margin-left:3px;vertical-align:text-bottom;"><img src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" style="height:22px!important;margin-left:3px;vertical-align:text-bottom;"></a></p>
<p></p>
</div>
</div>
</section>
<section id="whats-in-the-data" class="level2">
<h2 class="anchored" data-anchor-id="whats-in-the-data">What’s in the data?</h2>
<p>The dataset contains extensive metadata information on the top 500 novels list, borrowed from our previous <a href="https://www.responsible-datasets-in-context.com/posts/top-500-novels/top-500-novels.html">RDIC post</a>.</p>
<section id="basic-info-on-novels" class="level3">
<h3 class="anchored" data-anchor-id="basic-info-on-novels">Basic info on novels:</h3>
<ul>
<li><strong>TOP_500_RANK:</strong> Numeric rank of text in OCLC’s original Top 500 List.</li>
<li><strong>TOP_500_Title:</strong> Title of text, as recorded in OCLC’s original Top 500 List.</li>
<li><strong>AUTHOR:</strong> Author of text, as recorded in OCLC’s original Top 500 List.</li>
<li><strong>PUB_YEAR:</strong> Year of first publication of text, according to Wikipedia.</li>
<li><strong>ORIG_LANG:</strong> Original language of text, according to Wikipedia.</li>
<li><strong>GENRE:</strong> Genre of text, as recorded in OCLC’s original Top 500 List (filtered by the ‘Choose Genre’ dropdown).</li>
</ul>
</section>
<section id="author-demographic-info" class="level3">
<h3 class="anchored" data-anchor-id="author-demographic-info">Author demographic info:</h3>
<ul>
<li><strong>AUTHOR_BIRTH:</strong> Author year of birth, according to VIAF.</li>
<li><strong>AUTHOR_DEATH:</strong> Author year of death, according to VIAF.</li>
<li><strong>AUTHOR_GENDER:</strong> Author gender, according to VIAF. Note: VIAF only includes binary gender categories, with an alternate option of “Unknown.” Although we want to resist binary categorizations of gender, we have used VIAF because it provides the most comprehensive and accurate information we could find for authors on this list, and because it can be difficult if historical authors held non-binary identities. If we find evidence that any of the authors on the list identified or identify as non-binary, we will change the gender categories to reflect their identifications.</li>
<li><strong>AUTHOR_PRIMARY_LANG:</strong> Author’s primary language of publication, according to VIAF.</li>
<li><strong>AUTHOR_NATIONALITY:</strong> Author’s nationality according to VIAF. VIAF includes multiple national associations for many authors, but we have only collected information on the first country associated with each author. Importantly, this does not include information on tribal citizenship or on changes in nationality across an author’s lifetime.</li>
<li><strong>AUTHOR_FIELD_OF_ACTIVITY:</strong> Author’s primary fields of activity, according to VIAF. VIAF includes data from multiple global partner institutions, but we only collect VIAF data associated with the Library of Congress (LOC).</li>
<li><strong>AUTHOR_OCCUPATION:</strong> Author’s primary occupations, according to VIAF. VIAF includes data from multiple global partner institutions, but we only collect VIAF data associated with the Library of Congress (LOC).</li>
</ul>
</section>
<section id="library-holdings-info" class="level3">
<h3 class="anchored" data-anchor-id="library-holdings-info">Library holdings info:</h3>
<ul>
<li><strong>OCLC_HOLDINGS:</strong> Total physical library holdings listed in WorldCat for an individual work (OWI), according to Classify.</li>
<li><strong>OCLC_EHOLDINGS:</strong> Total digital library holdings listed in WorldCat for an individual work (OWI), according to OCLC.</li>
<li><strong>OCLC_TOTAL_EDITIONS:</strong> Total editions of an individual work–physical and digital–listed in WorldCat according to OCLC.</li>
<li><strong>OCLC_HOLDINGS_RANK:</strong> Numeric rank of text based on total holdings recorded in WorldCat.</li>
<li><strong>OCLC_EDITIONS_RANK:</strong> Numeric rank of text based on total number of editions recorded in WorldCat.</li>
</ul>
</section>
<section id="online-popularity-info" class="level3">
<h3 class="anchored" data-anchor-id="online-popularity-info">Online popularity info:</h3>
<ul>
<li><strong>GR_AVG_RATING:</strong> Average star rating for a text on Goodreads.</li>
<li><strong>GR_NUM_RATINGS:</strong> Total number of ratings for a text on Goodreads.</li>
<li><strong>GR_NUM_REVIEWS:</strong> Total number of reviews for a text on Goodreads.</li>
<li><strong>GR_AVG_RATING_RANK:</strong> Numeric rank of text based on average Goodreads rating.</li>
<li><strong>GR_NUM_RATINGS_RANK:</strong> Numeric rank of text based on overall number of ratings on Goodreads.</li>
</ul>
</section>
<section id="unique-identifiers-and-urls" class="level3">
<h3 class="anchored" data-anchor-id="unique-identifiers-and-urls">Unique Identifiers and URLS:</h3>
<ul>
<li><strong>OCLC_OWI:</strong> Work ID on OCLC. A work ID represents a cluster based on “author and title information from bibliographic and authority records.” A title can be represented by multiple clusters, and therefore multiple OWIs. More information about OCLC work clustering can be found here.</li>
<li><strong>AUTHOR_VIAF:</strong> Author VIAF ID.</li>
<li><strong>GR_URL:</strong> URL for text on Goodreads.</li>
<li><strong>WIKI_URL:</strong> URL for text on Wikipedia.</li>
<li><strong>PG_ENG_URL:</strong> URL for English-language text on Project Gutenberg.</li>
<li><strong>PG_ORIG_URL:</strong> URL for original-language text (where applicable) on Project Gutenberg.</li>
<li><strong>FULL_TEXT:</strong> Full text of the novel, if it is in the public domain.</li>
</ul>
<p>After merging with the Seattle Public Library Checkout Data, we also provide the following columns sourced from their dataset:</p>
<ul>
<li><strong>UsageClass:</strong> Denotes if the item is “physical” or “digital.”</li>
<li><strong>CheckoutType:</strong> Denotes the vendor tool used to check out the item.</li>
<li><strong>MaterialType:</strong> Describes the type of item checked out (examples: book, song, movie, music, magazine).</li>
<li><strong>CheckoutYear:</strong> The 4-digit year of checkout for this record.</li>
<li><strong>CheckoutMonth:</strong> The month of checkout for this record.</li>
<li><strong>Checkouts:</strong> A count of the number of times the title was checked out within the “Checkout Month.”</li>
<li><strong>ISBN:</strong> A comma-separated list of ISBNs associated with the item record for the checkout. (Text)</li>
<li><strong>Title:</strong> The full title and subtitle of an individual item. (Text)</li>
<li><strong>Creator:</strong> The author or entity responsible for authoring the item according to the SPL.</li>
<li><strong>Subjects:</strong> The subject of the item as it appears in the catalog.</li>
<li><strong>Publisher:</strong> The publisher of the title.</li>
<li><strong>PublicationYear:</strong> The year from the catalog record in which the item was published, printed, or copyrighted.</li>
</ul>
<p>Note that we provide two titles and two different author fields, one is sourced from the Top 500 Novels List, and the other from the SPL Checkout Data. Reconciling book data is difficult, and different versions and editions of the same text can have slightly different title and author variants.</p>
</section>
</section>
<section id="where-did-the-data-come-from-who-collected-it" class="level2">
<h2 class="anchored" data-anchor-id="where-did-the-data-come-from-who-collected-it">Where Did The Data Come From? Who Collected It?</h2>
<p>For more details on the Top 500 novel list, refer to the initial <a href="https://www.responsible-datasets-in-context.com/posts/top-500-novels/top-500-novels.html">post</a>. The SPL dataset was organized by David Christensen, Data Analysis Lead at the Seattle Public Library. The Data from 2005 to 2016 in this dataset is from the digital artwork, “Making Visible the Invisible,” by studios of George Legrady.</p>
</section>
<section id="why-was-the-data-collected-how-is-the-data-used" class="level2">
<h2 class="anchored" data-anchor-id="why-was-the-data-collected-how-is-the-data-used">Why Was The Data Collected? How Is The Data Used?</h2>
<p>The data collected here is part of an <a href="https://melaniewalsh.github.io/whats-seattle-reading/">ongoing project</a> to reveal the dynamics of literary popularity through the SPL checkout data. Studying literary popularity is difficult; book sales data is proprietary and inaccessible to individuals outside of the publishing industry. While a powerful resource, the SPL checkout data, like all book data, struggles with persistent book identifiers. The same underlying work can often have different editions, author name variants, and metadata. It is difficult to cluster different versions of the same underlying work together at scale, but we have experimented previously with using a combination of semi-automated methods and manual oversight to cluster smaller sized corpuses of interest <span class="citation" data-cites="Gupta_Maor_Harris_Backstrom_Dong_Walsh_2025">(<a href="#ref-Gupta_Maor_Harris_Backstrom_Dong_Walsh_2025" role="doc-biblioref">Gupta et al. 2025</a>)</span>. The Top 500 Novels Dataset is compelling because it presents a set of works that have persisted in popularity and relevance well past publication date. These are exceptionally popular titles that have avoided the fate of the majority of books, which often fall out of circulation soon after publishing <span class="citation" data-cites="cohen_sentimental_2018">(<a href="#ref-cohen_sentimental_2018" role="doc-biblioref">Cohen 2018</a>)</span> <span class="citation" data-cites="sorensen_bestseller_2007">(<a href="#ref-sorensen_bestseller_2007" role="doc-biblioref">Sorensen 2007</a>)</span>. Studying novels like these is useful to understand how popularity and reception is working for novels that are cultural touchstones.</p>
</section>
<section id="how-was-the-data-collected" class="level2">
<h2 class="anchored" data-anchor-id="how-was-the-data-collected">How Was The Data Collected?</h2>
<p>To reconcile the SPL Checkout Data with the top 500 novel data, we employ a multi-step algorithm to capture all the records in the library data that may match one of the novels in our source list.</p>
<p>We first, manipualte the title and author fields in the SPL data to normalize against common variants. For example, many titles have “(unabridged)” appended to them, and many authors have a last name, first name formatting (e.g Collins, Suzanne). Once we’ve simplified the SPL Checkout Data, to simplified versions of title and creator, we group by those fields to reduce our dataframe down to about 800,000 unique titles.</p>
<p>We then run a two-stage algorithm to pair novels from the Top 500 list to checkout records. We iterate through all 500 of our novels and compare first the last name of the author to the creator field in the SPL, checking if the creator field contains the last name of the author somewhere in its text. We then use the <a href="https://rapidfuzz.github.io/RapidFuzz/">Python RapidFuzz library</a> to run a fuzzy matching of thte top 500 title against the title field in the SPL data. We use the <a href="https://rapidfuzz.github.io/RapidFuzz/Usage/fuzz.html">Partial Ratio</a> algorithm which identifies the optimal alignment of the shorter string in the longer string. We use a threshold of 85.</p>
<p>For an example of how this algorithm is working, consider the novel Catching Fire by Suzanne Collins. A matching SPL record has the title as Catching Fire: (movie tie in edition), the Partial Ratio algorithm returns a perfect 100 match between this title and the true title, Catching Fire. Our algorithm is designed to have high recall, rather than precision. In other words, we would rather identify more matches that could be wrong, than miss matches that could be right. Our preference for recall over precision is because there are TONS of books in the dataset, once we have a list of matching records, we can manually look at matches to ensure accuracy. It is much more difficult to identify matches in the first place from over 800,000 unique titles!</p>
<p>Importantly, the recall of our algorithm will not be perfect, and we will miss some editions that should be clustered in. For example, alternate language editions that lack the English title will often fail the Fuzzy Match. For example, Stendhal’s The Red and the Black in French is titled Le Rouge et le Noir, which will not pass our fuzzy matching threshold (luckily we’re only missing 11 checkouts from the French edition).</p>
<p>Our algorithm returns matches for every single novel on our list! But because of our high recall approach, we need to filter out mismatches. For example, Khaled Hosseini’s A Thousands Splendid Suns got matched onto the record, And the Mountains Echoed by the Bestselling Author of the Kite Runner and a Thousand Splendid Suns. These types of cases require manual oversight to filter out.</p>
<p>Our approach has a couple of systematic failures besides weird edge cases. Book series where only the first entry is in the list (Artemis Fowl, Diary of a Wimpy Kid, The Maze Runner etc.) often return all the matching entries from the series, because each future title references the original title. These were excluded manually.</p>
<p>An interesting case we often see when matching library data to these popular novels is dealing with checked out titles that contain more than one text. Think the entire Lord of The Rings Trilogy in one large volume. We make the decision to map checkouts for the entire Lord of the Rings Trilogy to each of it’s entries in the Top 500 List, meaning that one checkout is being counted three separate times in this new dataset.</p>
</section>
<section id="uncertainty-in-the-data" class="level2">
<h2 class="anchored" data-anchor-id="uncertainty-in-the-data">Uncertainty in the Data</h2>
<p>We do not claim our matching to be perfect. Besides alternate language editions, it is likely that other strange variants have been missed by our method. Additionally, the SPL Checkout Data is not a perfect proxy for book popularity. Library checkout data is affected by regional dynamics, library programming, and the nature of the library system <span class="citation" data-cites="Gupta_Christensen_Walsh_2025">Gupta et al. (<a href="#ref-Gupta_Maor_Harris_Backstrom_Dong_Walsh_2025" role="doc-biblioref">2025</a>)</span>.</p>
<p>Library checkouts have risen over time, partly due to increased participation in the library system and the rise of digital books. As a result, library checkout data does not represent a stable configuration of patrons engaging in consistent checkout behavior. Users should not treat the longitudinal checkout data as homogeneously representing the same relationship to readership across the time series.</p>
</section>
<section id="what-can-we-do-with-the-data" class="level2">
<h2 class="anchored" data-anchor-id="what-can-we-do-with-the-data">What can we do with the data?</h2>
<section id="authorial-death" class="level3">
<h3 class="anchored" data-anchor-id="authorial-death">Authorial Death</h3>
<p>Thanks to the Top 500 Dataset Creators, we have tons of metadata variables we can play with to identify trends in our data. In our previous piece <span class="citation" data-cites="Gupta_Maor_Harris_Backstrom_Dong_Walsh_2025">(<a href="#ref-Gupta_Maor_Harris_Backstrom_Dong_Walsh_2025" role="doc-biblioref">Gupta et al. 2025</a>)</span>, we present evidence that authorial death leads to a temporary boost in library checkouts for canonical authors.</p>
<p>We verify that relationship by generating timeseries of authors who died in the time of our dataframe.</p>
<div id="6eb39526" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Note on installation: https://statsandr.com/blog/an-efficient-way-to-install-and-load-r-packages/</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("rmarkdown")</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># too big</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># library(tidyverse)</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> date</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.dates <span class="im">as</span> mdates</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Load Top 500 SPL Data</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>top_500_df <span class="op">=</span> pd.read_csv(<span class="st">"https://responsible-datasets-in-context.s3.us-west-2.amazonaws.com/top_500_spl_df.csv"</span>)</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>dead_authors <span class="op">=</span> (</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    top_500_df</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">'author'</span>, <span class="st">'checkoutyear'</span>, <span class="st">'checkoutmonth'</span>], as_index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    .agg({<span class="st">'checkouts'</span>: <span class="st">'sum'</span>, <span class="st">'author_death'</span>: <span class="st">'first'</span>})</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>dead_authors[<span class="st">'author_death'</span>] <span class="op">=</span> pd.to_numeric(</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    dead_authors[<span class="st">'author_death'</span>], errors<span class="op">=</span><span class="st">'coerce'</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>dead_authors <span class="op">=</span> dead_authors[dead_authors[<span class="st">'author_death'</span>] <span class="op">&gt;</span> <span class="dv">2005</span>]</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a><span class="co"># author deaths are only by year in the dataframe, so we add specific month and days for our dead authors</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>author_death_dates <span class="op">=</span> {</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Aleksandr Isaevich Solzhenitsyn"</span>: date(<span class="dv">2008</span>, <span class="dv">8</span>, <span class="dv">3</span>),</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Betsy Cromer Byars"</span>: date(<span class="dv">2020</span>, <span class="dv">2</span>, <span class="dv">26</span>),</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Beverly Cleary"</span>: date(<span class="dv">2021</span>, <span class="dv">3</span>, <span class="dv">25</span>),</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Chinua Achebe"</span>: date(<span class="dv">2013</span>, <span class="dv">3</span>, <span class="dv">21</span>),</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Colleen McCullough"</span>: date(<span class="dv">2015</span>, <span class="dv">1</span>, <span class="dv">29</span>),</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Cormac McCarthy"</span>: date(<span class="dv">2023</span>, <span class="dv">6</span>, <span class="dv">13</span>),</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Daniel Keyes"</span>: date(<span class="dv">2014</span>, <span class="dv">6</span>, <span class="dv">15</span>),</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Donald J. Sobol"</span>: date(<span class="dv">2012</span>, <span class="dv">8</span>, <span class="dv">11</span>),</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>    <span class="st">"E.L. Konigsburg"</span>: date(<span class="dv">2013</span>, <span class="dv">4</span>, <span class="dv">19</span>),</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Gabriel García Márquez"</span>: date(<span class="dv">2014</span>, <span class="dv">4</span>, <span class="dv">17</span>),</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Gary Paulsen"</span>: date(<span class="dv">2021</span>, <span class="dv">10</span>, <span class="dv">13</span>),</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Harper Lee"</span>: date(<span class="dv">2016</span>, <span class="dv">2</span>, <span class="dv">19</span>),</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Herman Wouk"</span>: date(<span class="dv">2019</span>, <span class="dv">5</span>, <span class="dv">17</span>),</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>    <span class="st">"J.D. Salinger"</span>: date(<span class="dv">2010</span>, <span class="dv">1</span>, <span class="dv">27</span>),</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Jean Craighead George"</span>: date(<span class="dv">2012</span>, <span class="dv">5</span>, <span class="dv">15</span>),</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>    <span class="st">"John Le Carré"</span>: date(<span class="dv">2020</span>, <span class="dv">12</span>, <span class="dv">12</span>),</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Kurt Vonnegut"</span>: date(<span class="dv">2007</span>, <span class="dv">4</span>, <span class="dv">11</span>),</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Michael Crichton"</span>: date(<span class="dv">2008</span>, <span class="dv">11</span>, <span class="dv">4</span>),</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Natalie Babbitt"</span>: date(<span class="dv">2016</span>, <span class="dv">10</span>, <span class="dv">31</span>),</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Nicholas Evans"</span>: date(<span class="dv">2022</span>, <span class="dv">8</span>, <span class="dv">9</span>),</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Norman Mailer"</span>: date(<span class="dv">2007</span>, <span class="dv">11</span>, <span class="dv">10</span>),</span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Norton Juster"</span>: date(<span class="dv">2021</span>, <span class="dv">3</span>, <span class="dv">8</span>),</span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Patricia MacLachlan"</span>: date(<span class="dv">2022</span>, <span class="dv">3</span>, <span class="dv">31</span>),</span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Paula Fox"</span>: date(<span class="dv">2017</span>, <span class="dv">3</span>, <span class="dv">1</span>),</span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Ray Bradbury"</span>: date(<span class="dv">2012</span>, <span class="dv">6</span>, <span class="dv">5</span>),</span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Richard Adams"</span>: date(<span class="dv">2016</span>, <span class="dv">12</span>, <span class="dv">24</span>),</span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Robert James Waller"</span>: date(<span class="dv">2017</span>, <span class="dv">3</span>, <span class="dv">10</span>),</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sid Fleischman"</span>: date(<span class="dv">2010</span>, <span class="dv">3</span>, <span class="dv">17</span>),</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sue Grafton"</span>: date(<span class="dv">2017</span>, <span class="dv">12</span>, <span class="dv">28</span>),</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Toni Morrison"</span>: date(<span class="dv">2019</span>, <span class="dv">8</span>, <span class="dv">5</span>),</span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Umberto Eco"</span>: date(<span class="dv">2016</span>, <span class="dv">2</span>, <span class="dv">19</span>),</span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>    <span class="st">"William Styron"</span>: date(<span class="dv">2006</span>, <span class="dv">11</span>, <span class="dv">1</span>),</span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>dead_authors[<span class="st">'author_death_date'</span>] <span class="op">=</span> dead_authors[<span class="st">'author'</span>].<span class="bu">map</span>(author_death_dates)</span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>dead_authors[<span class="st">'author_death_ts'</span>] <span class="op">=</span> pd.to_datetime(dead_authors[<span class="st">'author_death_date'</span>])</span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>sns.<span class="bu">set</span>(style<span class="op">=</span><span class="st">"whitegrid"</span>)</span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a><span class="co"># Choose a fixed color palette for all plots</span></span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>palette <span class="op">=</span> sns.color_palette(<span class="st">"tab10"</span>, n_colors<span class="op">=</span><span class="dv">10</span>)  <span class="co"># 10 distinct colors, cycle if &gt;10 authors</span></span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a><span class="co"># build checkout datetime</span></span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>dead_authors[<span class="st">'date'</span>] <span class="op">=</span> pd.to_datetime(</span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a>    <span class="bu">dict</span>(</span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a>        year<span class="op">=</span>dead_authors[<span class="st">'checkoutyear'</span>],</span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>        month<span class="op">=</span>dead_authors[<span class="st">'checkoutmonth'</span>],</span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>        day<span class="op">=</span><span class="dv">1</span></span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a><span class="co"># ensure death timestamp exists and is datetime</span></span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a>dead_authors[<span class="st">'author_death_ts'</span>] <span class="op">=</span> pd.to_datetime(</span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a>    dead_authors[<span class="st">'author_death_date'</span>], <span class="bu">format</span><span class="op">=</span><span class="st">"%Y"</span>, errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a><span class="co"># Map each author to a fixed color</span></span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a>author_list <span class="op">=</span> <span class="bu">sorted</span>(dead_authors[<span class="st">'author'</span>].unique())</span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a>author_color_map <span class="op">=</span> {author: palette[i <span class="op">%</span> <span class="bu">len</span>(palette)] <span class="cf">for</span> i, author <span class="kw">in</span> <span class="bu">enumerate</span>(author_list)}</span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> author, df_a <span class="kw">in</span> dead_authors.groupby(<span class="st">'author'</span>):</span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a>    death_date <span class="op">=</span> df_a[<span class="st">'author_death_ts'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> pd.isna(death_date):</span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Skipping </span><span class="sc">{</span>author<span class="sc">}</span><span class="ss">: no valid death date"</span>)</span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">5</span>))</span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Use standardized color for this author</span></span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a>    color <span class="op">=</span> author_color_map[author]</span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Smooth line without markers</span></span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a>    plt.plot(df_a[<span class="st">'date'</span>], df_a[<span class="st">'checkouts'</span>], color<span class="op">=</span>color, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, label<span class="op">=</span><span class="st">'Checkouts'</span>)</span>
<span id="cb3-105"><a href="#cb3-105" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-106"><a href="#cb3-106" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Vertical line for death</span></span>
<span id="cb3-107"><a href="#cb3-107" aria-hidden="true" tabindex="-1"></a>    plt.axvline(death_date, color<span class="op">=</span><span class="st">'red'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, alpha<span class="op">=</span><span class="fl">0.7</span>, label<span class="op">=</span><span class="st">'Death Year'</span>)</span>
<span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-109"><a href="#cb3-109" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Annotate death year</span></span>
<span id="cb3-110"><a href="#cb3-110" aria-hidden="true" tabindex="-1"></a>    plt.text(death_date, df_a[<span class="st">'checkouts'</span>].<span class="bu">max</span>()<span class="op">*</span><span class="fl">0.95</span>, <span class="ss">f"Death (</span><span class="sc">{</span>death_date<span class="sc">.</span>year<span class="sc">}</span><span class="ss">)"</span>,</span>
<span id="cb3-111"><a href="#cb3-111" aria-hidden="true" tabindex="-1"></a>             rotation<span class="op">=</span><span class="dv">90</span>, color<span class="op">=</span><span class="st">'red'</span>, va<span class="op">=</span><span class="st">'top'</span>, ha<span class="op">=</span><span class="st">'right'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb3-112"><a href="#cb3-112" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-113"><a href="#cb3-113" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Formatting</span></span>
<span id="cb3-114"><a href="#cb3-114" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f"</span><span class="sc">{</span>author<span class="sc">}</span><span class="ss"> — Monthly Checkouts"</span>, fontsize<span class="op">=</span><span class="dv">14</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb3-115"><a href="#cb3-115" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(<span class="st">"Year"</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb3-116"><a href="#cb3-116" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">"Checkouts"</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb3-117"><a href="#cb3-117" aria-hidden="true" tabindex="-1"></a>    plt.legend()</span>
<span id="cb3-118"><a href="#cb3-118" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-119"><a href="#cb3-119" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Better x-axis formatting</span></span>
<span id="cb3-120"><a href="#cb3-120" aria-hidden="true" tabindex="-1"></a>    plt.gca().xaxis.set_major_locator(mdates.YearLocator(<span class="dv">2</span>))</span>
<span id="cb3-121"><a href="#cb3-121" aria-hidden="true" tabindex="-1"></a>    plt.gca().xaxis.set_major_formatter(mdates.DateFormatter(<span class="st">'%Y'</span>))</span>
<span id="cb3-122"><a href="#cb3-122" aria-hidden="true" tabindex="-1"></a>    plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb3-123"><a href="#cb3-123" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-124"><a href="#cb3-124" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb3-125"><a href="#cb3-125" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-1.png" width="1137" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-2.png" width="1136" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-3.png" width="1136" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-4.png" width="1136" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-5.png" width="1136" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-6.png" width="1137" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-7.png" width="1136" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-8.png" width="1137" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-9.png" width="1136" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-10.png" width="1136" height="463" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-11.png" width="1136" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-12.png" width="1137" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-13.png" width="1137" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-14.png" width="1136" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-15.png" width="1136" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-16.png" width="1137" height="463" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-17.png" width="1136" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-18.png" width="1137" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-19.png" width="1136" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-20.png" width="1136" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-21.png" width="1137" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-22.png" width="1136" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-23.png" width="1136" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-24.png" width="1137" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-25.png" width="1137" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-26.png" width="1136" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-27.png" width="1137" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-28.png" width="1137" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-29.png" width="1136" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-30.png" width="1136" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-31.png" width="1136" height="464" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-32.png" width="1137" height="464" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Almost across the board, we notice that checkouts of an author lines up with their death. Exceptions tend to be authors who have incredibly low checkout density.</p>
</section>
<section id="backlist-titles" class="level3">
<h3 class="anchored" data-anchor-id="backlist-titles">Backlist Titles</h3>
<p><span class="citation" data-cites="berglund_is_2021">(<a href="#ref-berglund_is_2021" role="doc-biblioref">Berglund and Steiner 2021</a>)</span> presents evidence from Scandinavian fiction that an author’s new releases boosts interest in their previous titles. Books by the same author effect each other’s success. The top 500 list has 89 different authors that have multiple releases. One question we might ask is whether works by the same author tend to have similar dynamics of interest.</p>
<p>We can test this by looking at the Pearson correlation coefficients between books by the same author.</p>
<p>We grabbed the mean correlations between each author’s books, and got a value of 0.42. In other words, on average, 42% of a book’s variance in the checkout data can be explained by a different book by the same author.</p>
<div id="8e49fc37" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># grabbing the subset of the df with authors that show up multiple times</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>top_500_novels <span class="op">=</span> pd.read_csv(<span class="st">"../../../datasets/top-500-novels/final_merged_dataset_no_full_text.tsv"</span>, sep<span class="op">=</span><span class="st">'</span><span class="ch">\t</span><span class="st">'</span>, header<span class="op">=</span><span class="dv">0</span>, low_memory<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>top_500_novels.groupby(<span class="st">'author'</span>).count()</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>author_counts <span class="op">=</span> top_500_novels[<span class="st">'author'</span>].value_counts()</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>multi_book_authors <span class="op">=</span> author_counts[author_counts <span class="op">&gt;</span> <span class="dv">1</span>].index.tolist()</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>multi_book_authors</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>multi_book_df <span class="op">=</span> top_500_df[top_500_df[<span class="st">'author'</span>].isin(multi_book_authors)]</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># to do correlations, need to fill in missing values with 0s</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fill_after_first_value(series):</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    filled <span class="op">=</span> series.copy()</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    has_seen_value <span class="op">=</span> <span class="va">False</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(series)):</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> pd.isna(series.iloc[i]):</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>            has_seen_value <span class="op">=</span> <span class="va">True</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> has_seen_value:</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>            filled.iloc[i] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> filled</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>author_pivot <span class="op">=</span> multi_book_df.pivot_table(</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span><span class="st">'year-month'</span>,</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>    columns<span class="op">=</span><span class="st">'top_500_title'</span>,</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    values<span class="op">=</span><span class="st">'checkouts'</span>,</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    aggfunc<span class="op">=</span><span class="st">'sum'</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>).fillna(<span class="dv">0</span>)</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>author_pivot <span class="op">=</span> author_pivot.<span class="bu">apply</span>(fill_after_first_value)</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>all_correlations <span class="op">=</span> []</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> author, df_a <span class="kw">in</span> multi_book_df.groupby(<span class="st">'author'</span>):</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>    titles <span class="op">=</span> df_a[<span class="st">'top_500_title'</span>].unique()</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(titles) <span class="op">&lt;</span> <span class="dv">2</span>:</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span>  <span class="co"># Need at least two books to compare</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>    author_data <span class="op">=</span> author_pivot[titles]</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate correlation matrix</span></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>    corr_matrix <span class="op">=</span> author_data.corr()</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    all_correlations.append((author, corr_matrix))</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>mean_correlations <span class="op">=</span> {}</span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> author, corr_matrix <span class="kw">in</span> all_correlations:</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Exclude diagonal by masking it</span></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>    mask <span class="op">=</span> np.triu(np.ones(corr_matrix.shape), k<span class="op">=</span><span class="dv">1</span>).astype(<span class="bu">bool</span>)</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>    mean_corr <span class="op">=</span> corr_matrix.where(mask).stack().mean()</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>    mean_correlations[author] <span class="op">=</span> mean_corr</span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>mean_correlations</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>mean_of_means <span class="op">=</span> np.mean(<span class="bu">list</span>(mean_correlations.values()))</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mean_of_means)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>0.42244261897179364</code></pre>
</div>
</div>
<p>It’s hard to interpret that number without context. If we look at just the correlations on average between every book in the top 500 corpus, we only observe a coefficient of 0.16. So books by the same author are almost 3x more correlated than what we would expect on average.</p>
<div id="99280a8b" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>wide_df <span class="op">=</span> top_500_df.pivot_table(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    values<span class="op">=</span><span class="st">"checkouts"</span>,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span><span class="st">"year-month"</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    columns<span class="op">=</span>[<span class="st">"top_500_title"</span>],</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    aggfunc<span class="op">=</span><span class="st">"sum"</span>,  <span class="co"># Sum in case of duplicates</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    fill_value<span class="op">=</span>np.nan,   <span class="co"># Fill missing values with 0</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>wide_df <span class="op">=</span> wide_df.<span class="bu">apply</span>(fill_after_first_value)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>correlation_matrix <span class="op">=</span> wide_df.corr()</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> np.triu(np.ones(correlation_matrix.shape), k<span class="op">=</span><span class="dv">1</span>).astype(<span class="bu">bool</span>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>mean_correlation <span class="op">=</span> correlation_matrix.where(mask).stack().mean()</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>mean_correlation</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>mean_correlation <span class="op">=</span> correlation_matrix.where(mask).stack().mean()</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mean_correlation)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>0.15918878442212858</code></pre>
</div>
</div>
<p>Let’s look at a few specific examples. A lot of books by the same author belong to book series. For example, all of J.K. Rowling’s Harry Potter books are in the top 500 corpus, so we can generate a correlation heatmap for her books.</p>
<div id="00108914" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>jk_corr <span class="op">=</span> <span class="bu">next</span>((corr <span class="cf">for</span> author, corr <span class="kw">in</span> all_correlations <span class="cf">if</span> author <span class="op">==</span> <span class="st">'J.K. Rowling'</span>), <span class="va">None</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> jk_corr <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Focus on main Harry Potter series</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    hp_order <span class="op">=</span> [</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Sorcerer's Stone"</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Chamber of Secrets"</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Prisoner of Azkaban"</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Goblet of Fire"</span>,</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Order of the Phoenix"</span>,</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Half-Blood Prince"</span>,</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Deathly Hallows"</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    jk_corr_hp <span class="op">=</span> jk_corr.reindex(index<span class="op">=</span>hp_order, columns<span class="op">=</span>hp_order)</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot heatmap</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    sns.heatmap(jk_corr_hp, annot<span class="op">=</span><span class="va">True</span>, fmt<span class="op">=</span><span class="st">".2f"</span>, cmap<span class="op">=</span><span class="st">'coolwarm'</span>, cbar_kws<span class="op">=</span>{<span class="st">"shrink"</span>: <span class="fl">0.8</span>})</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="st">"Correlation Matrix of J.K. Rowling's Harry Potter Books Checkouts"</span>)</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-5-output-1.png" width="920" height="824" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The heatmap is really striking, the middle four books of the series are highly correlated with each other, while the first book and the final two seem to have their own dynamics.</p>
<p>Let’s look at some timeseries to figure out what’s going on with the edge books!</p>
<p>First, the Prisoner of Azkaban vs.&nbsp;the Chamber of Secrets</p>
<div id="6a0cb4d5" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>wide_df[[<span class="st">"Harry Potter and the Sorcerer's Stone"</span>, <span class="st">"Harry Potter and the Chamber of Secrets"</span>]].plot()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-6-output-1.png" width="590" height="436" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>These have a correlation coefficient of 0.97 and that lines up with what we’re seeing in the timeseries.</p>
<p>How about if we compare the Prisoner of Azkaban to the Sorceror’s Stone?</p>
<div id="2b43dd60" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>wide_df[[<span class="st">"Harry Potter and the Sorcerer's Stone"</span>, <span class="st">"Harry Potter and the Prisoner of Azkaban"</span>]].plot()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-7-output-1.png" width="590" height="436" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>They actually track really well together for most of the timeframe, but we see a huge spike for the Sorceror’s Stone in 2020, which is going to really confound the correlation coefficient.</p>
<p>How about the Deathly Hallows and the Half-Blood Prince?</p>
<div id="a88ff281" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>wide_df[[<span class="st">"Harry Potter and the Deathly Hallows"</span>, <span class="st">"Harry Potter and the Half-Blood Prince"</span>]].plot()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-8-output-1.png" width="581" height="436" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>These have a more obvious explanation. Both these books actually are released in the SPL timeframe, and have large numbers of checkouts following their release at the start of their timeseries. This follows what we know about how books function commercially, where a large share of their sales is immediately around their release <span class="citation" data-cites="sorensen_bestseller_2007">(<a href="#ref-sorensen_bestseller_2007" role="doc-biblioref">Sorensen 2007</a>)</span>. Outside of their release date behavior, we see that these books still tend to follow the same dynamics. In fact, if we trim out the first few years of our timeframe and only look at our data after 2007, the correlation coefficients go straight back up!</p>
<div id="212d5807" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>multi_book_df_post_2009 <span class="op">=</span> multi_book_df[multi_book_df[<span class="st">'checkoutyear'</span>] <span class="op">&gt;=</span> <span class="dv">2009</span>]</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>author_pivot_post_2009 <span class="op">=</span> multi_book_df_post_2009.pivot_table(</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span><span class="st">'year-month'</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    columns<span class="op">=</span><span class="st">'top_500_title'</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    values<span class="op">=</span><span class="st">'checkouts'</span>,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    aggfunc<span class="op">=</span><span class="st">'sum'</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>).fillna(<span class="dv">0</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>author_pivot_post_2009 <span class="op">=</span> author_pivot_post_2009.<span class="bu">apply</span>(fill_after_first_value)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>all_correlations_post_2009 <span class="op">=</span> []</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> author, df_a <span class="kw">in</span> multi_book_df_post_2009.groupby(<span class="st">'author'</span>):</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    titles <span class="op">=</span> df_a[<span class="st">'top_500_title'</span>].unique()</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(titles) <span class="op">&lt;</span> <span class="dv">2</span>:</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span>  <span class="co"># Need at least two books to compare</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    author_data <span class="op">=</span> author_pivot_post_2009[titles]</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate correlation matrix</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    corr_matrix <span class="op">=</span> author_data.corr()</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    all_correlations_post_2009.append((author, corr_matrix))</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>jk_corr_post_2009 <span class="op">=</span> <span class="bu">next</span>((corr <span class="cf">for</span> author, corr <span class="kw">in</span> all_correlations_post_2009 <span class="cf">if</span> author <span class="op">==</span> <span class="st">'J.K. Rowling'</span>), <span class="va">None</span>)</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> jk_corr_post_2009 <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Focus on main Harry Potter series</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>    hp_order <span class="op">=</span> [</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Sorcerer's Stone"</span>,</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Chamber of Secrets"</span>,</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Prisoner of Azkaban"</span>,</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Goblet of Fire"</span>,</span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Order of the Phoenix"</span>,</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Half-Blood Prince"</span>,</span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Deathly Hallows"</span></span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>    jk_corr_hp_post_2009 <span class="op">=</span> jk_corr_post_2009.reindex(index<span class="op">=</span>hp_order, columns<span class="op">=</span>hp_order)</span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot heatmap</span></span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>    sns.heatmap(jk_corr_hp_post_2009, annot<span class="op">=</span><span class="va">True</span>, fmt<span class="op">=</span><span class="st">".2f"</span>, cmap<span class="op">=</span><span class="st">'coolwarm'</span>, cbar_kws<span class="op">=</span>{<span class="st">"shrink"</span>: <span class="fl">0.8</span>})</span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="st">"Correlation Matrix of J.K. Rowling's Harry Potter Books Checkouts"</span>)</span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-9-output-1.png" width="920" height="824" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The high correlation between the books in the series suggest that these books are likely complementary goods, the appeal for one of these books increases with the appeal for the other. Of course this makes sense, readers who finish The Prisoner of Azkaban are likely to move straight onto the Goblet of Fire in quick succession, and the value of any one of these books to a consumer is intrinsically tied to the value of the other books in the series, and the series as a whole.</p>
</section>
<section id="genres" class="level3">
<h3 class="anchored" data-anchor-id="genres">Genres</h3>
<p>Another affordance of the Top 500 Dataset list is its genre table. Although only about half of the entries are filled out, the genre metadata allows us to compare books within the same genre to see if there are any relationships between their receptions.</p>
<p>We can conduct the same correlation test as we did with authors to inspect which genres are the most internally correlated.</p>
<div id="01c4b57d" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>genre_correlations <span class="op">=</span> {}</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> genre, df_g <span class="kw">in</span> top_500_df.groupby(<span class="st">'genre'</span>):</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> genre <span class="op">==</span> <span class="st">'na'</span>:</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    genre_pivot <span class="op">=</span> df_g.pivot_table(</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>        index<span class="op">=</span><span class="st">'year-month'</span>,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>        columns<span class="op">=</span><span class="st">'top_500_title'</span>,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>        values<span class="op">=</span><span class="st">'checkouts'</span>,</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>        aggfunc<span class="op">=</span><span class="st">'sum'</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    ).fillna(<span class="dv">0</span>)</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    genre_pivot <span class="op">=</span> genre_pivot.<span class="bu">apply</span>(fill_after_first_value)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    corr_matrix <span class="op">=</span> genre_pivot.corr()</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Exclude diagonal by masking it</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    mask <span class="op">=</span> np.triu(np.ones(corr_matrix.shape), k<span class="op">=</span><span class="dv">1</span>).astype(<span class="bu">bool</span>)</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    mean_corr <span class="op">=</span> corr_matrix.where(mask).stack().mean()</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    genre_correlations[genre] <span class="op">=</span> mean_corr</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a nice-looking DataFrame table</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>genre_corr_df <span class="op">=</span> pd.DataFrame(</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">list</span>(genre_correlations.items()), </span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>    columns<span class="op">=</span>[<span class="st">'Genre'</span>, <span class="st">'Mean Correlation'</span>]</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>).sort_values(<span class="st">'Mean Correlation'</span>, ascending<span class="op">=</span><span class="va">False</span>).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>genre_corr_df[<span class="st">'Mean Correlation'</span>] <span class="op">=</span> genre_corr_df[<span class="st">'Mean Correlation'</span>].<span class="bu">round</span>(<span class="dv">3</span>)</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(genre_corr_df.to_string(index<span class="op">=</span><span class="va">False</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     Genre  Mean Correlation
    horror             0.571
     scifi             0.512
   autobio             0.474
       war             0.374
   fantasy             0.286
allegories             0.268
    action             0.226
   history             0.208
 thrillers             0.164
   mystery             0.160
 political             0.140
   bildung             0.118
   romance             0.111</code></pre>
</div>
</div>
<p>Sci-FI and Horror are the most internally correlated genres, while Political, Bildung, and Mystery are less internally correlated.</p>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>The Top 500 SPL Dataframe is an example of what we can do with complex reception data after using manual methods to extract a high fidelity subcorpus. The top 500 novels represents a particularly canonical and popular set of fiction, featuring both contemporary and historical authors, book series, and a diverse set of genres.</p>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-berglund_is_2021" class="csl-entry" role="listitem">
Berglund, Karl, and Ann Steiner. 2021. <span>“Is <span>Backlist</span> the <span>New</span> <span>Frontlist</span>?: <span>Large</span>-Scale Data Analysis of Bestseller Book Consumption in Streaming Services.”</span> <em>Logos</em> 32 (1): 7–24. <a href="https://doi.org/10.1163/18784712-03104006">https://doi.org/10.1163/18784712-03104006</a>.
</div>
<div id="ref-cohen_sentimental_2018" class="csl-entry" role="listitem">
Cohen, Margaret. 2018. <em>The <span>Sentimental</span> <span>Education</span> of the <span>Novel</span></em>. Princeton: Princeton University Press. <a href="https://muse-jhu-edu.offcampus.lib.washington.edu/pub/267/monograph/book/61065">https://muse-jhu-edu.offcampus.lib.washington.edu/pub/267/monograph/book/61065</a>.
</div>
<div id="ref-Gupta_Christensen_Walsh_2025" class="csl-entry" role="listitem">
Gupta, Neel, David Christensen, and Melanie Walsh. 2025. <span>“Seattle Public Library’s Open Checkout Data: What Can It Tell Us about Readers and Book Popularity More Broadly?”</span> <em>Journal of Open Humanities Data</em> 11 (August): 46. <a href="https://doi.org/10.5334/johd.332">https://doi.org/10.5334/johd.332</a>.
</div>
<div id="ref-Gupta_Maor_Harris_Backstrom_Dong_Walsh_2025" class="csl-entry" role="listitem">
Gupta, Neel, Daniella Maor, Karalee Harris, Emily Backstrom, Hongyuan Dong, and Melanie Walsh. 2025. <span>“The Canon in Circulation: Tracking the Reception of<br>
textit{norton Anthology} Authors in Library Checkout Data.”</span> Edited by Taylor Arnold Margherita Fantoli and Ruben Ros. <em>Anthology of Computers and the Humanities</em> 3: 1510–22. <a href="https://doi.org/10.63744/P6qPH135jhY2">https://doi.org/10.63744/P6qPH135jhY2</a>.
</div>
<div id="ref-sorensen_bestseller_2007" class="csl-entry" role="listitem">
Sorensen, Alan T. 2007. <span>“<span class="nocase">Bestseller Lists and Product Variety</span>.”</span> <em>The Journal of Industrial Economics</em> 55 (4): 715–38. <a href="https://doi.org/10.1111/j.1467-6451.2007.00327.x">https://doi.org/10.1111/j.1467-6451.2007.00327.x</a>.
</div>
<div id="ref-Walsh2024" class="csl-entry" role="listitem">
Walsh, Melanie. 2022. <span>“Where Is All the Book Data?”</span> <em>Public Books</em>. <a href="https://www.publicbooks.org/where-is-all-the-book-data/">https://www.publicbooks.org/where-is-all-the-book-data/</a>.
</div>
</div>
<div id="custom-footnotes">

</div>
</section>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<section id="explore-the-data" class="level2">
<h2 class="anchored" data-anchor-id="explore-the-data">Explore the Data</h2>
<div class="cell hidden">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb15" data-startfrom="760" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 759;"><span id="cb15-760"><a href="#cb15-760" aria-hidden="true" tabindex="-1"></a><span class="co">// Using the Post45 Data Viewer</span></span>
<span id="cb15-761"><a href="#cb15-761" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/d/8bb63a6cde9addff</span></span>
<span id="cb15-762"><a href="#cb15-762" aria-hidden="true" tabindex="-1"></a><span class="fu">generateTabulatorTableFromCSV</span>(</span>
<span id="cb15-763"><a href="#cb15-763" aria-hidden="true" tabindex="-1"></a>  <span class="st">"#table-container4"</span><span class="op">,</span></span>
<span id="cb15-764"><a href="#cb15-764" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://responsible-datasets-in-context.s3.us-west-2.amazonaws.com/top_500_spl_df.csv"</span><span class="op">,</span></span>
<span id="cb15-765"><a href="#cb15-765" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb15-766"><a href="#cb15-766" aria-hidden="true" tabindex="-1"></a>    <span class="dt">displayedColumns</span><span class="op">:</span> [</span>
<span id="cb15-767"><a href="#cb15-767" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Top 500 info and checkouts</span></span>
<span id="cb15-768"><a href="#cb15-768" aria-hidden="true" tabindex="-1"></a>      <span class="st">"top_500_title"</span><span class="op">,</span></span>
<span id="cb15-769"><a href="#cb15-769" aria-hidden="true" tabindex="-1"></a>      <span class="st">"author"</span><span class="op">,</span></span>
<span id="cb15-770"><a href="#cb15-770" aria-hidden="true" tabindex="-1"></a>      <span class="st">"checkoutyear"</span><span class="op">,</span></span>
<span id="cb15-771"><a href="#cb15-771" aria-hidden="true" tabindex="-1"></a>      <span class="st">"checkoutmonth"</span><span class="op">,</span></span>
<span id="cb15-772"><a href="#cb15-772" aria-hidden="true" tabindex="-1"></a>      <span class="st">'top_500_rank'</span><span class="op">,</span></span>
<span id="cb15-773"><a href="#cb15-773" aria-hidden="true" tabindex="-1"></a>      <span class="st">'pub_year'</span><span class="op">,</span></span>
<span id="cb15-774"><a href="#cb15-774" aria-hidden="true" tabindex="-1"></a>      <span class="st">'genre'</span><span class="op">,</span></span>
<span id="cb15-775"><a href="#cb15-775" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-776"><a href="#cb15-776" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Specific SPL Record</span></span>
<span id="cb15-777"><a href="#cb15-777" aria-hidden="true" tabindex="-1"></a>      <span class="st">"title"</span><span class="op">,</span></span>
<span id="cb15-778"><a href="#cb15-778" aria-hidden="true" tabindex="-1"></a>      <span class="st">"creator"</span><span class="op">,</span></span>
<span id="cb15-779"><a href="#cb15-779" aria-hidden="true" tabindex="-1"></a>      <span class="st">"checkouts"</span><span class="op">,</span></span>
<span id="cb15-780"><a href="#cb15-780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-781"><a href="#cb15-781" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Long description</span></span>
<span id="cb15-782"><a href="#cb15-782" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb15-783"><a href="#cb15-783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-784"><a href="#cb15-784" aria-hidden="true" tabindex="-1"></a>    <span class="dt">columnPopups</span><span class="op">:</span> [</span>
<span id="cb15-785"><a href="#cb15-785" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Title of the matched Top 500 Novel"</span><span class="op">,</span></span>
<span id="cb15-786"><a href="#cb15-786" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Corresponding Author from the Top 500 Dataset"</span><span class="op">,</span></span>
<span id="cb15-787"><a href="#cb15-787" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Year of Checkout"</span><span class="op">,</span></span>
<span id="cb15-788"><a href="#cb15-788" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Month of Checkout"</span><span class="op">,</span></span>
<span id="cb15-789"><a href="#cb15-789" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Rank in the top 500 novel dataframe"</span><span class="op">,</span></span>
<span id="cb15-790"><a href="#cb15-790" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Year of Publication"</span><span class="op">,</span></span>
<span id="cb15-791"><a href="#cb15-791" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Assigned Genre label From the Top 500 dataset"</span><span class="op">,</span></span>
<span id="cb15-792"><a href="#cb15-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-793"><a href="#cb15-793" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Title in the SPL data"</span><span class="op">,</span></span>
<span id="cb15-794"><a href="#cb15-794" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Creator in the SPL data"</span><span class="op">,</span></span>
<span id="cb15-795"><a href="#cb15-795" aria-hidden="true" tabindex="-1"></a>      <span class="st">"# of Checkouts of the SPL entry in the given month and year"</span><span class="op">,</span></span>
<span id="cb15-796"><a href="#cb15-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-797"><a href="#cb15-797" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb15-798"><a href="#cb15-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-799"><a href="#cb15-799" aria-hidden="true" tabindex="-1"></a>    <span class="co">// columnWidths: {</span></span>
<span id="cb15-800"><a href="#cb15-800" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   governor: "220px",</span></span>
<span id="cb15-801"><a href="#cb15-801" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   party: "140px",</span></span>
<span id="cb15-802"><a href="#cb15-802" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   years_in_office: "220px",</span></span>
<span id="cb15-803"><a href="#cb15-803" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   school: "220px",</span></span>
<span id="cb15-804"><a href="#cb15-804" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   bio_text: "40%"</span></span>
<span id="cb15-805"><a href="#cb15-805" aria-hidden="true" tabindex="-1"></a>    <span class="co">// },</span></span>
<span id="cb15-806"><a href="#cb15-806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-807"><a href="#cb15-807" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Treat these as numeric so you get proper sort/filter ranges</span></span>
<span id="cb15-808"><a href="#cb15-808" aria-hidden="true" tabindex="-1"></a>    <span class="dt">numericColumns</span><span class="op">:</span> [<span class="st">"checkouts"</span><span class="op">,</span> <span class="st">"top_500_rank"</span><span class="op">,</span> <span class="st">'pub_year'</span>]<span class="op">,</span></span>
<span id="cb15-809"><a href="#cb15-809" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-810"><a href="#cb15-810" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Good facets for filtering</span></span>
<span id="cb15-811"><a href="#cb15-811" aria-hidden="true" tabindex="-1"></a>    <span class="dt">categoryColumns</span><span class="op">:</span> [</span>
<span id="cb15-812"><a href="#cb15-812" aria-hidden="true" tabindex="-1"></a>      <span class="st">"top_500_title"</span><span class="op">,</span></span>
<span id="cb15-813"><a href="#cb15-813" aria-hidden="true" tabindex="-1"></a>      <span class="st">"author"</span><span class="op">,</span></span>
<span id="cb15-814"><a href="#cb15-814" aria-hidden="true" tabindex="-1"></a>      <span class="st">'genre'</span></span>
<span id="cb15-815"><a href="#cb15-815" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-816"><a href="#cb15-816" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb15-817"><a href="#cb15-817" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-818"><a href="#cb15-818" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Default sort: by state, then governor</span></span>
<span id="cb15-819"><a href="#cb15-819" aria-hidden="true" tabindex="-1"></a>    <span class="dt">sortColumns</span><span class="op">:</span> [<span class="st">"state_territory"</span><span class="op">,</span> <span class="st">"governor"</span>]<span class="op">,</span></span>
<span id="cb15-820"><a href="#cb15-820" aria-hidden="true" tabindex="-1"></a>    <span class="dt">sortOrders</span><span class="op">:</span> [<span class="st">"asc"</span><span class="op">,</span> <span class="st">"asc"</span>]<span class="op">,</span></span>
<span id="cb15-821"><a href="#cb15-821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-822"><a href="#cb15-822" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Buttons (kept the same IDs you used)</span></span>
<span id="cb15-823"><a href="#cb15-823" aria-hidden="true" tabindex="-1"></a>    <span class="dt">buttonContainerId</span><span class="op">:</span> <span class="st">"#button-container1"</span><span class="op">,</span></span>
<span id="cb15-824"><a href="#cb15-824" aria-hidden="true" tabindex="-1"></a>    <span class="dt">rawButtonId</span><span class="op">:</span> <span class="st">"#download-raw1"</span><span class="op">,</span></span>
<span id="cb15-825"><a href="#cb15-825" aria-hidden="true" tabindex="-1"></a>    <span class="dt">urlCopyButtonId</span><span class="op">:</span> <span class="st">"#copy-url1"</span><span class="op">,</span></span>
<span id="cb15-826"><a href="#cb15-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-827"><a href="#cb15-827" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Optional: if your helper supports label maps for 1/0 columns, this is handy.</span></span>
<span id="cb15-828"><a href="#cb15-828" aria-hidden="true" tabindex="-1"></a>    <span class="co">// booleanLabelColumns: {</span></span>
<span id="cb15-829"><a href="#cb15-829" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   college_attendance: { "1": "Yes", "0": "No" },</span></span>
<span id="cb15-830"><a href="#cb15-830" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   ivy_attendance: { "1": "Yes", "0": "No" },</span></span>
<span id="cb15-831"><a href="#cb15-831" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   lawyer: { "1": "Yes", "0": "No" },</span></span>
<span id="cb15-832"><a href="#cb15-832" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   military_service: { "1": "Yes", "0": "No" },</span></span>
<span id="cb15-833"><a href="#cb15-833" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   born_in_state_territory: { "1": "Yes", "0": "No" },</span></span>
<span id="cb15-834"><a href="#cb15-834" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   intl_born: { "1": "Yes", "0": "No" }</span></span>
<span id="cb15-835"><a href="#cb15-835" aria-hidden="true" tabindex="-1"></a>    <span class="co">// }</span></span>
<span id="cb15-836"><a href="#cb15-836" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-837"><a href="#cb15-837" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display hidden">
<div id="ojs-cell-3" data-nodetype="expression">

</div>
</div>
</div>
<div id="table-container1" style="height: 500px">

</div>
<p>Download Full Data</p>
<div>
<button id="download-raw2">
<p><i class="fas fa-download"></i> Download Full Data</p>
</button>
<button id="copy-url2">
<p><i class="fas fa-copy"></i> Copy Full Data URL</p>
</button>
</div>
<p>Download Table Data (including filtered options)</p>
<div id="button-container2">
<button id="download-csv">
<p><i class="fas fa-download"></i> Download CSV</p>
</button>
<button id="download-json">
<p><i class="fas fa-download"></i> Download JSON</p>
</button>
<button id="download-xlsx">
<p><i class="fas fa-download"></i> Download Excel</p>
</button>
</div>
<p><link href="https://unpkg.com/tabulator-tables@6.3.0/dist/css/tabulator.min.css" rel="stylesheet"></p>
<script src="https://unpkg.com/tabulator-tables@6.3.0/dist/js/tabulator.min.js"></script>
<!-- Excel script -->
<script type="text/javascript" src="https://oss.sheetjs.com/sheetjs/xlsx.full.min.js"></script>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Creative Commons License
</div>
</div>
<div class="callout-body-container callout-body">
<p xmlns:cc="http://creativecommons.org/ns#">
</p><p>This work is licensed under <a href="https://creativecommons.org/licenses/by/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">CC BY 4.0<img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" style="height:22px!important;margin-left:3px;vertical-align:text-bottom;"><img src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" style="height:22px!important;margin-left:3px;vertical-align:text-bottom;"></a></p>
<p></p>
</div>
</div>
</section>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<section id="programming-exercises" class="level2">
<h2 class="anchored" data-anchor-id="programming-exercises">Programming Exercises</h2>
<p>The Historical Gubernatorial Dataset is useful as a dataset for presenting interesting examples and prompting future independent exploration. Information about the governors in the dataset is well-available online, and finding historical outliers can be a fun way to engage with the history of the American Government. The exercise we present here introduces basic data exploration skills to look at common instances in a dataframe column, and then prompts the student to explore further on their own.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset nav-pills">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Python</a></li></ul>
<div class="tab-content nav-pills">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div id="listing-exercise-posts-python" class="quarto-listing quarto-listing-container-table">
<div class="listing-actions-group">
    <div class="input-group input-group-sm quarto-listing-filter">
      <span class="input-group-text"><i class="bi bi-search"></i></span>
      <input type="text" class="search form-control" placeholder="Filter">
    </div>
</div>
<table class="quarto-listing-table table">
<thead>
<tr>

<th>
Date
</th>

<th>
Title
</th>

<th>
Categories
</th>

</tr>
</thead>
<tbody class="list">

<tr data-index="0" data-categories="cGFuZGFzJTJDZXhlcmNpc2U=" data-listing-date-sort="1722470400000" data-listing-file-modified-sort="1767745366556" data-listing-date-modified-sort="NaN" data-listing-reading-time-sort="2" data-listing-word-count-sort="208" data-listing-title-sort="Pandas Value Counts with Gubernatorial Data (Exercise)" data-listing-filename-sort="Gubernatorial-Data-Value-Counts-Exercise.qmd">
<td>
<span class="listing-date">Aug 1, 2024</span>
</td>
<td>
<a href="../../posts/spl-500-novels/exercises-python/Gubernatorial-Data-Value-Counts-Exercise.html" class="title listing-title">Pandas Value Counts with Gubernatorial Data (Exercise)</a>
</td>
<td>
<span class="listing-categories">pandas, exercise</span>
</td>

</tr>

<tr data-index="1" data-categories="cGFuZGFzJTJDZXhlcmNpc2UlMkNzb2x1dGlvbg==" data-listing-date-sort="1722470400000" data-listing-file-modified-sort="1767745366556" data-listing-date-modified-sort="NaN" data-listing-reading-time-sort="2" data-listing-word-count-sort="220" data-listing-title-sort="Pandas Value Counts with Gubernatorial Data (Solution)" data-listing-filename-sort="Gubernatorial-Data-Value-Counts-Solutions.qmd">
<td>
<span class="listing-date">Aug 1, 2024</span>
</td>
<td>
<a href="../../posts/spl-500-novels/exercises-python/Gubernatorial-Data-Value-Counts-Solutions.html" class="title listing-title">Pandas Value Counts with Gubernatorial Data (Solution)</a>
</td>
<td>
<span class="listing-categories">pandas, exercise, solution</span>
</td>

</tr>

</tbody>
</table>
<div class="listing-no-matching d-none">No matching items</div>
</div>
</div>
</div>
</div>
</section>
</div>
</div>
</div>



<!-- -->


</main> <!-- /main -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
$(document).ready(function () {
    // Assign data-tab-name attribute based on the inner text of the tab links
    $('.nav-tabs .nav-link').each(function () {
        var tabName = $(this).text().toLowerCase().replace(/ /g, '-');
        $(this).attr('data-tab-name', tabName);
    });

    function activaTab(tabName, container = document) {
        var tabLink = $(container).find('.nav-tabs .nav-link[data-tab-name="' + tabName + '"]');
        if (tabLink.length) {
            tabLink.tab('show');
            tabLink.trigger('click'); // Explicitly trigger the click event
        }
    }

    function scrollToAnchor(anchorId) {
        var element = $('[data-anchor-id="' + anchorId + '"]');
        if (element.length) {
            $('html, body').animate({
                scrollTop: element.offset().top
            }, 500);
        }
    }

    function activateTabAndHeaderFromUrl() {
        var urlParams = new URLSearchParams(window.location.search);
        var tabName = urlParams.get('tab');
        var anchorId = urlParams.get('anchor');
        var nestedTabName = urlParams.get('nested-tab');

        if (tabName) {
            activaTab(tabName);
            if (anchorId) {
                setTimeout(function() {
                    scrollToAnchor(anchorId);
                }, 100); // Delay to ensure tab content is visible
            }
            if (nestedTabName) {
                setTimeout(function() {
                    var parentContainer = $('.nav-link[data-tab-name="' + tabName + '"]').attr('data-bs-target');
                    activaTab(nestedTabName, parentContainer); // Dynamically find the parent container
                }, 200); // Delay to ensure parent tab content is visible
            }
        } else {
            // Default to the first tab if no tab is specified
            var firstTabName = $('.nav-tabs .nav-link').first().attr('data-tab-name');
            activaTab(firstTabName);
        }
    }

    function clearPreviousAnchor() {
        var url = new URL(window.location.href);
        url.hash = ''; // Clear the hash part of the URL
        history.replaceState(null, null, url.toString());
    }

    // Activate the tab and scroll to anchor based on the URL when the page loads
    activateTabAndHeaderFromUrl();

    // Update URL query parameters when a tab is shown
    $('.nav-tabs a').on('shown.bs.tab', function (e) {
        clearPreviousAnchor(); // Clear any previous anchors before switching tabs
        var tabName = $(e.target).attr('data-tab-name');
        var parentTabPane = $(e.target).closest('.tab-content').prev('.nav-tabs').find('.nav-link.active').attr('data-tab-name');
        var url = new URL(window.location.href);

        if (parentTabPane) {
            url.searchParams.set('tab', parentTabPane);
            url.searchParams.set('nested-tab', tabName);
        } else {
            url.searchParams.set('tab', tabName);
            url.searchParams.delete('nested-tab');
        }

        url.searchParams.delete('anchor'); // Remove anchor parameter when switching tabs
        history.replaceState(null, null, url.toString());
    });

    // Re-activate the tab and scroll to anchor if the query parameters change
    $(window).on('popstate', function () {
        activateTabAndHeaderFromUrl();
    });
});
</script>
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Ii8vIFVzaW5nIHRoZSBQb3N0NDUgRGF0YSBWaWV3ZXJcbi8vIGh0dHBzOi8vb2JzZXJ2YWJsZWhxLmNvbS9kLzhiYjYzYTZjZGU5YWRkZmZcbmltcG9ydCB7dmlld29mIGRhdGFTdW1tYXJ5VmlldywgVGFidWxhdG9yLCB2aWV3b2Ygc2VsZWN0ZWRDb2x1bW5zLCB2aWV3b2YgZGF0YVNldCwgdGFibGVDb250YWluZXIsIGZldGNoRGF0YSwgZ2VuZXJhdGVUYWJ1bGF0b3JUYWJsZUZyb21DU1YsIHByb2dyZXNzLCBwcm9ncmVzc2Jhcn0gZnJvbSBcIjhiYjYzYTZjZGU5YWRkZmZcIlxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiXG4vLyBVc2luZyB0aGUgUG9zdDQ1IERhdGEgVmlld2VyXG4vLyBodHRwczovL29ic2VydmFibGVocS5jb20vZC84YmI2M2E2Y2RlOWFkZGZmXG5nZW5lcmF0ZVRhYnVsYXRvclRhYmxlRnJvbUNTVihcbiAgXCIjdGFibGUtY29udGFpbmVyNFwiLFxuICBcImh0dHBzOi8vcmVzcG9uc2libGUtZGF0YXNldHMtaW4tY29udGV4dC5zMy51cy13ZXN0LTIuYW1hem9uYXdzLmNvbS90b3BfNTAwX3NwbF9kZi5jc3ZcIixcbiAge1xuICAgIGRpc3BsYXllZENvbHVtbnM6IFtcbiAgICAgIC8vIFRvcCA1MDAgaW5mbyBhbmQgY2hlY2tvdXRzXG4gICAgICBcInRvcF81MDBfdGl0bGVcIixcbiAgICAgIFwiYXV0aG9yXCIsXG4gICAgICBcImNoZWNrb3V0eWVhclwiLFxuICAgICAgXCJjaGVja291dG1vbnRoXCIsXG4gICAgICAndG9wXzUwMF9yYW5rJyxcbiAgICAgICdwdWJfeWVhcicsXG4gICAgICAnZ2VucmUnLFxuXG4gICAgICAvLyBTcGVjaWZpYyBTUEwgUmVjb3JkXG4gICAgICBcInRpdGxlXCIsXG4gICAgICBcImNyZWF0b3JcIixcbiAgICAgIFwiY2hlY2tvdXRzXCIsXG5cbiAgICAgIC8vIExvbmcgZGVzY3JpcHRpb25cbiAgICBdLFxuXG4gICAgY29sdW1uUG9wdXBzOiBbXG4gICAgICBcIlRpdGxlIG9mIHRoZSBtYXRjaGVkIFRvcCA1MDAgTm92ZWxcIixcbiAgICAgIFwiQ29ycmVzcG9uZGluZyBBdXRob3IgZnJvbSB0aGUgVG9wIDUwMCBEYXRhc2V0XCIsXG4gICAgICBcIlllYXIgb2YgQ2hlY2tvdXRcIixcbiAgICAgIFwiTW9udGggb2YgQ2hlY2tvdXRcIixcbiAgICAgIFwiUmFuayBpbiB0aGUgdG9wIDUwMCBub3ZlbCBkYXRhZnJhbWVcIixcbiAgICAgIFwiWWVhciBvZiBQdWJsaWNhdGlvblwiLFxuICAgICAgXCJBc3NpZ25lZCBHZW5yZSBsYWJlbCBGcm9tIHRoZSBUb3AgNTAwIGRhdGFzZXRcIixcblxuICAgICAgXCJUaXRsZSBpbiB0aGUgU1BMIGRhdGFcIixcbiAgICAgIFwiQ3JlYXRvciBpbiB0aGUgU1BMIGRhdGFcIixcbiAgICAgIFwiIyBvZiBDaGVja291dHMgb2YgdGhlIFNQTCBlbnRyeSBpbiB0aGUgZ2l2ZW4gbW9udGggYW5kIHllYXJcIixcblxuICAgIF0sXG5cbiAgICAvLyBjb2x1bW5XaWR0aHM6IHtcbiAgICAvLyAgIGdvdmVybm9yOiBcIjIyMHB4XCIsXG4gICAgLy8gICBwYXJ0eTogXCIxNDBweFwiLFxuICAgIC8vICAgeWVhcnNfaW5fb2ZmaWNlOiBcIjIyMHB4XCIsXG4gICAgLy8gICBzY2hvb2w6IFwiMjIwcHhcIixcbiAgICAvLyAgIGJpb190ZXh0OiBcIjQwJVwiXG4gICAgLy8gfSxcblxuICAgIC8vIFRyZWF0IHRoZXNlIGFzIG51bWVyaWMgc28geW91IGdldCBwcm9wZXIgc29ydC9maWx0ZXIgcmFuZ2VzXG4gICAgbnVtZXJpY0NvbHVtbnM6IFtcImNoZWNrb3V0c1wiLCBcInRvcF81MDBfcmFua1wiLCAncHViX3llYXInXSxcblxuICAgIC8vIEdvb2QgZmFjZXRzIGZvciBmaWx0ZXJpbmdcbiAgICBjYXRlZ29yeUNvbHVtbnM6IFtcbiAgICAgIFwidG9wXzUwMF90aXRsZVwiLFxuICAgICAgXCJhdXRob3JcIixcbiAgICAgICdnZW5yZSdcblxuICAgIF0sXG5cbiAgICAvLyBEZWZhdWx0IHNvcnQ6IGJ5IHN0YXRlLCB0aGVuIGdvdmVybm9yXG4gICAgc29ydENvbHVtbnM6IFtcInN0YXRlX3RlcnJpdG9yeVwiLCBcImdvdmVybm9yXCJdLFxuICAgIHNvcnRPcmRlcnM6IFtcImFzY1wiLCBcImFzY1wiXSxcblxuICAgIC8vIEJ1dHRvbnMgKGtlcHQgdGhlIHNhbWUgSURzIHlvdSB1c2VkKVxuICAgIGJ1dHRvbkNvbnRhaW5lcklkOiBcIiNidXR0b24tY29udGFpbmVyMVwiLFxuICAgIHJhd0J1dHRvbklkOiBcIiNkb3dubG9hZC1yYXcxXCIsXG4gICAgdXJsQ29weUJ1dHRvbklkOiBcIiNjb3B5LXVybDFcIixcblxuICAgIC8vIE9wdGlvbmFsOiBpZiB5b3VyIGhlbHBlciBzdXBwb3J0cyBsYWJlbCBtYXBzIGZvciAxLzAgY29sdW1ucywgdGhpcyBpcyBoYW5keS5cbiAgICAvLyBib29sZWFuTGFiZWxDb2x1bW5zOiB7XG4gICAgLy8gICBjb2xsZWdlX2F0dGVuZGFuY2U6IHsgXCIxXCI6IFwiWWVzXCIsIFwiMFwiOiBcIk5vXCIgfSxcbiAgICAvLyAgIGl2eV9hdHRlbmRhbmNlOiB7IFwiMVwiOiBcIlllc1wiLCBcIjBcIjogXCJOb1wiIH0sXG4gICAgLy8gICBsYXd5ZXI6IHsgXCIxXCI6IFwiWWVzXCIsIFwiMFwiOiBcIk5vXCIgfSxcbiAgICAvLyAgIG1pbGl0YXJ5X3NlcnZpY2U6IHsgXCIxXCI6IFwiWWVzXCIsIFwiMFwiOiBcIk5vXCIgfSxcbiAgICAvLyAgIGJvcm5faW5fc3RhdGVfdGVycml0b3J5OiB7IFwiMVwiOiBcIlllc1wiLCBcIjBcIjogXCJOb1wiIH0sXG4gICAgLy8gICBpbnRsX2Jvcm46IHsgXCIxXCI6IFwiWWVzXCIsIFwiMFwiOiBcIk5vXCIgfVxuICAgIC8vIH1cbiAgfVxuKTtcblxuXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTMiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJcbi8vIFVzaW5nIHRoZSBQb3N0NDUgRGF0YSBWaWV3ZXJcbi8vIGh0dHBzOi8vb2JzZXJ2YWJsZWhxLmNvbS9kLzhiYjYzYTZjZGU5YWRkZmZcbmdlbmVyYXRlVGFidWxhdG9yVGFibGVGcm9tQ1NWKFxuICBcIiN0YWJsZS1jb250YWluZXI0XCIsXG4gIFwiaHR0cHM6Ly9yZXNwb25zaWJsZS1kYXRhc2V0cy1pbi1jb250ZXh0LnMzLnVzLXdlc3QtMi5hbWF6b25hd3MuY29tL3RvcF81MDBfc3BsX2RmLmNzdlwiLFxuICB7XG4gICAgZGlzcGxheWVkQ29sdW1uczogW1xuICAgICAgLy8gVG9wIDUwMCBpbmZvIGFuZCBjaGVja291dHNcbiAgICAgIFwidG9wXzUwMF90aXRsZVwiLFxuICAgICAgXCJhdXRob3JcIixcbiAgICAgIFwiY2hlY2tvdXR5ZWFyXCIsXG4gICAgICBcImNoZWNrb3V0bW9udGhcIixcbiAgICAgICd0b3BfNTAwX3JhbmsnLFxuICAgICAgJ3B1Yl95ZWFyJyxcbiAgICAgICdnZW5yZScsXG5cbiAgICAgIC8vIFNwZWNpZmljIFNQTCBSZWNvcmRcbiAgICAgIFwidGl0bGVcIixcbiAgICAgIFwiY3JlYXRvclwiLFxuICAgICAgXCJjaGVja291dHNcIixcblxuICAgICAgLy8gTG9uZyBkZXNjcmlwdGlvblxuICAgIF0sXG5cbiAgICBjb2x1bW5Qb3B1cHM6IFtcbiAgICAgIFwiVGl0bGUgb2YgdGhlIG1hdGNoZWQgVG9wIDUwMCBOb3ZlbFwiLFxuICAgICAgXCJDb3JyZXNwb25kaW5nIEF1dGhvciBmcm9tIHRoZSBUb3AgNTAwIERhdGFzZXRcIixcbiAgICAgIFwiWWVhciBvZiBDaGVja291dFwiLFxuICAgICAgXCJNb250aCBvZiBDaGVja291dFwiLFxuICAgICAgXCJSYW5rIGluIHRoZSB0b3AgNTAwIG5vdmVsIGRhdGFmcmFtZVwiLFxuICAgICAgXCJZZWFyIG9mIFB1YmxpY2F0aW9uXCIsXG4gICAgICBcIkFzc2lnbmVkIEdlbnJlIGxhYmVsIEZyb20gdGhlIFRvcCA1MDAgZGF0YXNldFwiLFxuXG4gICAgICBcIlRpdGxlIGluIHRoZSBTUEwgZGF0YVwiLFxuICAgICAgXCJDcmVhdG9yIGluIHRoZSBTUEwgZGF0YVwiLFxuICAgICAgXCIjIG9mIENoZWNrb3V0cyBvZiB0aGUgU1BMIGVudHJ5IGluIHRoZSBnaXZlbiBtb250aCBhbmQgeWVhclwiLFxuXG4gICAgXSxcblxuICAgIC8vIGNvbHVtbldpZHRoczoge1xuICAgIC8vICAgZ292ZXJub3I6IFwiMjIwcHhcIixcbiAgICAvLyAgIHBhcnR5OiBcIjE0MHB4XCIsXG4gICAgLy8gICB5ZWFyc19pbl9vZmZpY2U6IFwiMjIwcHhcIixcbiAgICAvLyAgIHNjaG9vbDogXCIyMjBweFwiLFxuICAgIC8vICAgYmlvX3RleHQ6IFwiNDAlXCJcbiAgICAvLyB9LFxuXG4gICAgLy8gVHJlYXQgdGhlc2UgYXMgbnVtZXJpYyBzbyB5b3UgZ2V0IHByb3BlciBzb3J0L2ZpbHRlciByYW5nZXNcbiAgICBudW1lcmljQ29sdW1uczogW1wiY2hlY2tvdXRzXCIsIFwidG9wXzUwMF9yYW5rXCIsICdwdWJfeWVhciddLFxuXG4gICAgLy8gR29vZCBmYWNldHMgZm9yIGZpbHRlcmluZ1xuICAgIGNhdGVnb3J5Q29sdW1uczogW1xuICAgICAgXCJ0b3BfNTAwX3RpdGxlXCIsXG4gICAgICBcImF1dGhvclwiLFxuICAgICAgJ2dlbnJlJ1xuXG4gICAgXSxcblxuICAgIC8vIERlZmF1bHQgc29ydDogYnkgc3RhdGUsIHRoZW4gZ292ZXJub3JcbiAgICBzb3J0Q29sdW1uczogW1wic3RhdGVfdGVycml0b3J5XCIsIFwiZ292ZXJub3JcIl0sXG4gICAgc29ydE9yZGVyczogW1wiYXNjXCIsIFwiYXNjXCJdLFxuXG4gICAgLy8gQnV0dG9ucyAoa2VwdCB0aGUgc2FtZSBJRHMgeW91IHVzZWQpXG4gICAgYnV0dG9uQ29udGFpbmVySWQ6IFwiI2J1dHRvbi1jb250YWluZXIxXCIsXG4gICAgcmF3QnV0dG9uSWQ6IFwiI2Rvd25sb2FkLXJhdzFcIixcbiAgICB1cmxDb3B5QnV0dG9uSWQ6IFwiI2NvcHktdXJsMVwiLFxuXG4gICAgLy8gT3B0aW9uYWw6IGlmIHlvdXIgaGVscGVyIHN1cHBvcnRzIGxhYmVsIG1hcHMgZm9yIDEvMCBjb2x1bW5zLCB0aGlzIGlzIGhhbmR5LlxuICAgIC8vIGJvb2xlYW5MYWJlbENvbHVtbnM6IHtcbiAgICAvLyAgIGNvbGxlZ2VfYXR0ZW5kYW5jZTogeyBcIjFcIjogXCJZZXNcIiwgXCIwXCI6IFwiTm9cIiB9LFxuICAgIC8vICAgaXZ5X2F0dGVuZGFuY2U6IHsgXCIxXCI6IFwiWWVzXCIsIFwiMFwiOiBcIk5vXCIgfSxcbiAgICAvLyAgIGxhd3llcjogeyBcIjFcIjogXCJZZXNcIiwgXCIwXCI6IFwiTm9cIiB9LFxuICAgIC8vICAgbWlsaXRhcnlfc2VydmljZTogeyBcIjFcIjogXCJZZXNcIiwgXCIwXCI6IFwiTm9cIiB9LFxuICAgIC8vICAgYm9ybl9pbl9zdGF0ZV90ZXJyaXRvcnk6IHsgXCIxXCI6IFwiWWVzXCIsIFwiMFwiOiBcIk5vXCIgfSxcbiAgICAvLyAgIGludGxfYm9ybjogeyBcIjFcIjogXCJZZXNcIiwgXCIwXCI6IFwiTm9cIiB9XG4gICAgLy8gfVxuICB9XG4pO1xuXG5cbiJ9XX0=
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../posts/spl-500-novels";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/www\.responsible-datasets-in-context\.com");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Top 500 “Greatest” Novels (1021-2015) in Seattle Public Library Checkout Data"</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> Neel Gupta, Melanie Walsh</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "2025-12"</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span><span class="co"> [libraries, literature, readers, circulation, metadata, draft]</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="an">image:</span><span class="co"> "https://upload.wikimedia.org/wikipedia/commons/5/51/Seattle_Public_Library_logo.svg"</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="an">format-links:</span><span class="co"> [ipynb, pdf, docx]</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co"># toc: true</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co"># toc-depth: 3</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co"># toc-title: "On this page"</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co"># toc-location: left</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="co">    css: ../../styles.css</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="an">df-print:</span><span class="co"> kable</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="an">code-fold:</span><span class="co"> true</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="an">code-tools:</span><span class="co"> true</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="co">R.options:</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="co">  warn: false</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a><span class="co">  knitr.graphics.auto_pdf: true</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a><span class="co"># (rest of your listing blocks unchanged)</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a><span class="an">listing:</span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a><span class="co"># add back if there are R exercises</span></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a><span class="co">  # - id: exercise-posts-r</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a><span class="co">  #   contents: exercises-r</span></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a><span class="co">  #   exclude:</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a><span class="co">  #     categories: "dataset, draft"</span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a><span class="co">  #   sort: "date desc"</span></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a><span class="co">  #   type: table</span></span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a><span class="co">  #   fields: [date, title, categories]</span></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a><span class="co">  #   categories: false</span></span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a><span class="co">  #   sort-ui: false</span></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a><span class="co">  #   filter-ui: true</span></span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a><span class="co">  #   image-height: 200px</span></span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a><span class="co">  - id: exercise-posts-python</span></span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a><span class="co">    contents: exercises-python</span></span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a><span class="co">    exclude:</span></span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a><span class="co">      categories: "dataset, draft"</span></span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a><span class="co">    sort: "date desc"</span></span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a><span class="co">    type: table</span></span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a><span class="co">    fields: [date, title, categories]</span></span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a><span class="co">    categories: false</span></span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a><span class="co">    sort-ui: false</span></span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a><span class="co">    filter-ui: true</span></span>
<span id="cb16-52"><a href="#cb16-52" aria-hidden="true" tabindex="-1"></a><span class="co">  </span></span>
<span id="cb16-53"><a href="#cb16-53" aria-hidden="true" tabindex="-1"></a><span class="an">bibliography:</span><span class="co"> ../../references/references.bib</span></span>
<span id="cb16-54"><a href="#cb16-54" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb16-55"><a href="#cb16-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-56"><a href="#cb16-56" aria-hidden="true" tabindex="-1"></a>:::::::::::::::::::: {.panel-tabset .nav-pills}</span>
<span id="cb16-57"><a href="#cb16-57" aria-hidden="true" tabindex="-1"></a><span class="fu"># Data Essay {#data-essay .tab-pane}</span></span>
<span id="cb16-58"><a href="#cb16-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-59"><a href="#cb16-59" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introduction</span></span>
<span id="cb16-60"><a href="#cb16-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-61"><a href="#cb16-61" aria-hidden="true" tabindex="-1"></a>This dataset contains library circulation information for books in the The Top 500 "Greatest" Novels list, the the set of novels most widely held in libraries according to <span class="co">[</span><span class="ot">OCLC</span><span class="co">](https://www.oclc.org/en/about.html?cmpid=md_ab)</span>. The <span class="co">[</span><span class="ot">Seattle Public Library (SPL) Checkout Data</span><span class="co">](https://data.seattle.gov/Community-and-Culture/Checkouts-by-Title/tmmm-ytt6/about_data)</span> is one of the only publically available sources on circulation and popularity of literary texts <span class="co">[</span><span class="ot">@Gupta_Christensen_Walsh_2025</span><span class="co">]</span>, due to the unavailability of proprietary book sales data <span class="co">[</span><span class="ot">@Walsh2024</span><span class="co">]</span>. The dataset presented here is a combination of both the <span class="co">[</span><span class="ot">top 500 "Greatest" novels dataset published on this site</span><span class="co">](https://www.responsible-datasets-in-context.com/posts/top-500-novels/top-500-novels.html)</span>, and <span class="co">[</span><span class="ot">a mirrored version of the SPL Checkout Data</span><span class="co">](https://zenodo.org/records/15792698)</span> recording checkouts from 2005 up till Feb 2025. </span>
<span id="cb16-62"><a href="#cb16-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-63"><a href="#cb16-63" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip icon="false"}</span>
<span id="cb16-64"><a href="#cb16-64" aria-hidden="true" tabindex="-1"></a><span class="fu">## Brief Survey</span></span>
<span id="cb16-65"><a href="#cb16-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-66"><a href="#cb16-66" aria-hidden="true" tabindex="-1"></a>If you use our materials in your class or another setting, we would love to <span class="co">[</span><span class="ot">hear about it</span><span class="co">](https://forms.gle/yJpQscUH9k9Rn4Qy9)</span>!</span>
<span id="cb16-67"><a href="#cb16-67" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb16-68"><a href="#cb16-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-69"><a href="#cb16-69" aria-hidden="true" tabindex="-1"></a><span class="fu">## Dataset</span></span>
<span id="cb16-70"><a href="#cb16-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-73"><a href="#cb16-73" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb16-74"><a href="#cb16-74" aria-hidden="true" tabindex="-1"></a><span class="co">//|echo: false</span></span>
<span id="cb16-75"><a href="#cb16-75" aria-hidden="true" tabindex="-1"></a><span class="co">// Using the Post45 Data Viewer</span></span>
<span id="cb16-76"><a href="#cb16-76" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/d/8bb63a6cde9addff</span></span>
<span id="cb16-77"><a href="#cb16-77" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {viewof dataSummaryView<span class="op">,</span> Tabulator<span class="op">,</span> viewof selectedColumns<span class="op">,</span> viewof dataSet<span class="op">,</span> tableContainer<span class="op">,</span> fetchData<span class="op">,</span> generateTabulatorTableFromCSV<span class="op">,</span> progress<span class="op">,</span> progressbar} <span class="im">from</span> <span class="st">"8bb63a6cde9addff"</span></span>
<span id="cb16-78"><a href="#cb16-78" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-79"><a href="#cb16-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-82"><a href="#cb16-82" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb16-83"><a href="#cb16-83" aria-hidden="true" tabindex="-1"></a><span class="co">//|echo: false</span></span>
<span id="cb16-84"><a href="#cb16-84" aria-hidden="true" tabindex="-1"></a><span class="co">//|output: false</span></span>
<span id="cb16-85"><a href="#cb16-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-86"><a href="#cb16-86" aria-hidden="true" tabindex="-1"></a><span class="co">// Using the Post45 Data Viewer</span></span>
<span id="cb16-87"><a href="#cb16-87" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/d/8bb63a6cde9addff</span></span>
<span id="cb16-88"><a href="#cb16-88" aria-hidden="true" tabindex="-1"></a><span class="fu">generateTabulatorTableFromCSV</span>(</span>
<span id="cb16-89"><a href="#cb16-89" aria-hidden="true" tabindex="-1"></a>  <span class="st">"#table-container4"</span><span class="op">,</span></span>
<span id="cb16-90"><a href="#cb16-90" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://responsible-datasets-in-context.s3.us-west-2.amazonaws.com/top_500_spl_df.csv"</span><span class="op">,</span></span>
<span id="cb16-91"><a href="#cb16-91" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb16-92"><a href="#cb16-92" aria-hidden="true" tabindex="-1"></a>    <span class="dt">displayedColumns</span><span class="op">:</span> [</span>
<span id="cb16-93"><a href="#cb16-93" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Top 500 info and checkouts</span></span>
<span id="cb16-94"><a href="#cb16-94" aria-hidden="true" tabindex="-1"></a>      <span class="st">"top_500_title"</span><span class="op">,</span></span>
<span id="cb16-95"><a href="#cb16-95" aria-hidden="true" tabindex="-1"></a>      <span class="st">"author"</span><span class="op">,</span></span>
<span id="cb16-96"><a href="#cb16-96" aria-hidden="true" tabindex="-1"></a>      <span class="st">"checkoutyear"</span><span class="op">,</span></span>
<span id="cb16-97"><a href="#cb16-97" aria-hidden="true" tabindex="-1"></a>      <span class="st">"checkoutmonth"</span><span class="op">,</span></span>
<span id="cb16-98"><a href="#cb16-98" aria-hidden="true" tabindex="-1"></a>      <span class="st">'top_500_rank'</span><span class="op">,</span></span>
<span id="cb16-99"><a href="#cb16-99" aria-hidden="true" tabindex="-1"></a>      <span class="st">'pub_year'</span><span class="op">,</span></span>
<span id="cb16-100"><a href="#cb16-100" aria-hidden="true" tabindex="-1"></a>      <span class="st">'genre'</span><span class="op">,</span></span>
<span id="cb16-101"><a href="#cb16-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-102"><a href="#cb16-102" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Specific SPL Record</span></span>
<span id="cb16-103"><a href="#cb16-103" aria-hidden="true" tabindex="-1"></a>      <span class="st">"title"</span><span class="op">,</span></span>
<span id="cb16-104"><a href="#cb16-104" aria-hidden="true" tabindex="-1"></a>      <span class="st">"creator"</span><span class="op">,</span></span>
<span id="cb16-105"><a href="#cb16-105" aria-hidden="true" tabindex="-1"></a>      <span class="st">"checkouts"</span><span class="op">,</span></span>
<span id="cb16-106"><a href="#cb16-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-107"><a href="#cb16-107" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Long description</span></span>
<span id="cb16-108"><a href="#cb16-108" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb16-109"><a href="#cb16-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-110"><a href="#cb16-110" aria-hidden="true" tabindex="-1"></a>    <span class="dt">columnPopups</span><span class="op">:</span> [</span>
<span id="cb16-111"><a href="#cb16-111" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Title of the matched Top 500 Novel"</span><span class="op">,</span></span>
<span id="cb16-112"><a href="#cb16-112" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Corresponding Author from the Top 500 Dataset"</span><span class="op">,</span></span>
<span id="cb16-113"><a href="#cb16-113" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Year of Checkout"</span><span class="op">,</span></span>
<span id="cb16-114"><a href="#cb16-114" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Month of Checkout"</span><span class="op">,</span></span>
<span id="cb16-115"><a href="#cb16-115" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Rank in the top 500 novel dataframe"</span><span class="op">,</span></span>
<span id="cb16-116"><a href="#cb16-116" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Year of Publication"</span><span class="op">,</span></span>
<span id="cb16-117"><a href="#cb16-117" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Assigned Genre label From the Top 500 dataset"</span><span class="op">,</span></span>
<span id="cb16-118"><a href="#cb16-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-119"><a href="#cb16-119" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Title in the SPL data"</span><span class="op">,</span></span>
<span id="cb16-120"><a href="#cb16-120" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Creator in the SPL data"</span><span class="op">,</span></span>
<span id="cb16-121"><a href="#cb16-121" aria-hidden="true" tabindex="-1"></a>      <span class="st">"# of Checkouts of the SPL entry in the given month and year"</span><span class="op">,</span></span>
<span id="cb16-122"><a href="#cb16-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-123"><a href="#cb16-123" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb16-124"><a href="#cb16-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-125"><a href="#cb16-125" aria-hidden="true" tabindex="-1"></a>    <span class="co">// columnWidths: {</span></span>
<span id="cb16-126"><a href="#cb16-126" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   governor: "220px",</span></span>
<span id="cb16-127"><a href="#cb16-127" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   party: "140px",</span></span>
<span id="cb16-128"><a href="#cb16-128" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   years_in_office: "220px",</span></span>
<span id="cb16-129"><a href="#cb16-129" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   school: "220px",</span></span>
<span id="cb16-130"><a href="#cb16-130" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   bio_text: "40%"</span></span>
<span id="cb16-131"><a href="#cb16-131" aria-hidden="true" tabindex="-1"></a>    <span class="co">// },</span></span>
<span id="cb16-132"><a href="#cb16-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-133"><a href="#cb16-133" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Treat these as numeric so you get proper sort/filter ranges</span></span>
<span id="cb16-134"><a href="#cb16-134" aria-hidden="true" tabindex="-1"></a>    <span class="dt">numericColumns</span><span class="op">:</span> [<span class="st">"checkouts"</span><span class="op">,</span> <span class="st">"top_500_rank"</span><span class="op">,</span> <span class="st">'pub_year'</span>]<span class="op">,</span></span>
<span id="cb16-135"><a href="#cb16-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-136"><a href="#cb16-136" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Good facets for filtering</span></span>
<span id="cb16-137"><a href="#cb16-137" aria-hidden="true" tabindex="-1"></a>    <span class="dt">categoryColumns</span><span class="op">:</span> [</span>
<span id="cb16-138"><a href="#cb16-138" aria-hidden="true" tabindex="-1"></a>      <span class="st">"top_500_title"</span><span class="op">,</span></span>
<span id="cb16-139"><a href="#cb16-139" aria-hidden="true" tabindex="-1"></a>      <span class="st">"author"</span><span class="op">,</span></span>
<span id="cb16-140"><a href="#cb16-140" aria-hidden="true" tabindex="-1"></a>      <span class="st">'genre'</span></span>
<span id="cb16-141"><a href="#cb16-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-142"><a href="#cb16-142" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb16-143"><a href="#cb16-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-144"><a href="#cb16-144" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Default sort: by state, then governor</span></span>
<span id="cb16-145"><a href="#cb16-145" aria-hidden="true" tabindex="-1"></a>    <span class="dt">sortColumns</span><span class="op">:</span> [<span class="st">"state_territory"</span><span class="op">,</span> <span class="st">"governor"</span>]<span class="op">,</span></span>
<span id="cb16-146"><a href="#cb16-146" aria-hidden="true" tabindex="-1"></a>    <span class="dt">sortOrders</span><span class="op">:</span> [<span class="st">"asc"</span><span class="op">,</span> <span class="st">"asc"</span>]<span class="op">,</span></span>
<span id="cb16-147"><a href="#cb16-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-148"><a href="#cb16-148" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Buttons (kept the same IDs you used)</span></span>
<span id="cb16-149"><a href="#cb16-149" aria-hidden="true" tabindex="-1"></a>    <span class="dt">buttonContainerId</span><span class="op">:</span> <span class="st">"#button-container1"</span><span class="op">,</span></span>
<span id="cb16-150"><a href="#cb16-150" aria-hidden="true" tabindex="-1"></a>    <span class="dt">rawButtonId</span><span class="op">:</span> <span class="st">"#download-raw1"</span><span class="op">,</span></span>
<span id="cb16-151"><a href="#cb16-151" aria-hidden="true" tabindex="-1"></a>    <span class="dt">urlCopyButtonId</span><span class="op">:</span> <span class="st">"#copy-url1"</span><span class="op">,</span></span>
<span id="cb16-152"><a href="#cb16-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-153"><a href="#cb16-153" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Optional: if your helper supports label maps for 1/0 columns, this is handy.</span></span>
<span id="cb16-154"><a href="#cb16-154" aria-hidden="true" tabindex="-1"></a>    <span class="co">// booleanLabelColumns: {</span></span>
<span id="cb16-155"><a href="#cb16-155" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   college_attendance: { "1": "Yes", "0": "No" },</span></span>
<span id="cb16-156"><a href="#cb16-156" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   ivy_attendance: { "1": "Yes", "0": "No" },</span></span>
<span id="cb16-157"><a href="#cb16-157" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   lawyer: { "1": "Yes", "0": "No" },</span></span>
<span id="cb16-158"><a href="#cb16-158" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   military_service: { "1": "Yes", "0": "No" },</span></span>
<span id="cb16-159"><a href="#cb16-159" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   born_in_state_territory: { "1": "Yes", "0": "No" },</span></span>
<span id="cb16-160"><a href="#cb16-160" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   intl_born: { "1": "Yes", "0": "No" }</span></span>
<span id="cb16-161"><a href="#cb16-161" aria-hidden="true" tabindex="-1"></a>    <span class="co">// }</span></span>
<span id="cb16-162"><a href="#cb16-162" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-163"><a href="#cb16-163" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb16-164"><a href="#cb16-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-165"><a href="#cb16-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-166"><a href="#cb16-166" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-167"><a href="#cb16-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-168"><a href="#cb16-168" aria-hidden="true" tabindex="-1"></a>::: {#table-container4 style="height: 500px"}</span>
<span id="cb16-169"><a href="#cb16-169" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb16-170"><a href="#cb16-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-171"><a href="#cb16-171" aria-hidden="true" tabindex="-1"></a>Download Full Data</span>
<span id="cb16-172"><a href="#cb16-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-173"><a href="#cb16-173" aria-hidden="true" tabindex="-1"></a>::: {#button-container}</span>
<span id="cb16-174"><a href="#cb16-174" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> id</span><span class="op">=</span><span class="st">"download-raw1"</span><span class="dt">&gt;</span></span>
<span id="cb16-175"><a href="#cb16-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-176"><a href="#cb16-176" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">i</span><span class="ot"> class</span><span class="op">=</span><span class="st">"fas fa-download"</span><span class="dt">&gt;&lt;/</span><span class="kw">i</span><span class="dt">&gt;&lt;/</span><span class="kw">i</span><span class="dt">&gt;</span> Download Full Data</span>
<span id="cb16-177"><a href="#cb16-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-178"><a href="#cb16-178" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb16-179"><a href="#cb16-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-180"><a href="#cb16-180" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> id</span><span class="op">=</span><span class="st">"copy-url1"</span><span class="dt">&gt;</span></span>
<span id="cb16-181"><a href="#cb16-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-182"><a href="#cb16-182" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">i</span><span class="ot"> class</span><span class="op">=</span><span class="st">"fas fa-copy"</span><span class="dt">&gt;&lt;/</span><span class="kw">i</span><span class="dt">&gt;</span> Copy Full Data URL</span>
<span id="cb16-183"><a href="#cb16-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-184"><a href="#cb16-184" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb16-185"><a href="#cb16-185" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb16-186"><a href="#cb16-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-187"><a href="#cb16-187" aria-hidden="true" tabindex="-1"></a>Download Table Data (including filtered options)</span>
<span id="cb16-188"><a href="#cb16-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-189"><a href="#cb16-189" aria-hidden="true" tabindex="-1"></a>::: {#button-container1}</span>
<span id="cb16-190"><a href="#cb16-190" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> id</span><span class="op">=</span><span class="st">"download-csv"</span><span class="dt">&gt;</span></span>
<span id="cb16-191"><a href="#cb16-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-192"><a href="#cb16-192" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">i</span><span class="ot"> class</span><span class="op">=</span><span class="st">"fas fa-download"</span><span class="dt">&gt;&lt;/</span><span class="kw">i</span><span class="dt">&gt;&lt;/</span><span class="kw">i</span><span class="dt">&gt;</span> Download CSV</span>
<span id="cb16-193"><a href="#cb16-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-194"><a href="#cb16-194" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb16-195"><a href="#cb16-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-196"><a href="#cb16-196" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> id</span><span class="op">=</span><span class="st">"download-json"</span><span class="dt">&gt;</span></span>
<span id="cb16-197"><a href="#cb16-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-198"><a href="#cb16-198" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">i</span><span class="ot"> class</span><span class="op">=</span><span class="st">"fas fa-download"</span><span class="dt">&gt;&lt;/</span><span class="kw">i</span><span class="dt">&gt;&lt;/</span><span class="kw">i</span><span class="dt">&gt;</span> Download JSON</span>
<span id="cb16-199"><a href="#cb16-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-200"><a href="#cb16-200" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb16-201"><a href="#cb16-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-202"><a href="#cb16-202" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> id</span><span class="op">=</span><span class="st">"download-xlsx"</span><span class="dt">&gt;</span></span>
<span id="cb16-203"><a href="#cb16-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-204"><a href="#cb16-204" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">i</span><span class="ot"> class</span><span class="op">=</span><span class="st">"fas fa-download"</span><span class="dt">&gt;&lt;/</span><span class="kw">i</span><span class="dt">&gt;&lt;/</span><span class="kw">i</span><span class="dt">&gt;</span> Download Excel</span>
<span id="cb16-205"><a href="#cb16-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-206"><a href="#cb16-206" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb16-207"><a href="#cb16-207" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb16-208"><a href="#cb16-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-209"><a href="#cb16-209" aria-hidden="true" tabindex="-1"></a>:::: {#progress-container style="width: 100%; display: block;"}</span>
<span id="cb16-210"><a href="#cb16-210" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">progress</span><span class="ot"> id</span><span class="op">=</span><span class="st">"progress-bar"</span><span class="ot"> style</span><span class="op">=</span><span class="st">"width: 100%;"</span><span class="ot"> max</span><span class="op">=</span><span class="st">"100"</span><span class="ot"> value</span><span class="op">=</span><span class="st">"0"</span><span class="dt">&gt;</span></span>
<span id="cb16-211"><a href="#cb16-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-212"><a href="#cb16-212" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">progress</span><span class="dt">&gt;</span></span>
<span id="cb16-213"><a href="#cb16-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-214"><a href="#cb16-214" aria-hidden="true" tabindex="-1"></a>::: {#progress-text style="text-align: center; margin-top: 5px;"}</span>
<span id="cb16-215"><a href="#cb16-215" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb16-216"><a href="#cb16-216" aria-hidden="true" tabindex="-1"></a>::::</span>
<span id="cb16-217"><a href="#cb16-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-218"><a href="#cb16-218" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://unpkg.com/tabulator-tables@6.3.0/dist/css/tabulator.min.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="dt">&gt;</span></span>
<span id="cb16-219"><a href="#cb16-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-220"><a href="#cb16-220" aria-hidden="true" tabindex="-1"></a><span class="in">```{=html}</span></span>
<span id="cb16-221"><a href="#cb16-221" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;script src="https://unpkg.com/tabulator-tables@6.3.0/dist/js/tabulator.min.js"&gt;&lt;/script&gt;</span></span>
<span id="cb16-222"><a href="#cb16-222" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-223"><a href="#cb16-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-224"><a href="#cb16-224" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- Excel script --&gt;</span></span>
<span id="cb16-225"><a href="#cb16-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-226"><a href="#cb16-226" aria-hidden="true" tabindex="-1"></a><span class="in">```{=html}</span></span>
<span id="cb16-227"><a href="#cb16-227" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;script type="text/javascript" src="https://oss.sheetjs.com/sheetjs/xlsx.full.min.js"&gt;&lt;/script&gt;</span></span>
<span id="cb16-228"><a href="#cb16-228" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-229"><a href="#cb16-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-230"><a href="#cb16-230" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip icon="false"}</span>
<span id="cb16-231"><a href="#cb16-231" aria-hidden="true" tabindex="-1"></a><span class="fu">## Creative Commons License</span></span>
<span id="cb16-232"><a href="#cb16-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-233"><a href="#cb16-233" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">p</span><span class="ot"> xmlns:cc</span><span class="op">=</span><span class="st">"http://creativecommons.org/ns#"</span><span class="dt">&gt;</span></span>
<span id="cb16-234"><a href="#cb16-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-235"><a href="#cb16-235" aria-hidden="true" tabindex="-1"></a>This work is licensed under <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://creativecommons.org/licenses/by/4.0/?ref=chooser-v1"</span><span class="ot"> target</span><span class="op">=</span><span class="st">"_blank"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"license noopener noreferrer"</span><span class="ot"> style</span><span class="op">=</span><span class="st">"display:inline-block;"</span><span class="dt">&gt;</span>CC BY 4.0<span class="dt">&lt;</span><span class="kw">img</span><span class="ot"> src</span><span class="op">=</span><span class="st">"https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"</span><span class="ot"> style</span><span class="op">=</span><span class="st">"height:22px!important;margin-left:3px;vertical-align:text-bottom;"</span><span class="dt">/&gt;&lt;</span><span class="kw">img</span><span class="ot"> src</span><span class="op">=</span><span class="st">"https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"</span><span class="ot"> style</span><span class="op">=</span><span class="st">"height:22px!important;margin-left:3px;vertical-align:text-bottom;"</span><span class="dt">/&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb16-236"><a href="#cb16-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-237"><a href="#cb16-237" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb16-238"><a href="#cb16-238" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb16-239"><a href="#cb16-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-240"><a href="#cb16-240" aria-hidden="true" tabindex="-1"></a><span class="fu">## What's in the data?</span></span>
<span id="cb16-241"><a href="#cb16-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-242"><a href="#cb16-242" aria-hidden="true" tabindex="-1"></a>The dataset contains extensive metadata information on the top 500 novels list, borrowed from our previous <span class="co">[</span><span class="ot">RDIC post</span><span class="co">](https://www.responsible-datasets-in-context.com/posts/top-500-novels/top-500-novels.html)</span>. </span>
<span id="cb16-243"><a href="#cb16-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-244"><a href="#cb16-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-245"><a href="#cb16-245" aria-hidden="true" tabindex="-1"></a><span class="fu">### Basic info on novels:</span></span>
<span id="cb16-246"><a href="#cb16-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-247"><a href="#cb16-247" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**TOP_500_RANK:** Numeric rank of text in OCLC’s original Top 500 List.</span>
<span id="cb16-248"><a href="#cb16-248" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**TOP_500_Title:** Title of text, as recorded in OCLC’s original Top 500 List.</span>
<span id="cb16-249"><a href="#cb16-249" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**AUTHOR:** Author of text, as recorded in OCLC’s original Top 500 List.</span>
<span id="cb16-250"><a href="#cb16-250" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**PUB_YEAR:** Year of first publication of text, according to Wikipedia.</span>
<span id="cb16-251"><a href="#cb16-251" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**ORIG_LANG:** Original language of text, according to Wikipedia.</span>
<span id="cb16-252"><a href="#cb16-252" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**GENRE:** Genre of text, as recorded in OCLC’s original Top 500 List (filtered by the ‘Choose Genre’ dropdown).</span>
<span id="cb16-253"><a href="#cb16-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-254"><a href="#cb16-254" aria-hidden="true" tabindex="-1"></a><span class="fu">### Author demographic info:</span></span>
<span id="cb16-255"><a href="#cb16-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-256"><a href="#cb16-256" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**AUTHOR_BIRTH:** Author year of birth, according to VIAF.</span>
<span id="cb16-257"><a href="#cb16-257" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**AUTHOR_DEATH:** Author year of death, according to VIAF.</span>
<span id="cb16-258"><a href="#cb16-258" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**AUTHOR_GENDER:** Author gender, according to VIAF. Note: VIAF only includes binary gender categories, with an alternate option of “Unknown.” Although we want to resist binary categorizations of gender, we have used VIAF because it provides the most comprehensive and accurate information we could find for authors on this list, and because it can be difficult if historical authors held non-binary identities. If we find evidence that any of the authors on the list identified or identify as non-binary, we will change the gender categories to reflect their identifications.</span>
<span id="cb16-259"><a href="#cb16-259" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**AUTHOR_PRIMARY_LANG:** Author’s primary language of publication, according to VIAF.</span>
<span id="cb16-260"><a href="#cb16-260" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**AUTHOR_NATIONALITY:** Author’s nationality according to VIAF. VIAF includes multiple national associations for many authors, but we have only collected information on the first country associated with each author. Importantly, this does not include information on tribal citizenship or on changes in nationality across an author’s lifetime.</span>
<span id="cb16-261"><a href="#cb16-261" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**AUTHOR_FIELD_OF_ACTIVITY:** Author’s primary fields of activity, according to VIAF. VIAF includes data from multiple global partner institutions, but we only collect VIAF data associated with the Library of Congress (LOC).</span>
<span id="cb16-262"><a href="#cb16-262" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**AUTHOR_OCCUPATION:** Author’s primary occupations, according to VIAF. VIAF includes data from multiple global partner institutions, but we only collect VIAF data associated with the Library of Congress (LOC).</span>
<span id="cb16-263"><a href="#cb16-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-264"><a href="#cb16-264" aria-hidden="true" tabindex="-1"></a><span class="fu">### Library holdings info:</span></span>
<span id="cb16-265"><a href="#cb16-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-266"><a href="#cb16-266" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**OCLC_HOLDINGS:** Total physical library holdings listed in WorldCat for an individual work (OWI), according to Classify.</span>
<span id="cb16-267"><a href="#cb16-267" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**OCLC_EHOLDINGS:** Total digital library holdings listed in WorldCat for an individual work (OWI), according to OCLC.</span>
<span id="cb16-268"><a href="#cb16-268" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**OCLC_TOTAL_EDITIONS:** Total editions of an individual work–physical and digital–listed in WorldCat according to OCLC.</span>
<span id="cb16-269"><a href="#cb16-269" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**OCLC_HOLDINGS_RANK:** Numeric rank of text based on total holdings recorded in WorldCat.</span>
<span id="cb16-270"><a href="#cb16-270" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**OCLC_EDITIONS_RANK:** Numeric rank of text based on total number of editions recorded in WorldCat.</span>
<span id="cb16-271"><a href="#cb16-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-272"><a href="#cb16-272" aria-hidden="true" tabindex="-1"></a><span class="fu">### Online popularity info:</span></span>
<span id="cb16-273"><a href="#cb16-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-274"><a href="#cb16-274" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**GR_AVG_RATING:** Average star rating for a text on Goodreads.</span>
<span id="cb16-275"><a href="#cb16-275" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**GR_NUM_RATINGS:** Total number of ratings for a text on Goodreads.</span>
<span id="cb16-276"><a href="#cb16-276" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**GR_NUM_REVIEWS:** Total number of reviews for a text on Goodreads.</span>
<span id="cb16-277"><a href="#cb16-277" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**GR_AVG_RATING_RANK:** Numeric rank of text based on average Goodreads rating.</span>
<span id="cb16-278"><a href="#cb16-278" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**GR_NUM_RATINGS_RANK:** Numeric rank of text based on overall number of ratings on Goodreads.</span>
<span id="cb16-279"><a href="#cb16-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-280"><a href="#cb16-280" aria-hidden="true" tabindex="-1"></a><span class="fu">### Unique Identifiers and URLS:</span></span>
<span id="cb16-281"><a href="#cb16-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-282"><a href="#cb16-282" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**OCLC_OWI:** Work ID on OCLC. A work ID represents a cluster based on “author and title information from bibliographic and authority records.” A title can be represented by multiple clusters, and therefore multiple OWIs. More information about OCLC work clustering can be found here.</span>
<span id="cb16-283"><a href="#cb16-283" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**AUTHOR_VIAF:** Author VIAF ID.</span>
<span id="cb16-284"><a href="#cb16-284" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**GR_URL:** URL for text on Goodreads.</span>
<span id="cb16-285"><a href="#cb16-285" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**WIKI_URL:** URL for text on Wikipedia.</span>
<span id="cb16-286"><a href="#cb16-286" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**PG_ENG_URL:** URL for English-language text on Project Gutenberg.</span>
<span id="cb16-287"><a href="#cb16-287" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**PG_ORIG_URL:** URL for original-language text (where applicable) on Project Gutenberg.</span>
<span id="cb16-288"><a href="#cb16-288" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**FULL_TEXT:** Full text of the novel, if it is in the public domain.</span>
<span id="cb16-289"><a href="#cb16-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-290"><a href="#cb16-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-291"><a href="#cb16-291" aria-hidden="true" tabindex="-1"></a>After merging with the Seattle Public Library Checkout Data, we also provide the following columns sourced from their dataset:</span>
<span id="cb16-292"><a href="#cb16-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-293"><a href="#cb16-293" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**UsageClass:** Denotes if the item is “physical” or “digital.” </span>
<span id="cb16-294"><a href="#cb16-294" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**CheckoutType:** Denotes the vendor tool used to check out the item. </span>
<span id="cb16-295"><a href="#cb16-295" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**MaterialType:** Describes the type of item checked out (examples: book, song, movie, music, magazine). </span>
<span id="cb16-296"><a href="#cb16-296" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**CheckoutYear:** The 4-digit year of checkout for this record. </span>
<span id="cb16-297"><a href="#cb16-297" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**CheckoutMonth:** The month of checkout for this record. </span>
<span id="cb16-298"><a href="#cb16-298" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Checkouts:** A count of the number of times the title was checked out within the “Checkout Month.” </span>
<span id="cb16-299"><a href="#cb16-299" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**ISBN:** A comma-separated list of ISBNs associated with the item record for the checkout. (Text)</span>
<span id="cb16-300"><a href="#cb16-300" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Title:** The full title and subtitle of an individual item. (Text)</span>
<span id="cb16-301"><a href="#cb16-301" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Creator:** The author or entity responsible for authoring the item according to the SPL. </span>
<span id="cb16-302"><a href="#cb16-302" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Subjects:** The subject of the item as it appears in the catalog. </span>
<span id="cb16-303"><a href="#cb16-303" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Publisher:** The publisher of the title. </span>
<span id="cb16-304"><a href="#cb16-304" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**PublicationYear:** The year from the catalog record in which the item was published, printed, or copyrighted. </span>
<span id="cb16-305"><a href="#cb16-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-306"><a href="#cb16-306" aria-hidden="true" tabindex="-1"></a>Note that we provide two titles and two different author fields, one is sourced from the Top 500 Novels List, and the other from the SPL Checkout Data. Reconciling book data is difficult, and different versions and editions of the same text can have slightly different title and author variants. </span>
<span id="cb16-307"><a href="#cb16-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-308"><a href="#cb16-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-309"><a href="#cb16-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-310"><a href="#cb16-310" aria-hidden="true" tabindex="-1"></a><span class="fu">## Where Did The Data Come From? Who Collected It?</span></span>
<span id="cb16-311"><a href="#cb16-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-312"><a href="#cb16-312" aria-hidden="true" tabindex="-1"></a>For more details on the Top 500 novel list, refer to the initial <span class="co">[</span><span class="ot">post</span><span class="co">](https://www.responsible-datasets-in-context.com/posts/top-500-novels/top-500-novels.html)</span>. The SPL dataset was organized by David Christensen, Data Analysis Lead at the Seattle Public Library. The Data from 2005 to 2016 in this dataset is from the digital artwork, “Making Visible the Invisible,” by studios of George Legrady.</span>
<span id="cb16-313"><a href="#cb16-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-314"><a href="#cb16-314" aria-hidden="true" tabindex="-1"></a><span class="fu">## Why Was The Data Collected? How Is The Data Used?</span></span>
<span id="cb16-315"><a href="#cb16-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-316"><a href="#cb16-316" aria-hidden="true" tabindex="-1"></a>The data collected here is part of an <span class="co">[</span><span class="ot">ongoing project</span><span class="co">](https://melaniewalsh.github.io/whats-seattle-reading/)</span> to reveal the dynamics of literary popularity through the SPL checkout data. Studying literary popularity is difficult; book sales data is proprietary and inaccessible to individuals outside of the publishing industry. While a powerful resource, the SPL checkout data, like all book data, struggles with persistent book identifiers. The same underlying work can often have different editions, author name variants, and metadata. It is difficult to cluster different versions of the same underlying work together at scale, but we have experimented previously with using a combination of semi-automated methods and manual oversight to cluster smaller sized corpuses of interest <span class="co">[</span><span class="ot">@Gupta_Maor_Harris_Backstrom_Dong_Walsh_2025</span><span class="co">]</span>. The Top 500 Novels Dataset is compelling because it presents a set of works that have persisted in popularity and relevance well past publication date. These are exceptionally popular titles that have avoided the fate of the majority of books, which often fall out of circulation soon after publishing <span class="co">[</span><span class="ot">@cohen_sentimental_2018</span><span class="co">] [@sorensen_bestseller_2007]</span>. Studying novels like these is useful to understand how popularity and reception is working for novels that are cultural touchstones. </span>
<span id="cb16-317"><a href="#cb16-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-318"><a href="#cb16-318" aria-hidden="true" tabindex="-1"></a><span class="fu">## How Was The Data Collected?</span></span>
<span id="cb16-319"><a href="#cb16-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-320"><a href="#cb16-320" aria-hidden="true" tabindex="-1"></a>To reconcile the SPL Checkout Data with the top 500 novel data, we employ a multi-step algorithm to capture all the records in the library data that may match one of the novels in our source list. </span>
<span id="cb16-321"><a href="#cb16-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-322"><a href="#cb16-322" aria-hidden="true" tabindex="-1"></a>We first, manipualte the title and author fields in the SPL data to normalize against common variants. For example, many titles have "(unabridged)" appended to them, and many authors have a last name, first name formatting (e.g Collins, Suzanne). Once we've simplified the SPL Checkout Data, to simplified versions of title and creator, we group by those fields to reduce our dataframe down to about 800,000 unique titles. </span>
<span id="cb16-323"><a href="#cb16-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-324"><a href="#cb16-324" aria-hidden="true" tabindex="-1"></a>We then run a two-stage algorithm to pair novels from the Top 500 list to checkout records. We iterate through all 500 of our novels and compare first the last name of the author to the creator field in the SPL, checking if the creator field contains the last name of the author somewhere in its text. We then use the <span class="co">[</span><span class="ot">Python RapidFuzz library</span><span class="co">](https://rapidfuzz.github.io/RapidFuzz/)</span> to run a fuzzy matching of thte top 500 title against the title field in the SPL data. We use the <span class="co">[</span><span class="ot">Partial Ratio</span><span class="co">](https://rapidfuzz.github.io/RapidFuzz/Usage/fuzz.html)</span> algorithm which identifies the optimal alignment of the shorter string in the longer string. We use a threshold of 85. </span>
<span id="cb16-325"><a href="#cb16-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-326"><a href="#cb16-326" aria-hidden="true" tabindex="-1"></a>For an example of how this algorithm is working, consider the novel Catching Fire by Suzanne Collins. A matching SPL record has the title as Catching Fire: (movie tie in edition), the Partial Ratio algorithm returns a perfect 100 match between this title and the true title, Catching Fire. Our algorithm is designed to have high recall, rather than precision. In other words, we would rather identify more matches that could be wrong, than miss matches that could be right. Our preference for recall over precision is because there are TONS of books in the dataset, once we have a list of matching records, we can manually look at matches to ensure accuracy. It is much more difficult to identify matches in the first place from over 800,000 unique titles! </span>
<span id="cb16-327"><a href="#cb16-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-328"><a href="#cb16-328" aria-hidden="true" tabindex="-1"></a>Importantly, the recall of our algorithm will not be perfect, and we will miss some editions that should be clustered in. For example, alternate language editions that lack the English title will often fail the Fuzzy Match. For example, Stendhal's The Red and the Black in French is titled Le Rouge et le Noir, which will not pass our fuzzy matching threshold (luckily we're only missing 11 checkouts from the French edition).  </span>
<span id="cb16-329"><a href="#cb16-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-330"><a href="#cb16-330" aria-hidden="true" tabindex="-1"></a>Our algorithm returns matches for every single novel on our list! But because of our high recall approach, we need to filter out mismatches. For example, Khaled Hosseini's A Thousands Splendid Suns got matched onto the record, And the Mountains Echoed by the Bestselling Author of the Kite Runner and a Thousand Splendid Suns. These types of cases require manual oversight to filter out. </span>
<span id="cb16-331"><a href="#cb16-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-332"><a href="#cb16-332" aria-hidden="true" tabindex="-1"></a>Our approach has a couple of systematic failures besides weird edge cases. Book series where only the first entry is in the list (Artemis Fowl, Diary of a Wimpy Kid, The Maze Runner etc.) often return all the matching entries from the series, because each future title references the original title. These were excluded manually. </span>
<span id="cb16-333"><a href="#cb16-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-334"><a href="#cb16-334" aria-hidden="true" tabindex="-1"></a>An interesting case we often see when matching library data to these popular novels is dealing with checked out titles that contain more than one text. Think the entire Lord of The Rings Trilogy in one large volume. We make the decision to map checkouts for the entire Lord of the Rings Trilogy to each of it's entries in the Top 500 List, meaning that one checkout is being counted three separate times in this new dataset. </span>
<span id="cb16-335"><a href="#cb16-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-336"><a href="#cb16-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-337"><a href="#cb16-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-338"><a href="#cb16-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-339"><a href="#cb16-339" aria-hidden="true" tabindex="-1"></a><span class="fu">## Uncertainty in the Data</span></span>
<span id="cb16-340"><a href="#cb16-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-341"><a href="#cb16-341" aria-hidden="true" tabindex="-1"></a>We do not claim our matching to be perfect. Besides alternate language editions, it is likely that other strange variants have been missed by our method. Additionally, the SPL Checkout Data is not a perfect proxy for book popularity. Library checkout data is affected by regional dynamics, library programming, and the nature of the library system <span class="co">[</span><span class="ot">@Gupta_Christensen_Walsh_2025, @Gupta_Maor_Harris_Backstrom_Dong_Walsh_2025</span><span class="co">]</span>. </span>
<span id="cb16-342"><a href="#cb16-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-343"><a href="#cb16-343" aria-hidden="true" tabindex="-1"></a>Library checkouts have risen over time, partly due to increased participation in the library system and the rise of digital books. As a result, library checkout data does not represent a stable configuration of patrons engaging in consistent checkout behavior. Users should not treat the longitudinal checkout data as homogeneously representing the same relationship to readership across the time series. </span>
<span id="cb16-344"><a href="#cb16-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-345"><a href="#cb16-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-346"><a href="#cb16-346" aria-hidden="true" tabindex="-1"></a><span class="fu">## What can we do with the data?</span></span>
<span id="cb16-347"><a href="#cb16-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-348"><a href="#cb16-348" aria-hidden="true" tabindex="-1"></a><span class="fu">### Authorial Death</span></span>
<span id="cb16-349"><a href="#cb16-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-350"><a href="#cb16-350" aria-hidden="true" tabindex="-1"></a>Thanks to the Top 500 Dataset Creators, we have tons of metadata variables we can play with to identify trends in our data. In our previous piece <span class="co">[</span><span class="ot">@Gupta_Maor_Harris_Backstrom_Dong_Walsh_2025</span><span class="co">]</span>, we present evidence that authorial death leads to a temporary boost in library checkouts for canonical authors. </span>
<span id="cb16-351"><a href="#cb16-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-352"><a href="#cb16-352" aria-hidden="true" tabindex="-1"></a>We verify that relationship by generating timeseries of authors who died in the time of our dataframe. </span>
<span id="cb16-353"><a href="#cb16-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-356"><a href="#cb16-356" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-357"><a href="#cb16-357" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb16-358"><a href="#cb16-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-359"><a href="#cb16-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-360"><a href="#cb16-360" aria-hidden="true" tabindex="-1"></a><span class="co"># Note on installation: https://statsandr.com/blog/an-efficient-way-to-install-and-load-r-packages/</span></span>
<span id="cb16-361"><a href="#cb16-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-362"><a href="#cb16-362" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("rmarkdown")</span></span>
<span id="cb16-363"><a href="#cb16-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-364"><a href="#cb16-364" aria-hidden="true" tabindex="-1"></a><span class="co"># too big</span></span>
<span id="cb16-365"><a href="#cb16-365" aria-hidden="true" tabindex="-1"></a><span class="co"># library(tidyverse)</span></span>
<span id="cb16-366"><a href="#cb16-366" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> date</span>
<span id="cb16-367"><a href="#cb16-367" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb16-368"><a href="#cb16-368" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb16-369"><a href="#cb16-369" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.dates <span class="im">as</span> mdates</span>
<span id="cb16-370"><a href="#cb16-370" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb16-371"><a href="#cb16-371" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb16-372"><a href="#cb16-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-373"><a href="#cb16-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-374"><a href="#cb16-374" aria-hidden="true" tabindex="-1"></a><span class="co"># Load Top 500 SPL Data</span></span>
<span id="cb16-375"><a href="#cb16-375" aria-hidden="true" tabindex="-1"></a>top_500_df <span class="op">=</span> pd.read_csv(<span class="st">"https://responsible-datasets-in-context.s3.us-west-2.amazonaws.com/top_500_spl_df.csv"</span>)</span>
<span id="cb16-376"><a href="#cb16-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-377"><a href="#cb16-377" aria-hidden="true" tabindex="-1"></a>dead_authors <span class="op">=</span> (</span>
<span id="cb16-378"><a href="#cb16-378" aria-hidden="true" tabindex="-1"></a>    top_500_df</span>
<span id="cb16-379"><a href="#cb16-379" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">'author'</span>, <span class="st">'checkoutyear'</span>, <span class="st">'checkoutmonth'</span>], as_index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb16-380"><a href="#cb16-380" aria-hidden="true" tabindex="-1"></a>    .agg({<span class="st">'checkouts'</span>: <span class="st">'sum'</span>, <span class="st">'author_death'</span>: <span class="st">'first'</span>})</span>
<span id="cb16-381"><a href="#cb16-381" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-382"><a href="#cb16-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-383"><a href="#cb16-383" aria-hidden="true" tabindex="-1"></a>dead_authors[<span class="st">'author_death'</span>] <span class="op">=</span> pd.to_numeric(</span>
<span id="cb16-384"><a href="#cb16-384" aria-hidden="true" tabindex="-1"></a>    dead_authors[<span class="st">'author_death'</span>], errors<span class="op">=</span><span class="st">'coerce'</span></span>
<span id="cb16-385"><a href="#cb16-385" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-386"><a href="#cb16-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-387"><a href="#cb16-387" aria-hidden="true" tabindex="-1"></a>dead_authors <span class="op">=</span> dead_authors[dead_authors[<span class="st">'author_death'</span>] <span class="op">&gt;</span> <span class="dv">2005</span>]</span>
<span id="cb16-388"><a href="#cb16-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-389"><a href="#cb16-389" aria-hidden="true" tabindex="-1"></a><span class="co"># author deaths are only by year in the dataframe, so we add specific month and days for our dead authors</span></span>
<span id="cb16-390"><a href="#cb16-390" aria-hidden="true" tabindex="-1"></a>author_death_dates <span class="op">=</span> {</span>
<span id="cb16-391"><a href="#cb16-391" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Aleksandr Isaevich Solzhenitsyn"</span>: date(<span class="dv">2008</span>, <span class="dv">8</span>, <span class="dv">3</span>),</span>
<span id="cb16-392"><a href="#cb16-392" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Betsy Cromer Byars"</span>: date(<span class="dv">2020</span>, <span class="dv">2</span>, <span class="dv">26</span>),</span>
<span id="cb16-393"><a href="#cb16-393" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Beverly Cleary"</span>: date(<span class="dv">2021</span>, <span class="dv">3</span>, <span class="dv">25</span>),</span>
<span id="cb16-394"><a href="#cb16-394" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Chinua Achebe"</span>: date(<span class="dv">2013</span>, <span class="dv">3</span>, <span class="dv">21</span>),</span>
<span id="cb16-395"><a href="#cb16-395" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Colleen McCullough"</span>: date(<span class="dv">2015</span>, <span class="dv">1</span>, <span class="dv">29</span>),</span>
<span id="cb16-396"><a href="#cb16-396" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Cormac McCarthy"</span>: date(<span class="dv">2023</span>, <span class="dv">6</span>, <span class="dv">13</span>),</span>
<span id="cb16-397"><a href="#cb16-397" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Daniel Keyes"</span>: date(<span class="dv">2014</span>, <span class="dv">6</span>, <span class="dv">15</span>),</span>
<span id="cb16-398"><a href="#cb16-398" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Donald J. Sobol"</span>: date(<span class="dv">2012</span>, <span class="dv">8</span>, <span class="dv">11</span>),</span>
<span id="cb16-399"><a href="#cb16-399" aria-hidden="true" tabindex="-1"></a>    <span class="st">"E.L. Konigsburg"</span>: date(<span class="dv">2013</span>, <span class="dv">4</span>, <span class="dv">19</span>),</span>
<span id="cb16-400"><a href="#cb16-400" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Gabriel García Márquez"</span>: date(<span class="dv">2014</span>, <span class="dv">4</span>, <span class="dv">17</span>),</span>
<span id="cb16-401"><a href="#cb16-401" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Gary Paulsen"</span>: date(<span class="dv">2021</span>, <span class="dv">10</span>, <span class="dv">13</span>),</span>
<span id="cb16-402"><a href="#cb16-402" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Harper Lee"</span>: date(<span class="dv">2016</span>, <span class="dv">2</span>, <span class="dv">19</span>),</span>
<span id="cb16-403"><a href="#cb16-403" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Herman Wouk"</span>: date(<span class="dv">2019</span>, <span class="dv">5</span>, <span class="dv">17</span>),</span>
<span id="cb16-404"><a href="#cb16-404" aria-hidden="true" tabindex="-1"></a>    <span class="st">"J.D. Salinger"</span>: date(<span class="dv">2010</span>, <span class="dv">1</span>, <span class="dv">27</span>),</span>
<span id="cb16-405"><a href="#cb16-405" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Jean Craighead George"</span>: date(<span class="dv">2012</span>, <span class="dv">5</span>, <span class="dv">15</span>),</span>
<span id="cb16-406"><a href="#cb16-406" aria-hidden="true" tabindex="-1"></a>    <span class="st">"John Le Carré"</span>: date(<span class="dv">2020</span>, <span class="dv">12</span>, <span class="dv">12</span>),</span>
<span id="cb16-407"><a href="#cb16-407" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Kurt Vonnegut"</span>: date(<span class="dv">2007</span>, <span class="dv">4</span>, <span class="dv">11</span>),</span>
<span id="cb16-408"><a href="#cb16-408" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Michael Crichton"</span>: date(<span class="dv">2008</span>, <span class="dv">11</span>, <span class="dv">4</span>),</span>
<span id="cb16-409"><a href="#cb16-409" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Natalie Babbitt"</span>: date(<span class="dv">2016</span>, <span class="dv">10</span>, <span class="dv">31</span>),</span>
<span id="cb16-410"><a href="#cb16-410" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Nicholas Evans"</span>: date(<span class="dv">2022</span>, <span class="dv">8</span>, <span class="dv">9</span>),</span>
<span id="cb16-411"><a href="#cb16-411" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Norman Mailer"</span>: date(<span class="dv">2007</span>, <span class="dv">11</span>, <span class="dv">10</span>),</span>
<span id="cb16-412"><a href="#cb16-412" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Norton Juster"</span>: date(<span class="dv">2021</span>, <span class="dv">3</span>, <span class="dv">8</span>),</span>
<span id="cb16-413"><a href="#cb16-413" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Patricia MacLachlan"</span>: date(<span class="dv">2022</span>, <span class="dv">3</span>, <span class="dv">31</span>),</span>
<span id="cb16-414"><a href="#cb16-414" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Paula Fox"</span>: date(<span class="dv">2017</span>, <span class="dv">3</span>, <span class="dv">1</span>),</span>
<span id="cb16-415"><a href="#cb16-415" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Ray Bradbury"</span>: date(<span class="dv">2012</span>, <span class="dv">6</span>, <span class="dv">5</span>),</span>
<span id="cb16-416"><a href="#cb16-416" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Richard Adams"</span>: date(<span class="dv">2016</span>, <span class="dv">12</span>, <span class="dv">24</span>),</span>
<span id="cb16-417"><a href="#cb16-417" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Robert James Waller"</span>: date(<span class="dv">2017</span>, <span class="dv">3</span>, <span class="dv">10</span>),</span>
<span id="cb16-418"><a href="#cb16-418" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sid Fleischman"</span>: date(<span class="dv">2010</span>, <span class="dv">3</span>, <span class="dv">17</span>),</span>
<span id="cb16-419"><a href="#cb16-419" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sue Grafton"</span>: date(<span class="dv">2017</span>, <span class="dv">12</span>, <span class="dv">28</span>),</span>
<span id="cb16-420"><a href="#cb16-420" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Toni Morrison"</span>: date(<span class="dv">2019</span>, <span class="dv">8</span>, <span class="dv">5</span>),</span>
<span id="cb16-421"><a href="#cb16-421" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Umberto Eco"</span>: date(<span class="dv">2016</span>, <span class="dv">2</span>, <span class="dv">19</span>),</span>
<span id="cb16-422"><a href="#cb16-422" aria-hidden="true" tabindex="-1"></a>    <span class="st">"William Styron"</span>: date(<span class="dv">2006</span>, <span class="dv">11</span>, <span class="dv">1</span>),</span>
<span id="cb16-423"><a href="#cb16-423" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-424"><a href="#cb16-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-425"><a href="#cb16-425" aria-hidden="true" tabindex="-1"></a>dead_authors[<span class="st">'author_death_date'</span>] <span class="op">=</span> dead_authors[<span class="st">'author'</span>].<span class="bu">map</span>(author_death_dates)</span>
<span id="cb16-426"><a href="#cb16-426" aria-hidden="true" tabindex="-1"></a>dead_authors[<span class="st">'author_death_ts'</span>] <span class="op">=</span> pd.to_datetime(dead_authors[<span class="st">'author_death_date'</span>])</span>
<span id="cb16-427"><a href="#cb16-427" aria-hidden="true" tabindex="-1"></a>sns.<span class="bu">set</span>(style<span class="op">=</span><span class="st">"whitegrid"</span>)</span>
<span id="cb16-428"><a href="#cb16-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-429"><a href="#cb16-429" aria-hidden="true" tabindex="-1"></a><span class="co"># Choose a fixed color palette for all plots</span></span>
<span id="cb16-430"><a href="#cb16-430" aria-hidden="true" tabindex="-1"></a>palette <span class="op">=</span> sns.color_palette(<span class="st">"tab10"</span>, n_colors<span class="op">=</span><span class="dv">10</span>)  <span class="co"># 10 distinct colors, cycle if &gt;10 authors</span></span>
<span id="cb16-431"><a href="#cb16-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-432"><a href="#cb16-432" aria-hidden="true" tabindex="-1"></a><span class="co"># build checkout datetime</span></span>
<span id="cb16-433"><a href="#cb16-433" aria-hidden="true" tabindex="-1"></a>dead_authors[<span class="st">'date'</span>] <span class="op">=</span> pd.to_datetime(</span>
<span id="cb16-434"><a href="#cb16-434" aria-hidden="true" tabindex="-1"></a>    <span class="bu">dict</span>(</span>
<span id="cb16-435"><a href="#cb16-435" aria-hidden="true" tabindex="-1"></a>        year<span class="op">=</span>dead_authors[<span class="st">'checkoutyear'</span>],</span>
<span id="cb16-436"><a href="#cb16-436" aria-hidden="true" tabindex="-1"></a>        month<span class="op">=</span>dead_authors[<span class="st">'checkoutmonth'</span>],</span>
<span id="cb16-437"><a href="#cb16-437" aria-hidden="true" tabindex="-1"></a>        day<span class="op">=</span><span class="dv">1</span></span>
<span id="cb16-438"><a href="#cb16-438" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-439"><a href="#cb16-439" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-440"><a href="#cb16-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-441"><a href="#cb16-441" aria-hidden="true" tabindex="-1"></a><span class="co"># ensure death timestamp exists and is datetime</span></span>
<span id="cb16-442"><a href="#cb16-442" aria-hidden="true" tabindex="-1"></a>dead_authors[<span class="st">'author_death_ts'</span>] <span class="op">=</span> pd.to_datetime(</span>
<span id="cb16-443"><a href="#cb16-443" aria-hidden="true" tabindex="-1"></a>    dead_authors[<span class="st">'author_death_date'</span>], <span class="bu">format</span><span class="op">=</span><span class="st">"%Y"</span>, errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb16-444"><a href="#cb16-444" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-445"><a href="#cb16-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-446"><a href="#cb16-446" aria-hidden="true" tabindex="-1"></a><span class="co"># Map each author to a fixed color</span></span>
<span id="cb16-447"><a href="#cb16-447" aria-hidden="true" tabindex="-1"></a>author_list <span class="op">=</span> <span class="bu">sorted</span>(dead_authors[<span class="st">'author'</span>].unique())</span>
<span id="cb16-448"><a href="#cb16-448" aria-hidden="true" tabindex="-1"></a>author_color_map <span class="op">=</span> {author: palette[i <span class="op">%</span> <span class="bu">len</span>(palette)] <span class="cf">for</span> i, author <span class="kw">in</span> <span class="bu">enumerate</span>(author_list)}</span>
<span id="cb16-449"><a href="#cb16-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-450"><a href="#cb16-450" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> author, df_a <span class="kw">in</span> dead_authors.groupby(<span class="st">'author'</span>):</span>
<span id="cb16-451"><a href="#cb16-451" aria-hidden="true" tabindex="-1"></a>    death_date <span class="op">=</span> df_a[<span class="st">'author_death_ts'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb16-452"><a href="#cb16-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-453"><a href="#cb16-453" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> pd.isna(death_date):</span>
<span id="cb16-454"><a href="#cb16-454" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Skipping </span><span class="sc">{</span>author<span class="sc">}</span><span class="ss">: no valid death date"</span>)</span>
<span id="cb16-455"><a href="#cb16-455" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb16-456"><a href="#cb16-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-457"><a href="#cb16-457" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">5</span>))</span>
<span id="cb16-458"><a href="#cb16-458" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-459"><a href="#cb16-459" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Use standardized color for this author</span></span>
<span id="cb16-460"><a href="#cb16-460" aria-hidden="true" tabindex="-1"></a>    color <span class="op">=</span> author_color_map[author]</span>
<span id="cb16-461"><a href="#cb16-461" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-462"><a href="#cb16-462" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Smooth line without markers</span></span>
<span id="cb16-463"><a href="#cb16-463" aria-hidden="true" tabindex="-1"></a>    plt.plot(df_a[<span class="st">'date'</span>], df_a[<span class="st">'checkouts'</span>], color<span class="op">=</span>color, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, label<span class="op">=</span><span class="st">'Checkouts'</span>)</span>
<span id="cb16-464"><a href="#cb16-464" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-465"><a href="#cb16-465" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Vertical line for death</span></span>
<span id="cb16-466"><a href="#cb16-466" aria-hidden="true" tabindex="-1"></a>    plt.axvline(death_date, color<span class="op">=</span><span class="st">'red'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, alpha<span class="op">=</span><span class="fl">0.7</span>, label<span class="op">=</span><span class="st">'Death Year'</span>)</span>
<span id="cb16-467"><a href="#cb16-467" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-468"><a href="#cb16-468" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Annotate death year</span></span>
<span id="cb16-469"><a href="#cb16-469" aria-hidden="true" tabindex="-1"></a>    plt.text(death_date, df_a[<span class="st">'checkouts'</span>].<span class="bu">max</span>()<span class="op">*</span><span class="fl">0.95</span>, <span class="ss">f"Death (</span><span class="sc">{</span>death_date<span class="sc">.</span>year<span class="sc">}</span><span class="ss">)"</span>,</span>
<span id="cb16-470"><a href="#cb16-470" aria-hidden="true" tabindex="-1"></a>             rotation<span class="op">=</span><span class="dv">90</span>, color<span class="op">=</span><span class="st">'red'</span>, va<span class="op">=</span><span class="st">'top'</span>, ha<span class="op">=</span><span class="st">'right'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb16-471"><a href="#cb16-471" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-472"><a href="#cb16-472" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Formatting</span></span>
<span id="cb16-473"><a href="#cb16-473" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f"</span><span class="sc">{</span>author<span class="sc">}</span><span class="ss"> — Monthly Checkouts"</span>, fontsize<span class="op">=</span><span class="dv">14</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb16-474"><a href="#cb16-474" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(<span class="st">"Year"</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb16-475"><a href="#cb16-475" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">"Checkouts"</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb16-476"><a href="#cb16-476" aria-hidden="true" tabindex="-1"></a>    plt.legend()</span>
<span id="cb16-477"><a href="#cb16-477" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-478"><a href="#cb16-478" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Better x-axis formatting</span></span>
<span id="cb16-479"><a href="#cb16-479" aria-hidden="true" tabindex="-1"></a>    plt.gca().xaxis.set_major_locator(mdates.YearLocator(<span class="dv">2</span>))</span>
<span id="cb16-480"><a href="#cb16-480" aria-hidden="true" tabindex="-1"></a>    plt.gca().xaxis.set_major_formatter(mdates.DateFormatter(<span class="st">'%Y'</span>))</span>
<span id="cb16-481"><a href="#cb16-481" aria-hidden="true" tabindex="-1"></a>    plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb16-482"><a href="#cb16-482" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-483"><a href="#cb16-483" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb16-484"><a href="#cb16-484" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb16-485"><a href="#cb16-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-486"><a href="#cb16-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-487"><a href="#cb16-487" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-488"><a href="#cb16-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-489"><a href="#cb16-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-490"><a href="#cb16-490" aria-hidden="true" tabindex="-1"></a>Almost across the board, we notice that checkouts of an author lines up with their death. Exceptions tend to be authors who have incredibly low checkout density. </span>
<span id="cb16-491"><a href="#cb16-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-492"><a href="#cb16-492" aria-hidden="true" tabindex="-1"></a><span class="fu">### Backlist Titles</span></span>
<span id="cb16-493"><a href="#cb16-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-494"><a href="#cb16-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-495"><a href="#cb16-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-496"><a href="#cb16-496" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">@berglund_is_2021</span><span class="co">]</span> presents evidence from Scandinavian fiction that an author's new releases boosts interest in their previous titles. Books by the same author effect each other's success. The top 500 list has 89 different authors that have multiple releases. One question we might ask is whether works by the same author tend to have similar dynamics of interest. </span>
<span id="cb16-497"><a href="#cb16-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-498"><a href="#cb16-498" aria-hidden="true" tabindex="-1"></a>We can test this by looking at the Pearson correlation coefficients between books by the same author. </span>
<span id="cb16-499"><a href="#cb16-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-500"><a href="#cb16-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-501"><a href="#cb16-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-502"><a href="#cb16-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-503"><a href="#cb16-503" aria-hidden="true" tabindex="-1"></a>We grabbed the mean correlations between each author's books, and got a value of 0.42. In other words, on average, 42% of a book's variance in the checkout data can be explained by a different book by the same author. </span>
<span id="cb16-504"><a href="#cb16-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-507"><a href="#cb16-507" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-508"><a href="#cb16-508" aria-hidden="true" tabindex="-1"></a><span class="co"># grabbing the subset of the df with authors that show up multiple times</span></span>
<span id="cb16-509"><a href="#cb16-509" aria-hidden="true" tabindex="-1"></a>top_500_novels <span class="op">=</span> pd.read_csv(<span class="st">"../../../datasets/top-500-novels/final_merged_dataset_no_full_text.tsv"</span>, sep<span class="op">=</span><span class="st">'</span><span class="ch">\t</span><span class="st">'</span>, header<span class="op">=</span><span class="dv">0</span>, low_memory<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb16-510"><a href="#cb16-510" aria-hidden="true" tabindex="-1"></a>top_500_novels.groupby(<span class="st">'author'</span>).count()</span>
<span id="cb16-511"><a href="#cb16-511" aria-hidden="true" tabindex="-1"></a>author_counts <span class="op">=</span> top_500_novels[<span class="st">'author'</span>].value_counts()</span>
<span id="cb16-512"><a href="#cb16-512" aria-hidden="true" tabindex="-1"></a>multi_book_authors <span class="op">=</span> author_counts[author_counts <span class="op">&gt;</span> <span class="dv">1</span>].index.tolist()</span>
<span id="cb16-513"><a href="#cb16-513" aria-hidden="true" tabindex="-1"></a>multi_book_authors</span>
<span id="cb16-514"><a href="#cb16-514" aria-hidden="true" tabindex="-1"></a>multi_book_df <span class="op">=</span> top_500_df[top_500_df[<span class="st">'author'</span>].isin(multi_book_authors)]</span>
<span id="cb16-515"><a href="#cb16-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-516"><a href="#cb16-516" aria-hidden="true" tabindex="-1"></a><span class="co"># to do correlations, need to fill in missing values with 0s</span></span>
<span id="cb16-517"><a href="#cb16-517" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fill_after_first_value(series):</span>
<span id="cb16-518"><a href="#cb16-518" aria-hidden="true" tabindex="-1"></a>    filled <span class="op">=</span> series.copy()</span>
<span id="cb16-519"><a href="#cb16-519" aria-hidden="true" tabindex="-1"></a>    has_seen_value <span class="op">=</span> <span class="va">False</span></span>
<span id="cb16-520"><a href="#cb16-520" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(series)):</span>
<span id="cb16-521"><a href="#cb16-521" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> pd.isna(series.iloc[i]):</span>
<span id="cb16-522"><a href="#cb16-522" aria-hidden="true" tabindex="-1"></a>            has_seen_value <span class="op">=</span> <span class="va">True</span></span>
<span id="cb16-523"><a href="#cb16-523" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> has_seen_value:</span>
<span id="cb16-524"><a href="#cb16-524" aria-hidden="true" tabindex="-1"></a>            filled.iloc[i] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb16-525"><a href="#cb16-525" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> filled</span>
<span id="cb16-526"><a href="#cb16-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-527"><a href="#cb16-527" aria-hidden="true" tabindex="-1"></a>author_pivot <span class="op">=</span> multi_book_df.pivot_table(</span>
<span id="cb16-528"><a href="#cb16-528" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span><span class="st">'year-month'</span>,</span>
<span id="cb16-529"><a href="#cb16-529" aria-hidden="true" tabindex="-1"></a>    columns<span class="op">=</span><span class="st">'top_500_title'</span>,</span>
<span id="cb16-530"><a href="#cb16-530" aria-hidden="true" tabindex="-1"></a>    values<span class="op">=</span><span class="st">'checkouts'</span>,</span>
<span id="cb16-531"><a href="#cb16-531" aria-hidden="true" tabindex="-1"></a>    aggfunc<span class="op">=</span><span class="st">'sum'</span></span>
<span id="cb16-532"><a href="#cb16-532" aria-hidden="true" tabindex="-1"></a>).fillna(<span class="dv">0</span>)</span>
<span id="cb16-533"><a href="#cb16-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-534"><a href="#cb16-534" aria-hidden="true" tabindex="-1"></a>author_pivot <span class="op">=</span> author_pivot.<span class="bu">apply</span>(fill_after_first_value)</span>
<span id="cb16-535"><a href="#cb16-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-536"><a href="#cb16-536" aria-hidden="true" tabindex="-1"></a>all_correlations <span class="op">=</span> []</span>
<span id="cb16-537"><a href="#cb16-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-538"><a href="#cb16-538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-539"><a href="#cb16-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-540"><a href="#cb16-540" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> author, df_a <span class="kw">in</span> multi_book_df.groupby(<span class="st">'author'</span>):</span>
<span id="cb16-541"><a href="#cb16-541" aria-hidden="true" tabindex="-1"></a>    titles <span class="op">=</span> df_a[<span class="st">'top_500_title'</span>].unique()</span>
<span id="cb16-542"><a href="#cb16-542" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(titles) <span class="op">&lt;</span> <span class="dv">2</span>:</span>
<span id="cb16-543"><a href="#cb16-543" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span>  <span class="co"># Need at least two books to compare</span></span>
<span id="cb16-544"><a href="#cb16-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-545"><a href="#cb16-545" aria-hidden="true" tabindex="-1"></a>    author_data <span class="op">=</span> author_pivot[titles]</span>
<span id="cb16-546"><a href="#cb16-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-547"><a href="#cb16-547" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate correlation matrix</span></span>
<span id="cb16-548"><a href="#cb16-548" aria-hidden="true" tabindex="-1"></a>    corr_matrix <span class="op">=</span> author_data.corr()</span>
<span id="cb16-549"><a href="#cb16-549" aria-hidden="true" tabindex="-1"></a>    all_correlations.append((author, corr_matrix))</span>
<span id="cb16-550"><a href="#cb16-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-551"><a href="#cb16-551" aria-hidden="true" tabindex="-1"></a>mean_correlations <span class="op">=</span> {}</span>
<span id="cb16-552"><a href="#cb16-552" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> author, corr_matrix <span class="kw">in</span> all_correlations:</span>
<span id="cb16-553"><a href="#cb16-553" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Exclude diagonal by masking it</span></span>
<span id="cb16-554"><a href="#cb16-554" aria-hidden="true" tabindex="-1"></a>    mask <span class="op">=</span> np.triu(np.ones(corr_matrix.shape), k<span class="op">=</span><span class="dv">1</span>).astype(<span class="bu">bool</span>)</span>
<span id="cb16-555"><a href="#cb16-555" aria-hidden="true" tabindex="-1"></a>    mean_corr <span class="op">=</span> corr_matrix.where(mask).stack().mean()</span>
<span id="cb16-556"><a href="#cb16-556" aria-hidden="true" tabindex="-1"></a>    mean_correlations[author] <span class="op">=</span> mean_corr</span>
<span id="cb16-557"><a href="#cb16-557" aria-hidden="true" tabindex="-1"></a>mean_correlations</span>
<span id="cb16-558"><a href="#cb16-558" aria-hidden="true" tabindex="-1"></a>mean_of_means <span class="op">=</span> np.mean(<span class="bu">list</span>(mean_correlations.values()))</span>
<span id="cb16-559"><a href="#cb16-559" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mean_of_means)</span>
<span id="cb16-560"><a href="#cb16-560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-561"><a href="#cb16-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-562"><a href="#cb16-562" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-563"><a href="#cb16-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-564"><a href="#cb16-564" aria-hidden="true" tabindex="-1"></a>It's hard to interpret that number without context. If we look at just the correlations on average between every book in the top 500 corpus, we only observe a coefficient of 0.16. So books by the same author are almost 3x more correlated than what we would expect on average.</span>
<span id="cb16-565"><a href="#cb16-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-568"><a href="#cb16-568" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-569"><a href="#cb16-569" aria-hidden="true" tabindex="-1"></a>wide_df <span class="op">=</span> top_500_df.pivot_table(</span>
<span id="cb16-570"><a href="#cb16-570" aria-hidden="true" tabindex="-1"></a>    values<span class="op">=</span><span class="st">"checkouts"</span>,</span>
<span id="cb16-571"><a href="#cb16-571" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span><span class="st">"year-month"</span>,</span>
<span id="cb16-572"><a href="#cb16-572" aria-hidden="true" tabindex="-1"></a>    columns<span class="op">=</span>[<span class="st">"top_500_title"</span>],</span>
<span id="cb16-573"><a href="#cb16-573" aria-hidden="true" tabindex="-1"></a>    aggfunc<span class="op">=</span><span class="st">"sum"</span>,  <span class="co"># Sum in case of duplicates</span></span>
<span id="cb16-574"><a href="#cb16-574" aria-hidden="true" tabindex="-1"></a>    fill_value<span class="op">=</span>np.nan,   <span class="co"># Fill missing values with 0</span></span>
<span id="cb16-575"><a href="#cb16-575" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-576"><a href="#cb16-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-577"><a href="#cb16-577" aria-hidden="true" tabindex="-1"></a>wide_df <span class="op">=</span> wide_df.<span class="bu">apply</span>(fill_after_first_value)</span>
<span id="cb16-578"><a href="#cb16-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-579"><a href="#cb16-579" aria-hidden="true" tabindex="-1"></a>correlation_matrix <span class="op">=</span> wide_df.corr()</span>
<span id="cb16-580"><a href="#cb16-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-581"><a href="#cb16-581" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> np.triu(np.ones(correlation_matrix.shape), k<span class="op">=</span><span class="dv">1</span>).astype(<span class="bu">bool</span>)</span>
<span id="cb16-582"><a href="#cb16-582" aria-hidden="true" tabindex="-1"></a>mean_correlation <span class="op">=</span> correlation_matrix.where(mask).stack().mean()</span>
<span id="cb16-583"><a href="#cb16-583" aria-hidden="true" tabindex="-1"></a>mean_correlation</span>
<span id="cb16-584"><a href="#cb16-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-585"><a href="#cb16-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-586"><a href="#cb16-586" aria-hidden="true" tabindex="-1"></a>mean_correlation <span class="op">=</span> correlation_matrix.where(mask).stack().mean()</span>
<span id="cb16-587"><a href="#cb16-587" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mean_correlation)</span>
<span id="cb16-588"><a href="#cb16-588" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-589"><a href="#cb16-589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-590"><a href="#cb16-590" aria-hidden="true" tabindex="-1"></a>Let's look at a few specific examples. A lot of books by the same author belong to book series. For example, all of J.K. Rowling's Harry Potter books are in the top 500 corpus, so we can generate a correlation heatmap for her books.</span>
<span id="cb16-591"><a href="#cb16-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-594"><a href="#cb16-594" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-595"><a href="#cb16-595" aria-hidden="true" tabindex="-1"></a>jk_corr <span class="op">=</span> <span class="bu">next</span>((corr <span class="cf">for</span> author, corr <span class="kw">in</span> all_correlations <span class="cf">if</span> author <span class="op">==</span> <span class="st">'J.K. Rowling'</span>), <span class="va">None</span>)</span>
<span id="cb16-596"><a href="#cb16-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-597"><a href="#cb16-597" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> jk_corr <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb16-598"><a href="#cb16-598" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Focus on main Harry Potter series</span></span>
<span id="cb16-599"><a href="#cb16-599" aria-hidden="true" tabindex="-1"></a>    hp_order <span class="op">=</span> [</span>
<span id="cb16-600"><a href="#cb16-600" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Sorcerer's Stone"</span>,</span>
<span id="cb16-601"><a href="#cb16-601" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Chamber of Secrets"</span>,</span>
<span id="cb16-602"><a href="#cb16-602" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Prisoner of Azkaban"</span>,</span>
<span id="cb16-603"><a href="#cb16-603" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Goblet of Fire"</span>,</span>
<span id="cb16-604"><a href="#cb16-604" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Order of the Phoenix"</span>,</span>
<span id="cb16-605"><a href="#cb16-605" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Half-Blood Prince"</span>,</span>
<span id="cb16-606"><a href="#cb16-606" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Deathly Hallows"</span></span>
<span id="cb16-607"><a href="#cb16-607" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb16-608"><a href="#cb16-608" aria-hidden="true" tabindex="-1"></a>    jk_corr_hp <span class="op">=</span> jk_corr.reindex(index<span class="op">=</span>hp_order, columns<span class="op">=</span>hp_order)</span>
<span id="cb16-609"><a href="#cb16-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-610"><a href="#cb16-610" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot heatmap</span></span>
<span id="cb16-611"><a href="#cb16-611" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb16-612"><a href="#cb16-612" aria-hidden="true" tabindex="-1"></a>    sns.heatmap(jk_corr_hp, annot<span class="op">=</span><span class="va">True</span>, fmt<span class="op">=</span><span class="st">".2f"</span>, cmap<span class="op">=</span><span class="st">'coolwarm'</span>, cbar_kws<span class="op">=</span>{<span class="st">"shrink"</span>: <span class="fl">0.8</span>})</span>
<span id="cb16-613"><a href="#cb16-613" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="st">"Correlation Matrix of J.K. Rowling's Harry Potter Books Checkouts"</span>)</span>
<span id="cb16-614"><a href="#cb16-614" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb16-615"><a href="#cb16-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-616"><a href="#cb16-616" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-617"><a href="#cb16-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-618"><a href="#cb16-618" aria-hidden="true" tabindex="-1"></a>The heatmap is really striking, the middle four books of the series are highly correlated with each other, while the first book and the final two seem to have their own dynamics.  </span>
<span id="cb16-619"><a href="#cb16-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-620"><a href="#cb16-620" aria-hidden="true" tabindex="-1"></a>Let's look at some timeseries to figure out what's going on with the edge books! </span>
<span id="cb16-621"><a href="#cb16-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-622"><a href="#cb16-622" aria-hidden="true" tabindex="-1"></a>First, the Prisoner of Azkaban vs. the Chamber of Secrets</span>
<span id="cb16-623"><a href="#cb16-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-624"><a href="#cb16-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-627"><a href="#cb16-627" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-628"><a href="#cb16-628" aria-hidden="true" tabindex="-1"></a>wide_df[[<span class="st">"Harry Potter and the Sorcerer's Stone"</span>, <span class="st">"Harry Potter and the Chamber of Secrets"</span>]].plot()</span>
<span id="cb16-629"><a href="#cb16-629" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-630"><a href="#cb16-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-631"><a href="#cb16-631" aria-hidden="true" tabindex="-1"></a>These have a correlation coefficient of 0.97 and that lines up with what we're seeing in the timeseries. </span>
<span id="cb16-632"><a href="#cb16-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-633"><a href="#cb16-633" aria-hidden="true" tabindex="-1"></a>How about if we compare the Prisoner of Azkaban to the Sorceror's Stone?</span>
<span id="cb16-634"><a href="#cb16-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-637"><a href="#cb16-637" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-638"><a href="#cb16-638" aria-hidden="true" tabindex="-1"></a>wide_df[[<span class="st">"Harry Potter and the Sorcerer's Stone"</span>, <span class="st">"Harry Potter and the Prisoner of Azkaban"</span>]].plot()</span>
<span id="cb16-639"><a href="#cb16-639" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-640"><a href="#cb16-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-641"><a href="#cb16-641" aria-hidden="true" tabindex="-1"></a>They actually track really well together for most of the timeframe, but we see a huge spike for the Sorceror's Stone in 2020, which is going to really confound the correlation coefficient. </span>
<span id="cb16-642"><a href="#cb16-642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-643"><a href="#cb16-643" aria-hidden="true" tabindex="-1"></a>How about the Deathly Hallows and the Half-Blood Prince? </span>
<span id="cb16-644"><a href="#cb16-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-647"><a href="#cb16-647" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-648"><a href="#cb16-648" aria-hidden="true" tabindex="-1"></a>wide_df[[<span class="st">"Harry Potter and the Deathly Hallows"</span>, <span class="st">"Harry Potter and the Half-Blood Prince"</span>]].plot()</span>
<span id="cb16-649"><a href="#cb16-649" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-650"><a href="#cb16-650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-651"><a href="#cb16-651" aria-hidden="true" tabindex="-1"></a>These have a more obvious explanation. Both these books actually are released in the SPL timeframe, and have large numbers of checkouts following their release at the start of their timeseries. This follows what we know about how books function commercially, where a large share of their sales is immediately around their release <span class="co">[</span><span class="ot">@sorensen_bestseller_2007</span><span class="co">]</span>. Outside of their release date behavior, we see that these books still tend to follow the same dynamics. In fact, if we trim out the first few years of our timeframe and only look at our data after 2007, the correlation coefficients go straight back up! </span>
<span id="cb16-652"><a href="#cb16-652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-655"><a href="#cb16-655" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-656"><a href="#cb16-656" aria-hidden="true" tabindex="-1"></a>multi_book_df_post_2009 <span class="op">=</span> multi_book_df[multi_book_df[<span class="st">'checkoutyear'</span>] <span class="op">&gt;=</span> <span class="dv">2009</span>]</span>
<span id="cb16-657"><a href="#cb16-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-658"><a href="#cb16-658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-659"><a href="#cb16-659" aria-hidden="true" tabindex="-1"></a>author_pivot_post_2009 <span class="op">=</span> multi_book_df_post_2009.pivot_table(</span>
<span id="cb16-660"><a href="#cb16-660" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span><span class="st">'year-month'</span>,</span>
<span id="cb16-661"><a href="#cb16-661" aria-hidden="true" tabindex="-1"></a>    columns<span class="op">=</span><span class="st">'top_500_title'</span>,</span>
<span id="cb16-662"><a href="#cb16-662" aria-hidden="true" tabindex="-1"></a>    values<span class="op">=</span><span class="st">'checkouts'</span>,</span>
<span id="cb16-663"><a href="#cb16-663" aria-hidden="true" tabindex="-1"></a>    aggfunc<span class="op">=</span><span class="st">'sum'</span></span>
<span id="cb16-664"><a href="#cb16-664" aria-hidden="true" tabindex="-1"></a>).fillna(<span class="dv">0</span>)</span>
<span id="cb16-665"><a href="#cb16-665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-666"><a href="#cb16-666" aria-hidden="true" tabindex="-1"></a>author_pivot_post_2009 <span class="op">=</span> author_pivot_post_2009.<span class="bu">apply</span>(fill_after_first_value)</span>
<span id="cb16-667"><a href="#cb16-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-668"><a href="#cb16-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-669"><a href="#cb16-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-670"><a href="#cb16-670" aria-hidden="true" tabindex="-1"></a>all_correlations_post_2009 <span class="op">=</span> []</span>
<span id="cb16-671"><a href="#cb16-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-672"><a href="#cb16-672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-673"><a href="#cb16-673" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> author, df_a <span class="kw">in</span> multi_book_df_post_2009.groupby(<span class="st">'author'</span>):</span>
<span id="cb16-674"><a href="#cb16-674" aria-hidden="true" tabindex="-1"></a>    titles <span class="op">=</span> df_a[<span class="st">'top_500_title'</span>].unique()</span>
<span id="cb16-675"><a href="#cb16-675" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(titles) <span class="op">&lt;</span> <span class="dv">2</span>:</span>
<span id="cb16-676"><a href="#cb16-676" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span>  <span class="co"># Need at least two books to compare</span></span>
<span id="cb16-677"><a href="#cb16-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-678"><a href="#cb16-678" aria-hidden="true" tabindex="-1"></a>    author_data <span class="op">=</span> author_pivot_post_2009[titles]</span>
<span id="cb16-679"><a href="#cb16-679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-680"><a href="#cb16-680" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate correlation matrix</span></span>
<span id="cb16-681"><a href="#cb16-681" aria-hidden="true" tabindex="-1"></a>    corr_matrix <span class="op">=</span> author_data.corr()</span>
<span id="cb16-682"><a href="#cb16-682" aria-hidden="true" tabindex="-1"></a>    all_correlations_post_2009.append((author, corr_matrix))</span>
<span id="cb16-683"><a href="#cb16-683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-684"><a href="#cb16-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-685"><a href="#cb16-685" aria-hidden="true" tabindex="-1"></a>jk_corr_post_2009 <span class="op">=</span> <span class="bu">next</span>((corr <span class="cf">for</span> author, corr <span class="kw">in</span> all_correlations_post_2009 <span class="cf">if</span> author <span class="op">==</span> <span class="st">'J.K. Rowling'</span>), <span class="va">None</span>)</span>
<span id="cb16-686"><a href="#cb16-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-687"><a href="#cb16-687" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> jk_corr_post_2009 <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb16-688"><a href="#cb16-688" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Focus on main Harry Potter series</span></span>
<span id="cb16-689"><a href="#cb16-689" aria-hidden="true" tabindex="-1"></a>    hp_order <span class="op">=</span> [</span>
<span id="cb16-690"><a href="#cb16-690" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Sorcerer's Stone"</span>,</span>
<span id="cb16-691"><a href="#cb16-691" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Chamber of Secrets"</span>,</span>
<span id="cb16-692"><a href="#cb16-692" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Prisoner of Azkaban"</span>,</span>
<span id="cb16-693"><a href="#cb16-693" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Goblet of Fire"</span>,</span>
<span id="cb16-694"><a href="#cb16-694" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Order of the Phoenix"</span>,</span>
<span id="cb16-695"><a href="#cb16-695" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Half-Blood Prince"</span>,</span>
<span id="cb16-696"><a href="#cb16-696" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Harry Potter and the Deathly Hallows"</span></span>
<span id="cb16-697"><a href="#cb16-697" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb16-698"><a href="#cb16-698" aria-hidden="true" tabindex="-1"></a>    jk_corr_hp_post_2009 <span class="op">=</span> jk_corr_post_2009.reindex(index<span class="op">=</span>hp_order, columns<span class="op">=</span>hp_order)</span>
<span id="cb16-699"><a href="#cb16-699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-700"><a href="#cb16-700" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot heatmap</span></span>
<span id="cb16-701"><a href="#cb16-701" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb16-702"><a href="#cb16-702" aria-hidden="true" tabindex="-1"></a>    sns.heatmap(jk_corr_hp_post_2009, annot<span class="op">=</span><span class="va">True</span>, fmt<span class="op">=</span><span class="st">".2f"</span>, cmap<span class="op">=</span><span class="st">'coolwarm'</span>, cbar_kws<span class="op">=</span>{<span class="st">"shrink"</span>: <span class="fl">0.8</span>})</span>
<span id="cb16-703"><a href="#cb16-703" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="st">"Correlation Matrix of J.K. Rowling's Harry Potter Books Checkouts"</span>)</span>
<span id="cb16-704"><a href="#cb16-704" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb16-705"><a href="#cb16-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-706"><a href="#cb16-706" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-707"><a href="#cb16-707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-708"><a href="#cb16-708" aria-hidden="true" tabindex="-1"></a>The high correlation between the books in the series suggest that these books are likely complementary goods, the appeal for one of these books increases with the appeal for the other. Of course this makes sense, readers who finish The Prisoner of Azkaban are likely to move straight onto the Goblet of Fire in quick succession, and the value of any one of these books to a consumer is intrinsically tied to the value of the other books in the series, and the series as a whole. </span>
<span id="cb16-709"><a href="#cb16-709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-710"><a href="#cb16-710" aria-hidden="true" tabindex="-1"></a><span class="fu">### Genres</span></span>
<span id="cb16-711"><a href="#cb16-711" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-712"><a href="#cb16-712" aria-hidden="true" tabindex="-1"></a>Another affordance of the Top 500 Dataset list is its genre table. Although only about half of the entries are filled out, the genre metadata allows us to compare books within the same genre to see if there are any relationships between their receptions. </span>
<span id="cb16-713"><a href="#cb16-713" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-714"><a href="#cb16-714" aria-hidden="true" tabindex="-1"></a>We can conduct the same correlation test as we did with authors to inspect which genres are the most internally correlated. </span>
<span id="cb16-715"><a href="#cb16-715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-718"><a href="#cb16-718" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-719"><a href="#cb16-719" aria-hidden="true" tabindex="-1"></a>genre_correlations <span class="op">=</span> {}</span>
<span id="cb16-720"><a href="#cb16-720" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> genre, df_g <span class="kw">in</span> top_500_df.groupby(<span class="st">'genre'</span>):</span>
<span id="cb16-721"><a href="#cb16-721" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> genre <span class="op">==</span> <span class="st">'na'</span>:</span>
<span id="cb16-722"><a href="#cb16-722" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb16-723"><a href="#cb16-723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-724"><a href="#cb16-724" aria-hidden="true" tabindex="-1"></a>    genre_pivot <span class="op">=</span> df_g.pivot_table(</span>
<span id="cb16-725"><a href="#cb16-725" aria-hidden="true" tabindex="-1"></a>        index<span class="op">=</span><span class="st">'year-month'</span>,</span>
<span id="cb16-726"><a href="#cb16-726" aria-hidden="true" tabindex="-1"></a>        columns<span class="op">=</span><span class="st">'top_500_title'</span>,</span>
<span id="cb16-727"><a href="#cb16-727" aria-hidden="true" tabindex="-1"></a>        values<span class="op">=</span><span class="st">'checkouts'</span>,</span>
<span id="cb16-728"><a href="#cb16-728" aria-hidden="true" tabindex="-1"></a>        aggfunc<span class="op">=</span><span class="st">'sum'</span></span>
<span id="cb16-729"><a href="#cb16-729" aria-hidden="true" tabindex="-1"></a>    ).fillna(<span class="dv">0</span>)</span>
<span id="cb16-730"><a href="#cb16-730" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-731"><a href="#cb16-731" aria-hidden="true" tabindex="-1"></a>    genre_pivot <span class="op">=</span> genre_pivot.<span class="bu">apply</span>(fill_after_first_value)</span>
<span id="cb16-732"><a href="#cb16-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-733"><a href="#cb16-733" aria-hidden="true" tabindex="-1"></a>    corr_matrix <span class="op">=</span> genre_pivot.corr()</span>
<span id="cb16-734"><a href="#cb16-734" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-735"><a href="#cb16-735" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Exclude diagonal by masking it</span></span>
<span id="cb16-736"><a href="#cb16-736" aria-hidden="true" tabindex="-1"></a>    mask <span class="op">=</span> np.triu(np.ones(corr_matrix.shape), k<span class="op">=</span><span class="dv">1</span>).astype(<span class="bu">bool</span>)</span>
<span id="cb16-737"><a href="#cb16-737" aria-hidden="true" tabindex="-1"></a>    mean_corr <span class="op">=</span> corr_matrix.where(mask).stack().mean()</span>
<span id="cb16-738"><a href="#cb16-738" aria-hidden="true" tabindex="-1"></a>    genre_correlations[genre] <span class="op">=</span> mean_corr</span>
<span id="cb16-739"><a href="#cb16-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-740"><a href="#cb16-740" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a nice-looking DataFrame table</span></span>
<span id="cb16-741"><a href="#cb16-741" aria-hidden="true" tabindex="-1"></a>genre_corr_df <span class="op">=</span> pd.DataFrame(</span>
<span id="cb16-742"><a href="#cb16-742" aria-hidden="true" tabindex="-1"></a>    <span class="bu">list</span>(genre_correlations.items()), </span>
<span id="cb16-743"><a href="#cb16-743" aria-hidden="true" tabindex="-1"></a>    columns<span class="op">=</span>[<span class="st">'Genre'</span>, <span class="st">'Mean Correlation'</span>]</span>
<span id="cb16-744"><a href="#cb16-744" aria-hidden="true" tabindex="-1"></a>).sort_values(<span class="st">'Mean Correlation'</span>, ascending<span class="op">=</span><span class="va">False</span>).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-745"><a href="#cb16-745" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-746"><a href="#cb16-746" aria-hidden="true" tabindex="-1"></a>genre_corr_df[<span class="st">'Mean Correlation'</span>] <span class="op">=</span> genre_corr_df[<span class="st">'Mean Correlation'</span>].<span class="bu">round</span>(<span class="dv">3</span>)</span>
<span id="cb16-747"><a href="#cb16-747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-748"><a href="#cb16-748" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(genre_corr_df.to_string(index<span class="op">=</span><span class="va">False</span>))</span>
<span id="cb16-749"><a href="#cb16-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-750"><a href="#cb16-750" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-751"><a href="#cb16-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-752"><a href="#cb16-752" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-753"><a href="#cb16-753" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-754"><a href="#cb16-754" aria-hidden="true" tabindex="-1"></a>Sci-FI and Horror are the most internally correlated genres, while Political, Bildung, and Mystery are less internally correlated. </span>
<span id="cb16-755"><a href="#cb16-755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-756"><a href="#cb16-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-757"><a href="#cb16-757" aria-hidden="true" tabindex="-1"></a><span class="fu">## Conclusion</span></span>
<span id="cb16-758"><a href="#cb16-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-759"><a href="#cb16-759" aria-hidden="true" tabindex="-1"></a>The Top 500 SPL Dataframe is an example of what we can do with complex reception data after using manual methods to extract a high fidelity subcorpus. The top 500 novels represents a particularly canonical and popular set of fiction, featuring both contemporary and historical authors, book series, and a diverse set of genres. </span>
<span id="cb16-760"><a href="#cb16-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-761"><a href="#cb16-761" aria-hidden="true" tabindex="-1"></a><span class="fu">## References</span></span>
<span id="cb16-762"><a href="#cb16-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-763"><a href="#cb16-763" aria-hidden="true" tabindex="-1"></a>::: {#refs}</span>
<span id="cb16-764"><a href="#cb16-764" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb16-765"><a href="#cb16-765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-766"><a href="#cb16-766" aria-hidden="true" tabindex="-1"></a>::: {#custom-footnotes}</span>
<span id="cb16-767"><a href="#cb16-767" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb16-768"><a href="#cb16-768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-769"><a href="#cb16-769" aria-hidden="true" tabindex="-1"></a><span class="fu"># Explore the Data {#tabset-1-2}</span></span>
<span id="cb16-770"><a href="#cb16-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-771"><a href="#cb16-771" aria-hidden="true" tabindex="-1"></a><span class="fu">## Explore the Data</span></span>
<span id="cb16-772"><a href="#cb16-772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-773"><a href="#cb16-773" aria-hidden="true" tabindex="-1"></a>::::::: {.content-hidden when-format="pdf"}</span>
<span id="cb16-776"><a href="#cb16-776" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb16-777"><a href="#cb16-777" aria-hidden="true" tabindex="-1"></a><span class="co">//|echo: false</span></span>
<span id="cb16-778"><a href="#cb16-778" aria-hidden="true" tabindex="-1"></a><span class="co">//|output: false</span></span>
<span id="cb16-779"><a href="#cb16-779" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-780"><a href="#cb16-780" aria-hidden="true" tabindex="-1"></a><span class="co">// Using the Post45 Data Viewer</span></span>
<span id="cb16-781"><a href="#cb16-781" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/d/8bb63a6cde9addff</span></span>
<span id="cb16-782"><a href="#cb16-782" aria-hidden="true" tabindex="-1"></a><span class="fu">generateTabulatorTableFromCSV</span>(</span>
<span id="cb16-783"><a href="#cb16-783" aria-hidden="true" tabindex="-1"></a>  <span class="st">"#table-container4"</span><span class="op">,</span></span>
<span id="cb16-784"><a href="#cb16-784" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://responsible-datasets-in-context.s3.us-west-2.amazonaws.com/top_500_spl_df.csv"</span><span class="op">,</span></span>
<span id="cb16-785"><a href="#cb16-785" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb16-786"><a href="#cb16-786" aria-hidden="true" tabindex="-1"></a>    <span class="dt">displayedColumns</span><span class="op">:</span> [</span>
<span id="cb16-787"><a href="#cb16-787" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Top 500 info and checkouts</span></span>
<span id="cb16-788"><a href="#cb16-788" aria-hidden="true" tabindex="-1"></a>      <span class="st">"top_500_title"</span><span class="op">,</span></span>
<span id="cb16-789"><a href="#cb16-789" aria-hidden="true" tabindex="-1"></a>      <span class="st">"author"</span><span class="op">,</span></span>
<span id="cb16-790"><a href="#cb16-790" aria-hidden="true" tabindex="-1"></a>      <span class="st">"checkoutyear"</span><span class="op">,</span></span>
<span id="cb16-791"><a href="#cb16-791" aria-hidden="true" tabindex="-1"></a>      <span class="st">"checkoutmonth"</span><span class="op">,</span></span>
<span id="cb16-792"><a href="#cb16-792" aria-hidden="true" tabindex="-1"></a>      <span class="st">'top_500_rank'</span><span class="op">,</span></span>
<span id="cb16-793"><a href="#cb16-793" aria-hidden="true" tabindex="-1"></a>      <span class="st">'pub_year'</span><span class="op">,</span></span>
<span id="cb16-794"><a href="#cb16-794" aria-hidden="true" tabindex="-1"></a>      <span class="st">'genre'</span><span class="op">,</span></span>
<span id="cb16-795"><a href="#cb16-795" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-796"><a href="#cb16-796" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Specific SPL Record</span></span>
<span id="cb16-797"><a href="#cb16-797" aria-hidden="true" tabindex="-1"></a>      <span class="st">"title"</span><span class="op">,</span></span>
<span id="cb16-798"><a href="#cb16-798" aria-hidden="true" tabindex="-1"></a>      <span class="st">"creator"</span><span class="op">,</span></span>
<span id="cb16-799"><a href="#cb16-799" aria-hidden="true" tabindex="-1"></a>      <span class="st">"checkouts"</span><span class="op">,</span></span>
<span id="cb16-800"><a href="#cb16-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-801"><a href="#cb16-801" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Long description</span></span>
<span id="cb16-802"><a href="#cb16-802" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb16-803"><a href="#cb16-803" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-804"><a href="#cb16-804" aria-hidden="true" tabindex="-1"></a>    <span class="dt">columnPopups</span><span class="op">:</span> [</span>
<span id="cb16-805"><a href="#cb16-805" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Title of the matched Top 500 Novel"</span><span class="op">,</span></span>
<span id="cb16-806"><a href="#cb16-806" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Corresponding Author from the Top 500 Dataset"</span><span class="op">,</span></span>
<span id="cb16-807"><a href="#cb16-807" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Year of Checkout"</span><span class="op">,</span></span>
<span id="cb16-808"><a href="#cb16-808" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Month of Checkout"</span><span class="op">,</span></span>
<span id="cb16-809"><a href="#cb16-809" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Rank in the top 500 novel dataframe"</span><span class="op">,</span></span>
<span id="cb16-810"><a href="#cb16-810" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Year of Publication"</span><span class="op">,</span></span>
<span id="cb16-811"><a href="#cb16-811" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Assigned Genre label From the Top 500 dataset"</span><span class="op">,</span></span>
<span id="cb16-812"><a href="#cb16-812" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-813"><a href="#cb16-813" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Title in the SPL data"</span><span class="op">,</span></span>
<span id="cb16-814"><a href="#cb16-814" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Creator in the SPL data"</span><span class="op">,</span></span>
<span id="cb16-815"><a href="#cb16-815" aria-hidden="true" tabindex="-1"></a>      <span class="st">"# of Checkouts of the SPL entry in the given month and year"</span><span class="op">,</span></span>
<span id="cb16-816"><a href="#cb16-816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-817"><a href="#cb16-817" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb16-818"><a href="#cb16-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-819"><a href="#cb16-819" aria-hidden="true" tabindex="-1"></a>    <span class="co">// columnWidths: {</span></span>
<span id="cb16-820"><a href="#cb16-820" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   governor: "220px",</span></span>
<span id="cb16-821"><a href="#cb16-821" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   party: "140px",</span></span>
<span id="cb16-822"><a href="#cb16-822" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   years_in_office: "220px",</span></span>
<span id="cb16-823"><a href="#cb16-823" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   school: "220px",</span></span>
<span id="cb16-824"><a href="#cb16-824" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   bio_text: "40%"</span></span>
<span id="cb16-825"><a href="#cb16-825" aria-hidden="true" tabindex="-1"></a>    <span class="co">// },</span></span>
<span id="cb16-826"><a href="#cb16-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-827"><a href="#cb16-827" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Treat these as numeric so you get proper sort/filter ranges</span></span>
<span id="cb16-828"><a href="#cb16-828" aria-hidden="true" tabindex="-1"></a>    <span class="dt">numericColumns</span><span class="op">:</span> [<span class="st">"checkouts"</span><span class="op">,</span> <span class="st">"top_500_rank"</span><span class="op">,</span> <span class="st">'pub_year'</span>]<span class="op">,</span></span>
<span id="cb16-829"><a href="#cb16-829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-830"><a href="#cb16-830" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Good facets for filtering</span></span>
<span id="cb16-831"><a href="#cb16-831" aria-hidden="true" tabindex="-1"></a>    <span class="dt">categoryColumns</span><span class="op">:</span> [</span>
<span id="cb16-832"><a href="#cb16-832" aria-hidden="true" tabindex="-1"></a>      <span class="st">"top_500_title"</span><span class="op">,</span></span>
<span id="cb16-833"><a href="#cb16-833" aria-hidden="true" tabindex="-1"></a>      <span class="st">"author"</span><span class="op">,</span></span>
<span id="cb16-834"><a href="#cb16-834" aria-hidden="true" tabindex="-1"></a>      <span class="st">'genre'</span></span>
<span id="cb16-835"><a href="#cb16-835" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-836"><a href="#cb16-836" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb16-837"><a href="#cb16-837" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-838"><a href="#cb16-838" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Default sort: by state, then governor</span></span>
<span id="cb16-839"><a href="#cb16-839" aria-hidden="true" tabindex="-1"></a>    <span class="dt">sortColumns</span><span class="op">:</span> [<span class="st">"state_territory"</span><span class="op">,</span> <span class="st">"governor"</span>]<span class="op">,</span></span>
<span id="cb16-840"><a href="#cb16-840" aria-hidden="true" tabindex="-1"></a>    <span class="dt">sortOrders</span><span class="op">:</span> [<span class="st">"asc"</span><span class="op">,</span> <span class="st">"asc"</span>]<span class="op">,</span></span>
<span id="cb16-841"><a href="#cb16-841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-842"><a href="#cb16-842" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Buttons (kept the same IDs you used)</span></span>
<span id="cb16-843"><a href="#cb16-843" aria-hidden="true" tabindex="-1"></a>    <span class="dt">buttonContainerId</span><span class="op">:</span> <span class="st">"#button-container1"</span><span class="op">,</span></span>
<span id="cb16-844"><a href="#cb16-844" aria-hidden="true" tabindex="-1"></a>    <span class="dt">rawButtonId</span><span class="op">:</span> <span class="st">"#download-raw1"</span><span class="op">,</span></span>
<span id="cb16-845"><a href="#cb16-845" aria-hidden="true" tabindex="-1"></a>    <span class="dt">urlCopyButtonId</span><span class="op">:</span> <span class="st">"#copy-url1"</span><span class="op">,</span></span>
<span id="cb16-846"><a href="#cb16-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-847"><a href="#cb16-847" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Optional: if your helper supports label maps for 1/0 columns, this is handy.</span></span>
<span id="cb16-848"><a href="#cb16-848" aria-hidden="true" tabindex="-1"></a>    <span class="co">// booleanLabelColumns: {</span></span>
<span id="cb16-849"><a href="#cb16-849" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   college_attendance: { "1": "Yes", "0": "No" },</span></span>
<span id="cb16-850"><a href="#cb16-850" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   ivy_attendance: { "1": "Yes", "0": "No" },</span></span>
<span id="cb16-851"><a href="#cb16-851" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   lawyer: { "1": "Yes", "0": "No" },</span></span>
<span id="cb16-852"><a href="#cb16-852" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   military_service: { "1": "Yes", "0": "No" },</span></span>
<span id="cb16-853"><a href="#cb16-853" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   born_in_state_territory: { "1": "Yes", "0": "No" },</span></span>
<span id="cb16-854"><a href="#cb16-854" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   intl_born: { "1": "Yes", "0": "No" }</span></span>
<span id="cb16-855"><a href="#cb16-855" aria-hidden="true" tabindex="-1"></a>    <span class="co">// }</span></span>
<span id="cb16-856"><a href="#cb16-856" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-857"><a href="#cb16-857" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb16-858"><a href="#cb16-858" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-859"><a href="#cb16-859" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-860"><a href="#cb16-860" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-861"><a href="#cb16-861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-862"><a href="#cb16-862" aria-hidden="true" tabindex="-1"></a>::: {#table-container1 style="height: 500px"}</span>
<span id="cb16-863"><a href="#cb16-863" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb16-864"><a href="#cb16-864" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-865"><a href="#cb16-865" aria-hidden="true" tabindex="-1"></a>Download Full Data</span>
<span id="cb16-866"><a href="#cb16-866" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-867"><a href="#cb16-867" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb16-868"><a href="#cb16-868" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-869"><a href="#cb16-869" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> id</span><span class="op">=</span><span class="st">"download-raw2"</span><span class="dt">&gt;</span></span>
<span id="cb16-870"><a href="#cb16-870" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-871"><a href="#cb16-871" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">i</span><span class="ot"> class</span><span class="op">=</span><span class="st">"fas fa-download"</span><span class="dt">&gt;&lt;/</span><span class="kw">i</span><span class="dt">&gt;&lt;/</span><span class="kw">i</span><span class="dt">&gt;</span> Download Full Data</span>
<span id="cb16-872"><a href="#cb16-872" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-873"><a href="#cb16-873" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb16-874"><a href="#cb16-874" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-875"><a href="#cb16-875" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> id</span><span class="op">=</span><span class="st">"copy-url2"</span><span class="dt">&gt;</span></span>
<span id="cb16-876"><a href="#cb16-876" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-877"><a href="#cb16-877" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">i</span><span class="ot"> class</span><span class="op">=</span><span class="st">"fas fa-copy"</span><span class="dt">&gt;&lt;/</span><span class="kw">i</span><span class="dt">&gt;</span> Copy Full Data URL</span>
<span id="cb16-878"><a href="#cb16-878" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-879"><a href="#cb16-879" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb16-880"><a href="#cb16-880" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-881"><a href="#cb16-881" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb16-882"><a href="#cb16-882" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-883"><a href="#cb16-883" aria-hidden="true" tabindex="-1"></a>Download Table Data (including filtered options)</span>
<span id="cb16-884"><a href="#cb16-884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-885"><a href="#cb16-885" aria-hidden="true" tabindex="-1"></a>::: {#button-container2}</span>
<span id="cb16-886"><a href="#cb16-886" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> id</span><span class="op">=</span><span class="st">"download-csv"</span><span class="dt">&gt;</span></span>
<span id="cb16-887"><a href="#cb16-887" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-888"><a href="#cb16-888" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">i</span><span class="ot"> class</span><span class="op">=</span><span class="st">"fas fa-download"</span><span class="dt">&gt;&lt;/</span><span class="kw">i</span><span class="dt">&gt;&lt;/</span><span class="kw">i</span><span class="dt">&gt;</span> Download CSV</span>
<span id="cb16-889"><a href="#cb16-889" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-890"><a href="#cb16-890" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb16-891"><a href="#cb16-891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-892"><a href="#cb16-892" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> id</span><span class="op">=</span><span class="st">"download-json"</span><span class="dt">&gt;</span></span>
<span id="cb16-893"><a href="#cb16-893" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-894"><a href="#cb16-894" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">i</span><span class="ot"> class</span><span class="op">=</span><span class="st">"fas fa-download"</span><span class="dt">&gt;&lt;/</span><span class="kw">i</span><span class="dt">&gt;&lt;/</span><span class="kw">i</span><span class="dt">&gt;</span> Download JSON</span>
<span id="cb16-895"><a href="#cb16-895" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-896"><a href="#cb16-896" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb16-897"><a href="#cb16-897" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-898"><a href="#cb16-898" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> id</span><span class="op">=</span><span class="st">"download-xlsx"</span><span class="dt">&gt;</span></span>
<span id="cb16-899"><a href="#cb16-899" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-900"><a href="#cb16-900" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">i</span><span class="ot"> class</span><span class="op">=</span><span class="st">"fas fa-download"</span><span class="dt">&gt;&lt;/</span><span class="kw">i</span><span class="dt">&gt;&lt;/</span><span class="kw">i</span><span class="dt">&gt;</span> Download Excel</span>
<span id="cb16-901"><a href="#cb16-901" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-902"><a href="#cb16-902" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb16-903"><a href="#cb16-903" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb16-904"><a href="#cb16-904" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-905"><a href="#cb16-905" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://unpkg.com/tabulator-tables@6.3.0/dist/css/tabulator.min.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="dt">&gt;</span></span>
<span id="cb16-906"><a href="#cb16-906" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-907"><a href="#cb16-907" aria-hidden="true" tabindex="-1"></a><span class="in">```{=html}</span></span>
<span id="cb16-908"><a href="#cb16-908" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;script src="https://unpkg.com/tabulator-tables@6.3.0/dist/js/tabulator.min.js"&gt;&lt;/script&gt;</span></span>
<span id="cb16-909"><a href="#cb16-909" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-910"><a href="#cb16-910" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-911"><a href="#cb16-911" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- Excel script --&gt;</span></span>
<span id="cb16-912"><a href="#cb16-912" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-913"><a href="#cb16-913" aria-hidden="true" tabindex="-1"></a><span class="in">```{=html}</span></span>
<span id="cb16-914"><a href="#cb16-914" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;script type="text/javascript" src="https://oss.sheetjs.com/sheetjs/xlsx.full.min.js"&gt;&lt;/script&gt;</span></span>
<span id="cb16-915"><a href="#cb16-915" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-916"><a href="#cb16-916" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-917"><a href="#cb16-917" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip icon="false"}</span>
<span id="cb16-918"><a href="#cb16-918" aria-hidden="true" tabindex="-1"></a><span class="fu">## Creative Commons License</span></span>
<span id="cb16-919"><a href="#cb16-919" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-920"><a href="#cb16-920" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">p</span><span class="ot"> xmlns:cc</span><span class="op">=</span><span class="st">"http://creativecommons.org/ns#"</span><span class="dt">&gt;</span></span>
<span id="cb16-921"><a href="#cb16-921" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-922"><a href="#cb16-922" aria-hidden="true" tabindex="-1"></a>This work is licensed under <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://creativecommons.org/licenses/by/4.0/?ref=chooser-v1"</span><span class="ot"> target</span><span class="op">=</span><span class="st">"_blank"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"license noopener noreferrer"</span><span class="ot"> style</span><span class="op">=</span><span class="st">"display:inline-block;"</span><span class="dt">&gt;</span>CC BY 4.0<span class="dt">&lt;</span><span class="kw">img</span><span class="ot"> src</span><span class="op">=</span><span class="st">"https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"</span><span class="ot"> style</span><span class="op">=</span><span class="st">"height:22px!important;margin-left:3px;vertical-align:text-bottom;"</span><span class="dt">/&gt;&lt;</span><span class="kw">img</span><span class="ot"> src</span><span class="op">=</span><span class="st">"https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"</span><span class="ot"> style</span><span class="op">=</span><span class="st">"height:22px!important;margin-left:3px;vertical-align:text-bottom;"</span><span class="dt">/&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb16-923"><a href="#cb16-923" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-924"><a href="#cb16-924" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb16-925"><a href="#cb16-925" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb16-926"><a href="#cb16-926" aria-hidden="true" tabindex="-1"></a>:::::::</span>
<span id="cb16-927"><a href="#cb16-927" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-928"><a href="#cb16-928" aria-hidden="true" tabindex="-1"></a><span class="fu"># Exercises {#exercises}</span></span>
<span id="cb16-929"><a href="#cb16-929" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-930"><a href="#cb16-930" aria-hidden="true" tabindex="-1"></a><span class="fu">## Programming Exercises</span></span>
<span id="cb16-931"><a href="#cb16-931" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-932"><a href="#cb16-932" aria-hidden="true" tabindex="-1"></a>The Historical Gubernatorial Dataset is useful as a dataset for presenting interesting examples and prompting future independent exploration. Information about the governors in the dataset is well-available online, and finding historical outliers can be a fun way to engage with the history of the American Government. The exercise we present here introduces basic data exploration skills to look at common instances in a dataframe column, and then prompts the student to explore further on their own.</span>
<span id="cb16-933"><a href="#cb16-933" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-934"><a href="#cb16-934" aria-hidden="true" tabindex="-1"></a>:::: {.panel-tabset .nav-pills}</span>
<span id="cb16-935"><a href="#cb16-935" aria-hidden="true" tabindex="-1"></a><span class="fu"># Python</span></span>
<span id="cb16-936"><a href="#cb16-936" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-937"><a href="#cb16-937" aria-hidden="true" tabindex="-1"></a>::: {#exercise-posts-python}</span>
<span id="cb16-938"><a href="#cb16-938" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb16-939"><a href="#cb16-939" aria-hidden="true" tabindex="-1"></a>::::</span>
<span id="cb16-940"><a href="#cb16-940" aria-hidden="true" tabindex="-1"></a>::::::::::::::::::::</span>
</code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p style="color:white">
Supported by<a href="https://foundation.mozilla.org/en/blog/mozilla-announces-15-new-responsible-computing-challenge-awardees-in-the-us/"><img src="https://assets.mofoprod.net/network/images/mo-fo_logo-w.2e16d0ba.fill-890x890-c100.format-jpeg.jpg" class="img-fluid" alt="Mozilla" width="65"></a>and partners
</p>
</div>   
    <div class="nav-footer-center">
<p style="color:white">
Made with <a href="https://quarto.org/"><img src="https://raw.githubusercontent.com/github/explore/80f119e965a9a3df7b74c3f7b63a502e3d0ded36/topics/quarto/quarto.png" class="img-fluid" alt="Quarto" width="65"></a>
</p>
</div>
    <div class="nav-footer-right">
<p style="color:white">
Copyright © 2024
</p>
</div>
  </div>
</footer>




</body></html>